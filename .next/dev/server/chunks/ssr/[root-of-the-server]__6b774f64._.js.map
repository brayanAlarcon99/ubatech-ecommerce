{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 214, "column": 0}, "map": {"version":3,"sources":["file:///D:/ubatech/lib/firebase.ts"],"sourcesContent":["import { initializeApp, getApps, getApp } from \"firebase/app\"\nimport { getFirestore } from \"firebase/firestore\"\nimport type { FirebaseApp } from \"firebase/app\"\nimport type { Firestore } from \"firebase/firestore\"\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyB6Yczsu4sF8cjD4H1Jz2KU4TO9f0biCoQ\",\n  authDomain: \"ubatech-a8650.firebaseapp.com\",\n  projectId: \"ubatech-a8650\",\n  storageBucket: \"ubatech-a8650.firebasestorage.app\",\n  messagingSenderId: \"609393850830\",\n  appId: \"1:609393850830:web:567d90bdc33dd65fe2d39f\",\n  measurementId: \"G-G2DW96480G\",\n}\n\nlet app: FirebaseApp = (getApps().length === 0 ? initializeApp(firebaseConfig) : getApp())\nlet db: Firestore | null = null\n\ntry {\n  if (getApps().length === 0) {\n    app = initializeApp(firebaseConfig)\n  } else {\n    app = getApp()\n  }\n\n  const initFirestore = () => {\n    try {\n      db = getFirestore(app)\n      console.log(\"[v0] Firestore initialized successfully\")\n      return db\n    } catch (error) {\n      console.warn(\"[v0] Firestore not ready yet, will retry on access\")\n      return null\n    }\n  }\n\n  db = initFirestore()\n} catch (error) {\n  console.error(\"[v0] Firebase initialization error:\", error)\n}\n\nexport const getDb = () => {\n  if (!db) {\n    try {\n      db = getFirestore(getApp())\n    } catch (error) {\n      console.error(\"[v0] Failed to get Firestore instance:\", error)\n      throw new Error(\"Firestore is not available. Please ensure Firestore Database is created in Firebase Console.\")\n    }\n  }\n  return db\n}\n\nexport { app }\nexport default db\n"],"names":[],"mappings":";;;;;;;;AAAA;AAAA;AACA;AAAA;;;AAIA,MAAM,iBAAiB;IACrB,QAAQ;IACR,YAAY;IACZ,WAAW;IACX,eAAe;IACf,mBAAmB;IACnB,OAAO;IACP,eAAe;AACjB;AAEA,IAAI,MAAoB,IAAA,+KAAO,IAAG,MAAM,KAAK,IAAI,IAAA,qLAAa,EAAC,kBAAkB,IAAA,8KAAM;AACvF,IAAI,KAAuB;AAE3B,IAAI;IACF,IAAI,IAAA,+KAAO,IAAG,MAAM,KAAK,GAAG;QAC1B,MAAM,IAAA,qLAAa,EAAC;IACtB,OAAO;QACL,MAAM,IAAA,8KAAM;IACd;IAEA,MAAM,gBAAgB;QACpB,IAAI;YACF,KAAK,IAAA,iLAAY,EAAC;YAClB,QAAQ,GAAG,CAAC;YACZ,OAAO;QACT,EAAE,OAAO,OAAO;YACd,QAAQ,IAAI,CAAC;YACb,OAAO;QACT;IACF;IAEA,KAAK;AACP,EAAE,OAAO,OAAO;IACd,QAAQ,KAAK,CAAC,uCAAuC;AACvD;AAEO,MAAM,QAAQ;IACnB,IAAI,CAAC,IAAI;QACP,IAAI;YACF,KAAK,IAAA,iLAAY,EAAC,IAAA,8KAAM;QAC1B,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,0CAA0C;YACxD,MAAM,IAAI,MAAM;QAClB;IACF;IACA,OAAO;AACT;;uCAGe","debugId":null}},
    {"offset": {"line": 294, "column": 0}, "map": {"version":3,"sources":["file:///D:/ubatech/lib/admin-config.ts"],"sourcesContent":["import bcrypt from \"bcryptjs\"\r\n\r\n// Admin configuration\r\nexport const ADMIN_CONFIG = {\r\n  email: \"admin@ubatech.com\",\r\n  // Contrase√±a hasheada: Admin123!\r\n  passwordHash: \"$2b$10$3uQDp5EBDeGBNBdvdkgSuOVyKz0RY8XHqTqLrHPRZJHcA/NecODlu\",\r\n}\r\n\r\n// Verificar si una contrase√±a coincide con el hash del admin\r\nexport function verifyAdminPassword(password: string): boolean {\r\n  return bcrypt.compareSync(password, ADMIN_CONFIG.passwordHash)\r\n}\r\n\r\n// Crear una nueva contrase√±a hasheada (√∫til para cambios de contrase√±a futuros)\r\nexport function hashAdminPassword(password: string): string {\r\n  return bcrypt.hashSync(password, 10)\r\n}\r\n\r\n// Inicializar la cuenta admin (verificaci√≥n de que existe)\r\nexport function initializeAdminAccount(): void {\r\n  if (typeof window === \"undefined\") {\r\n    // Solo en servidor\r\n    console.log(\"‚úì Admin account initialized: admin@ubatech.com\")\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;AAAA;;AAGO,MAAM,eAAe;IAC1B,OAAO;IACP,iCAAiC;IACjC,cAAc;AAChB;AAGO,SAAS,oBAAoB,QAAgB;IAClD,OAAO,4IAAM,CAAC,WAAW,CAAC,UAAU,aAAa,YAAY;AAC/D;AAGO,SAAS,kBAAkB,QAAgB;IAChD,OAAO,4IAAM,CAAC,QAAQ,CAAC,UAAU;AACnC;AAGO,SAAS;IACd,wCAAmC;QACjC,mBAAmB;QACnB,QAAQ,GAAG,CAAC;IACd;AACF","debugId":null}},
    {"offset": {"line": 327, "column": 0}, "map": {"version":3,"sources":["file:///D:/ubatech/lib/admin-auth.ts"],"sourcesContent":["import { ADMIN_CONFIG, verifyAdminPassword } from \"./admin-config\"\n\nconst ADMIN_TOKEN_KEY = \"adminAuthToken\"\n\nfunction generateAuthToken(): string {\n  return btoa(`${Date.now()}:${Math.random()}`)\n}\n\n/**\n * Autenticar administrador con email y contrase√±a\n */\nexport async function loginAdmin(email: string, password: string): Promise<boolean> {\n  try {\n    // Validar que el email coincida con el del admin\n    if (email !== ADMIN_CONFIG.email) {\n      return false\n    }\n\n    // Validar que la contrase√±a coincida con el hash\n    if (!verifyAdminPassword(password)) {\n      return false\n    }\n\n    // Crear sesi√≥n en localStorage\n    const token = generateAuthToken()\n    if (typeof window !== \"undefined\") {\n      localStorage.setItem(ADMIN_TOKEN_KEY, token)\n      localStorage.setItem(\"adminEmail\", email)\n      localStorage.setItem(\"adminLoginTime\", new Date().toISOString())\n    }\n\n    return true\n  } catch (error) {\n    console.error(\"[Admin Auth] Error en login:\", error)\n    return false\n  }\n}\n\n/**\n * Verificar si el usuario est√° autenticado como administrador\n */\nexport function isAdminAuthenticated(): boolean {\n  if (typeof window === \"undefined\") return false\n\n  const token = localStorage.getItem(ADMIN_TOKEN_KEY)\n  const email = localStorage.getItem(\"adminEmail\")\n\n  // Ambos deben existir y el email debe ser v√°lido\n  return token !== null && email === ADMIN_CONFIG.email\n}\n\n/**\n * Cerrar sesi√≥n de administrador\n */\nexport async function logoutAdmin(): Promise<void> {\n  if (typeof window === \"undefined\") return\n\n  localStorage.removeItem(ADMIN_TOKEN_KEY)\n  localStorage.removeItem(\"adminEmail\")\n  localStorage.removeItem(\"adminLoginTime\")\n}\n\n/**\n * Obtener informaci√≥n de la sesi√≥n del admin\n */\nexport function getAdminSessionInfo(): {\n  email: string | null\n  loginTime: string | null\n} | null {\n  if (!isAdminAuthenticated()) {\n    return null\n  }\n\n  return {\n    email: localStorage.getItem(\"adminEmail\"),\n    loginTime: localStorage.getItem(\"adminLoginTime\"),\n  }\n}\n\n/**\n * Obtener tiempo de inactividad configurado en minutos\n */\nexport function getInactivityTimeout(): number {\n  if (typeof window === \"undefined\") return 5\n\n  const customTimeout = localStorage.getItem(\"adminInactivityTimeout\")\n  if (customTimeout) {\n    const minutes = parseInt(customTimeout, 10)\n    // Validar que sea un n√∫mero v√°lido entre 1 y 120 minutos\n    if (!isNaN(minutes) && minutes >= 1 && minutes <= 120) {\n      return minutes\n    }\n  }\n  return 5 // Default 5 minutos\n}\n\n/**\n * Establecer tiempo de inactividad (solo para super usuarios)\n */\nexport function setInactivityTimeout(minutes: number): boolean {\n  if (typeof window === \"undefined\") return false\n\n  // Validar rango v√°lido\n  if (minutes < 1 || minutes > 120) {\n    console.error(\"El tiempo de inactividad debe estar entre 1 y 120 minutos\")\n    return false\n  }\n\n  localStorage.setItem(\"adminInactivityTimeout\", minutes.toString())\n  return true\n}\n\n/**\n * Obtener tiempo de inactividad configurado en segundos\n */\nexport function getInactivityTimeoutSeconds(): number {\n  return getInactivityTimeout() * 60\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAAA;;AAEA,MAAM,kBAAkB;AAExB,SAAS;IACP,OAAO,KAAK,GAAG,KAAK,GAAG,GAAG,CAAC,EAAE,KAAK,MAAM,IAAI;AAC9C;AAKO,eAAe,WAAW,KAAa,EAAE,QAAgB;IAC9D,IAAI;QACF,iDAAiD;QACjD,IAAI,UAAU,sIAAY,CAAC,KAAK,EAAE;YAChC,OAAO;QACT;QAEA,iDAAiD;QACjD,IAAI,CAAC,IAAA,6IAAmB,EAAC,WAAW;YAClC,OAAO;QACT;QAEA,+BAA+B;QAC/B,MAAM,QAAQ;QACd;;QAMA,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,gCAAgC;QAC9C,OAAO;IACT;AACF;AAKO,SAAS;IACd,wCAAmC,OAAO;;;IAE1C,MAAM;IACN,MAAM;AAIR;AAKO,eAAe;IACpB,wCAAmC;;;AAKrC;AAKO,SAAS;IAId,IAAI,CAAC,wBAAwB;QAC3B,OAAO;IACT;IAEA,OAAO;QACL,OAAO,aAAa,OAAO,CAAC;QAC5B,WAAW,aAAa,OAAO,CAAC;IAClC;AACF;AAKO,SAAS;IACd,wCAAmC,OAAO;;;IAE1C,MAAM;AASR;AAKO,SAAS,qBAAqB,OAAe;IAClD,wCAAmC,OAAO;;;AAU5C;AAKO,SAAS;IACd,OAAO,yBAAyB;AAClC","debugId":null}},
    {"offset": {"line": 408, "column": 0}, "map": {"version":3,"sources":["file:///D:/ubatech/components/admin-header.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useRouter } from \"next/navigation\"\r\nimport { logoutAdmin, getAdminSessionInfo } from \"@/lib/admin-auth\"\r\nimport Image from \"next/image\"\r\nimport Link from \"next/link\"\r\nimport { useEffect, useState } from \"react\"\r\n\r\nexport default function AdminHeader() {\r\n  const router = useRouter()\r\n  const [sessionInfo, setSessionInfo] = useState<{ email: string | null; loginTime: string | null } | null>(null)\r\n\r\n  useEffect(() => {\r\n    const info = getAdminSessionInfo()\r\n    setSessionInfo(info)\r\n  }, [])\r\n\r\n  function handleLogout() {\r\n    logoutAdmin()\r\n    router.push(\"/admin/login\")\r\n  }\r\n\r\n  return (\r\n    <header\r\n      className=\"border-b shadow-md\"\r\n      style={{ backgroundColor: \"var(--primary-dark)\", borderColor: \"var(--primary)\" }}\r\n    >\r\n      <div className=\"max-w-7xl mx-auto px-4 py-4 flex items-center justify-between\">\r\n        <Link href=\"/admin/dashboard\" className=\"flex items-center gap-2\">\r\n          <div className=\"w-10 h-10 relative\">\r\n            <Image src=\"/logo-ubatech.png\" alt=\"Ubatech+Pro\" fill className=\"object-contain\" />\r\n          </div>\r\n          <span className=\"font-bold text-lg text-white\">\r\n            Admin Panel\r\n          </span>\r\n        </Link>\r\n\r\n        <div className=\"flex items-center gap-4\">\r\n          {sessionInfo?.email && (\r\n            <span className=\"text-sm text-white\">\r\n              Bienvenido: <strong>{sessionInfo.email}</strong>\r\n            </span>\r\n          )}\r\n          <button\r\n            onClick={handleLogout}\r\n            className=\"px-4 py-2 text-white rounded-lg font-medium transition-all hover:bg-red-600 bg-red-500\"\r\n          >\r\n            Cerrar Sesi√≥n\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </header>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AANA;;;;;;;AAQe,SAAS;IACtB,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAA4D;IAE1G,IAAA,kNAAS,EAAC;QACR,MAAM,OAAO,IAAA,2IAAmB;QAChC,eAAe;IACjB,GAAG,EAAE;IAEL,SAAS;QACP,IAAA,mIAAW;QACX,OAAO,IAAI,CAAC;IACd;IAEA,qBACE,8OAAC;QACC,WAAU;QACV,OAAO;YAAE,iBAAiB;YAAuB,aAAa;QAAiB;kBAE/E,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC,uKAAI;oBAAC,MAAK;oBAAmB,WAAU;;sCACtC,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC,wIAAK;gCAAC,KAAI;gCAAoB,KAAI;gCAAc,IAAI;gCAAC,WAAU;;;;;;;;;;;sCAElE,8OAAC;4BAAK,WAAU;sCAA+B;;;;;;;;;;;;8BAKjD,8OAAC;oBAAI,WAAU;;wBACZ,aAAa,uBACZ,8OAAC;4BAAK,WAAU;;gCAAqB;8CACvB,8OAAC;8CAAQ,YAAY,KAAK;;;;;;;;;;;;sCAG1C,8OAAC;4BACC,SAAS;4BACT,WAAU;sCACX;;;;;;;;;;;;;;;;;;;;;;;AAOX","debugId":null}},
    {"offset": {"line": 531, "column": 0}, "map": {"version":3,"sources":["file:///D:/ubatech/components/admin-sidebar.tsx"],"sourcesContent":["\"use client\"\r\n\r\ninterface AdminSidebarProps {\r\n  activeTab: string\r\n  onTabChange: (tab: string) => void\r\n  userRole?: string | null\r\n}\r\n\r\nexport default function AdminSidebar({ activeTab, onTabChange, userRole }: AdminSidebarProps) {\r\n  const allTabs = [\r\n    { id: \"dashboard\", label: \"Dashboard\", icon: \"üìä\" },\r\n    { id: \"products\", label: \"Productos\", icon: \"üì¶\" },\r\n    { id: \"categories\", label: \"Categor√≠as\", icon: \"üè∑Ô∏è\" },\r\n    { id: \"orders\", label: \"Pedidos\", icon: \"üìã\" },\r\n    { id: \"users\", label: \"Administradores\", icon: \"üë•\", requiredRole: \"super\" },\r\n    { id: \"settings\", label: \"Configuraci√≥n\", icon: \"‚öôÔ∏è\" },\r\n  ]\r\n\r\n  const tabs = allTabs.filter((tab) => !tab.requiredRole || userRole === tab.requiredRole)\r\n\r\n  return (\r\n    <aside\r\n      className=\"w-64 border-r\"\r\n      style={{ backgroundColor: \"var(--neutral-white)\", borderColor: \"var(--neutral-gray)\" }}\r\n    >\r\n      <nav className=\"p-6 space-y-2\">\r\n        {tabs.map((tab) => (\r\n          <button\r\n            key={tab.id}\r\n            onClick={() => onTabChange(tab.id)}\r\n            className={`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all font-medium ${\r\n              activeTab === tab.id ? \"text-white\" : \"text-gray-700 hover:bg-gray-100\"\r\n            }`}\r\n            style={activeTab === tab.id ? { backgroundColor: \"var(--primary-dark)\" } : {}}\r\n          >\r\n            <span className=\"text-xl\">{tab.icon}</span>\r\n            {tab.label}\r\n          </button>\r\n        ))}\r\n      </nav>\r\n    </aside>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;;AAQe,SAAS,aAAa,EAAE,SAAS,EAAE,WAAW,EAAE,QAAQ,EAAqB;IAC1F,MAAM,UAAU;QACd;YAAE,IAAI;YAAa,OAAO;YAAa,MAAM;QAAK;QAClD;YAAE,IAAI;YAAY,OAAO;YAAa,MAAM;QAAK;QACjD;YAAE,IAAI;YAAc,OAAO;YAAc,MAAM;QAAM;QACrD;YAAE,IAAI;YAAU,OAAO;YAAW,MAAM;QAAK;QAC7C;YAAE,IAAI;YAAS,OAAO;YAAmB,MAAM;YAAM,cAAc;QAAQ;QAC3E;YAAE,IAAI;YAAY,OAAO;YAAiB,MAAM;QAAK;KACtD;IAED,MAAM,OAAO,QAAQ,MAAM,CAAC,CAAC,MAAQ,CAAC,IAAI,YAAY,IAAI,aAAa,IAAI,YAAY;IAEvF,qBACE,8OAAC;QACC,WAAU;QACV,OAAO;YAAE,iBAAiB;YAAwB,aAAa;QAAsB;kBAErF,cAAA,8OAAC;YAAI,WAAU;sBACZ,KAAK,GAAG,CAAC,CAAC,oBACT,8OAAC;oBAEC,SAAS,IAAM,YAAY,IAAI,EAAE;oBACjC,WAAW,CAAC,+EAA+E,EACzF,cAAc,IAAI,EAAE,GAAG,eAAe,mCACtC;oBACF,OAAO,cAAc,IAAI,EAAE,GAAG;wBAAE,iBAAiB;oBAAsB,IAAI,CAAC;;sCAE5E,8OAAC;4BAAK,WAAU;sCAAW,IAAI,IAAI;;;;;;wBAClC,IAAI,KAAK;;mBARL,IAAI,EAAE;;;;;;;;;;;;;;;AAcvB","debugId":null}},
    {"offset": {"line": 618, "column": 0}, "map": {"version":3,"sources":["file:///D:/ubatech/lib/subcategories.ts"],"sourcesContent":["import { getDb } from \"@/lib/firebase\"\r\nimport {\r\n  collection,\r\n  addDoc,\r\n  updateDoc,\r\n  deleteDoc,\r\n  doc,\r\n  getDocs,\r\n  query,\r\n  where,\r\n  Firestore,\r\n} from \"firebase/firestore\"\r\nimport type { Subcategory } from \"@/types\"\r\n\r\n/**\r\n * Obtiene todas las subcategor√≠as de una categor√≠a espec√≠fica\r\n */\r\nexport async function getSubcategoriesByCategory(categoryId: string): Promise<Subcategory[]> {\r\n  try {\r\n    // Validar que categoryId no est√© vac√≠o\r\n    if (!categoryId || !categoryId.trim?.()) {\r\n      console.warn(\"[v0] getSubcategoriesByCategory called with empty/undefined categoryId\")\r\n      return []\r\n    }\r\n\r\n    const db = getDb()\r\n    const q = query(\r\n      collection(db, \"subcategories\"),\r\n      where(\"categoryId\", \"==\", categoryId)\r\n    )\r\n    const snapshot = await getDocs(q)\r\n    return snapshot.docs.map((doc) => ({\r\n      id: doc.id,\r\n      ...doc.data(),\r\n    })) as Subcategory[]\r\n  } catch (error) {\r\n    console.error(\"[v0] Error loading subcategories:\", error)\r\n    return []\r\n  }\r\n}\r\n\r\n/**\r\n * Obtiene todas las subcategor√≠as\r\n */\r\nexport async function getAllSubcategories(): Promise<Subcategory[]> {\r\n  try {\r\n    const db = getDb()\r\n    const snapshot = await getDocs(collection(db, \"subcategories\"))\r\n    return snapshot.docs.map((doc) => ({\r\n      id: doc.id,\r\n      ...doc.data(),\r\n    })) as Subcategory[]\r\n  } catch (error) {\r\n    console.error(\"[v0] Error loading all subcategories:\", error)\r\n    return []\r\n  }\r\n}\r\n\r\n/**\r\n * Agrega una nueva subcategor√≠a a una categor√≠a\r\n */\r\nexport async function addSubcategory(\r\n  categoryId: string,\r\n  subcategoryName: string\r\n): Promise<string | null> {\r\n  try {\r\n    const db = getDb()\r\n    const docRef = await addDoc(collection(db, \"subcategories\"), {\r\n      name: subcategoryName,\r\n      categoryId: categoryId,\r\n      createdAt: new Date(),\r\n    })\r\n    return docRef.id\r\n  } catch (error) {\r\n    console.error(\"[v0] Error adding subcategory:\", error)\r\n    return null\r\n  }\r\n}\r\n\r\n/**\r\n * Actualiza el nombre de una subcategor√≠a\r\n */\r\nexport async function updateSubcategory(\r\n  subcategoryId: string,\r\n  newName: string\r\n): Promise<boolean> {\r\n  try {\r\n    const db = getDb()\r\n    await updateDoc(doc(db, \"subcategories\", subcategoryId), {\r\n      name: newName,\r\n      updatedAt: new Date(),\r\n    })\r\n    return true\r\n  } catch (error) {\r\n    console.error(\"[v0] Error updating subcategory:\", error)\r\n    return false\r\n  }\r\n}\r\n\r\n/**\r\n * Elimina una subcategor√≠a\r\n */\r\nexport async function deleteSubcategory(subcategoryId: string): Promise<boolean> {\r\n  try {\r\n    const db = getDb()\r\n    \r\n    // Primero verificar si hay productos con esta subcategor√≠a\r\n    const productsQuery = query(\r\n      collection(db, \"products\"),\r\n      where(\"subcategory\", \"==\", subcategoryId)\r\n    )\r\n    const productsSnapshot = await getDocs(productsQuery)\r\n    \r\n    if (productsSnapshot.size > 0) {\r\n      throw new Error(`No se puede eliminar: contiene ${productsSnapshot.size} producto(s)`)\r\n    }\r\n    \r\n    await deleteDoc(doc(db, \"subcategories\", subcategoryId))\r\n    return true\r\n  } catch (error) {\r\n    console.error(\"[v0] Error deleting subcategory:\", error)\r\n    throw error\r\n  }\r\n}\r\n\r\n/**\r\n * Obtiene el nombre de una subcategor√≠a por ID (usando b√∫squeda en memoria)\r\n * Nota: Esta funci√≥n requiere que las subcategor√≠as ya est√©n cargadas en la aplicaci√≥n\r\n */\r\nexport async function getSubcategoryName(subcategoryId: string): Promise<string | null> {\r\n  try {\r\n    if (!subcategoryId) return null\r\n    \r\n    // Obtener todas las subcategor√≠as\r\n    const allSubs = await getAllSubcategories()\r\n    const sub = allSubs.find((s) => s.id === subcategoryId)\r\n    \r\n    return sub ? sub.name : null\r\n  } catch (error) {\r\n    console.error(\"[v0] Error getting subcategory name:\", error)\r\n    return null\r\n  }\r\n}\r\n\r\n/**\r\n * Cuenta el n√∫mero de productos con una subcategor√≠a espec√≠fica\r\n */\r\nexport async function countProductsBySubcategory(subcategoryId: string): Promise<number> {\r\n  try {\r\n    const db = getDb()\r\n    const q = query(\r\n      collection(db, \"products\"),\r\n      where(\"subcategory\", \"==\", subcategoryId)\r\n    )\r\n    const snapshot = await getDocs(q)\r\n    return snapshot.size\r\n  } catch (error) {\r\n    console.error(\"[v0] Error counting products:\", error)\r\n    return 0\r\n  }\r\n}\r\n\r\n/**\r\n * NORMA: Valida la estructura jer√°rquica de un producto\r\n * \r\n * Regla: Si un producto tiene una subcategor√≠a, DEBE:\r\n * 1. La subcategor√≠a debe existir en la colecci√≥n subcategories\r\n * 2. La subcategor√≠a debe pertenecer a la categor√≠a especificada en el producto\r\n * 3. La categor√≠a debe existir en la colecci√≥n categories\r\n * \r\n * @param productData - Datos del producto a validar\r\n * @returns { valid: boolean, error?: string }\r\n */\r\nexport async function validateProductHierarchy(productData: {\r\n  category?: string\r\n  subcategory?: string\r\n}): Promise<{ valid: boolean; error?: string }> {\r\n  try {\r\n    const { category, subcategory } = productData\r\n\r\n    // Si no hay subcategor√≠a, es v√°lido\r\n    if (!subcategory) {\r\n      return { valid: true }\r\n    }\r\n\r\n    // Si hay subcategor√≠a pero no hay categor√≠a, es inv√°lido\r\n    if (!category) {\r\n      return { valid: false, error: \"Se debe especificar una categor√≠a si se selecciona una subcategor√≠a\" }\r\n    }\r\n\r\n    const db = getDb()\r\n\r\n    // Verificar que la subcategor√≠a existe\r\n    const subcategoryRef = doc(db, \"subcategories\", subcategory)\r\n    const subcategorySnap = await getDocs(query(collection(db, \"subcategories\"), where(\"__name__\", \"==\", subcategory)))\r\n\r\n    if (subcategorySnap.empty) {\r\n      return { valid: false, error: `La subcategor√≠a no existe: ${subcategory}` }\r\n    }\r\n\r\n    const subcategoryData = subcategorySnap.docs[0].data()\r\n\r\n    // Verificar que la subcategor√≠a pertenece a la categor√≠a especificada\r\n    // Obtener el ID de la categor√≠a\r\n    const categorySnap = await getDocs(query(collection(db, \"categories\"), where(\"name\", \"==\", category)))\r\n\r\n    if (categorySnap.empty) {\r\n      return { valid: false, error: `La categor√≠a no existe: ${category}` }\r\n    }\r\n\r\n    const categoryId = categorySnap.docs[0].id\r\n\r\n    // Validar que el categoryId de la subcategor√≠a coincide con la categor√≠a del producto\r\n    if (subcategoryData.categoryId !== categoryId) {\r\n      return {\r\n        valid: false,\r\n        error: `La subcategor√≠a \"${subcategoryData.name}\" no pertenece a la categor√≠a \"${category}\"`,\r\n      }\r\n    }\r\n\r\n    return { valid: true }\r\n  } catch (error) {\r\n    console.error(\"[v0] Error validating product hierarchy:\", error)\r\n    return { valid: false, error: \"Error al validar la estructura jer√°rquica\" }\r\n  }\r\n}\r\n\r\n/**\r\n * NORMA: Obtiene todas las subcategor√≠as de una categor√≠a con su informaci√≥n completa\r\n * Incluye el nombre de la categor√≠a para verificaci√≥n\r\n * \r\n * @param categoryId - ID de la categor√≠a\r\n * @returns Array de subcategor√≠as con informaci√≥n de categor√≠a\r\n */\r\nexport async function getSubcategoriesWithCategoryInfo(\r\n  categoryId: string\r\n): Promise<\r\n  Array<{\r\n    id: string\r\n    name: string\r\n    categoryId: string\r\n    categoryName?: string\r\n  }>\r\n> {\r\n  try {\r\n    if (!categoryId || !categoryId.trim?.()) {\r\n      return []\r\n    }\r\n\r\n    const db = getDb()\r\n\r\n    // Obtener la categor√≠a para verificar que existe\r\n    const categoryDoc = await getDocs(query(collection(db, \"categories\"), where(\"__name__\", \"==\", categoryId)))\r\n\r\n    if (categoryDoc.empty) {\r\n      console.warn(\"[v0] Category does not exist:\", categoryId)\r\n      return []\r\n    }\r\n\r\n    const categoryName = categoryDoc.docs[0].data().name\r\n\r\n    // Obtener subcategor√≠as\r\n    const q = query(collection(db, \"subcategories\"), where(\"categoryId\", \"==\", categoryId))\r\n    const snapshot = await getDocs(q)\r\n\r\n    return snapshot.docs.map((doc) => ({\r\n      id: doc.id,\r\n      name: doc.data().name,\r\n      categoryId: doc.data().categoryId,\r\n      categoryName: categoryName,\r\n    }))\r\n  } catch (error) {\r\n    console.error(\"[v0] Error loading subcategories with category info:\", error)\r\n    return []\r\n  }\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 827, "column": 0}, "map": {"version":3,"sources":["file:///D:/ubatech/components/admin/categories-manager.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport React, { useState, useEffect } from \"react\"\r\nimport { getDb } from \"@/lib/firebase\"\r\nimport { collection, getDocs, addDoc, updateDoc, deleteDoc, doc, query, where } from \"firebase/firestore\"\r\nimport { getSubcategoriesByCategory, addSubcategory, updateSubcategory, deleteSubcategory, countProductsBySubcategory } from \"@/lib/subcategories\"\r\nimport type { Subcategory } from \"@/types\"\r\n\r\ninterface Category {\r\n  id: string\r\n  name: string\r\n  productCount?: number\r\n  subcategories?: Subcategory[]\r\n  showSubcategories?: boolean\r\n}\r\n\r\nexport default function CategoriesManager() {\r\n  const [categories, setCategories] = useState<Category[]>([])\r\n  const [newCategory, setNewCategory] = useState(\"\")\r\n  const [editingId, setEditingId] = useState<string | null>(null)\r\n  const [editingName, setEditingName] = useState(\"\")\r\n  const [loading, setLoading] = useState(false)\r\n  const [error, setError] = useState<string | null>(null)\r\n  \r\n  // Estados para subcategor√≠as\r\n  const [expandedCategoryId, setExpandedCategoryId] = useState<string | null>(null)\r\n  const [newSubcategoryName, setNewSubcategoryName] = useState(\"\")\r\n  const [editingSubcategoryId, setEditingSubcategoryId] = useState<string | null>(null)\r\n  const [editingSubcategoryName, setEditingSubcategoryName] = useState(\"\")\r\n\r\n  useEffect(() => {\r\n    loadCategories()\r\n  }, [])\r\n\r\n  async function loadCategories() {\r\n    try {\r\n      setLoading(true)\r\n      setError(null)\r\n      const db = getDb()\r\n      const snapshot = await getDocs(collection(db, \"categories\"))\r\n      const cats = await Promise.all(\r\n        snapshot.docs.map(async (doc) => {\r\n          const categoryName = doc.data().name\r\n          // Contar productos en esta categor√≠a (solo si el nombre existe)\r\n          let productCount = 0\r\n          if (categoryName) {\r\n            const productsQuery = query(collection(db, \"products\"), where(\"category\", \"==\", categoryName))\r\n            const productsSnapshot = await getDocs(productsQuery)\r\n            productCount = productsSnapshot.size\r\n          }\r\n          \r\n          // Cargar subcategor√≠as\r\n          const subcategories = await getSubcategoriesByCategory(doc.id)\r\n          \r\n          return {\r\n            id: doc.id,\r\n            name: categoryName,\r\n            productCount: productCount,\r\n            subcategories: subcategories,\r\n            showSubcategories: false,\r\n          }\r\n        })\r\n      )\r\n      setCategories(cats)\r\n    } catch (error) {\r\n      console.error(\"[v0] Error loading categories:\", error)\r\n      setError(\"Error al cargar categor√≠as\")\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  async function handleAddCategory(e: React.FormEvent) {\r\n    e.preventDefault()\r\n    if (!newCategory.trim()) return\r\n\r\n    try {\r\n      const db = getDb()\r\n      await addDoc(collection(db, \"categories\"), { name: newCategory })\r\n      setNewCategory(\"\")\r\n      await loadCategories()\r\n    } catch (error) {\r\n      console.error(\"[v0] Error adding category:\", error)\r\n      setError(\"Error al agregar categor√≠a\")\r\n    }\r\n  }\r\n\r\n  async function handleEditCategory() {\r\n    if (!editingId || !editingName.trim()) return\r\n\r\n    try {\r\n      const db = getDb()\r\n      await updateDoc(doc(db, \"categories\", editingId), { name: editingName })\r\n      setEditingId(null)\r\n      setEditingName(\"\")\r\n      await loadCategories()\r\n    } catch (error) {\r\n      console.error(\"[v0] Error updating category:\", error)\r\n      setError(\"Error al actualizar categor√≠a\")\r\n    }\r\n  }\r\n\r\n  async function handleAddSubcategory(categoryId: string) {\r\n    if (!newSubcategoryName.trim()) return\r\n\r\n    try {\r\n      await addSubcategory(categoryId, newSubcategoryName)\r\n      setNewSubcategoryName(\"\")\r\n      await loadCategories()\r\n      setError(null)\r\n    } catch (error) {\r\n      console.error(\"[v0] Error adding subcategory:\", error)\r\n      setError(\"Error al agregar subcategor√≠a\")\r\n    }\r\n  }\r\n\r\n  async function handleEditSubcategory() {\r\n    if (!editingSubcategoryId || !editingSubcategoryName.trim()) return\r\n\r\n    try {\r\n      await updateSubcategory(editingSubcategoryId, editingSubcategoryName)\r\n      setEditingSubcategoryId(null)\r\n      setEditingSubcategoryName(\"\")\r\n      await loadCategories()\r\n      setError(null)\r\n    } catch (error) {\r\n      console.error(\"[v0] Error updating subcategory:\", error)\r\n      setError(\"Error al actualizar subcategor√≠a\")\r\n    }\r\n  }\r\n\r\n  async function handleDeleteSubcategory(subcategoryId: string) {\r\n    if (!confirm(\"¬øEst√° seguro de que desea eliminar esta subcategor√≠a?\")) return\r\n\r\n    try {\r\n      await deleteSubcategory(subcategoryId)\r\n      await loadCategories()\r\n      setError(null)\r\n    } catch (error) {\r\n      console.error(\"[v0] Error deleting subcategory:\", error)\r\n      setError(error instanceof Error ? error.message : \"Error al eliminar subcategor√≠a\")\r\n    }\r\n  }\r\n\r\n  async function handleDeleteCategory(id: string) {\r\n    const category = categories.find((c) => c.id === id)\r\n    \r\n    // Verificar si la categor√≠a tiene productos\r\n    if (category && category.productCount && category.productCount > 0) {\r\n      setError(\r\n        `No se puede eliminar la categor√≠a \"${category.name}\" porque contiene ${category.productCount} producto(s). Primero debe eliminar o reasignar los productos de esta categor√≠a.`\r\n      )\r\n      return\r\n    }\r\n\r\n    if (!confirm(\"¬øEst√° seguro de que desea eliminar esta categor√≠a?\")) return\r\n\r\n    try {\r\n      const db = getDb()\r\n      await deleteDoc(doc(db, \"categories\", id))\r\n      setError(null)\r\n      await loadCategories()\r\n    } catch (error) {\r\n      console.error(\"[v0] Error deleting category:\", error)\r\n      setError(\"Error al eliminar la categor√≠a\")\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <h1 className=\"text-3xl font-bold\" style={{ color: \"var(--primary-dark)\" }}>\r\n        Gesti√≥n de Categor√≠as\r\n      </h1>\r\n\r\n      <div className=\"bg-white rounded-lg shadow p-6\">\r\n        <form onSubmit={handleAddCategory} className=\"space-y-4\">\r\n          <h2 className=\"text-xl font-semibold mb-4\" style={{ color: \"var(--primary-dark)\" }}>\r\n            Agregar Nueva Categor√≠a\r\n          </h2>\r\n          <div className=\"flex gap-2\">\r\n            <input\r\n              type=\"text\"\r\n              value={newCategory}\r\n              onChange={(e) => setNewCategory(e.target.value)}\r\n              placeholder=\"Nombre de la categor√≠a\"\r\n              className=\"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 text-black bg-white\"\r\n              style={{ borderColor: \"var(--accent-turquoise)\" }}\r\n            />\r\n            <button\r\n              type=\"submit\"\r\n              className=\"px-6 py-2 text-white rounded-lg font-medium hover:opacity-90 transition-all\"\r\n              style={{ backgroundColor: \"var(--accent-green)\" }}\r\n            >\r\n              Agregar\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n\r\n      {error && (\r\n        <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative\">\r\n          <button\r\n            onClick={() => setError(null)}\r\n            className=\"absolute top-2 right-2 text-red-700 hover:text-red-900\"\r\n          >\r\n            √ó\r\n          </button>\r\n          {error}\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"bg-white rounded-lg shadow overflow-hidden\">\r\n        <div className=\"overflow-x-auto\">\r\n          <table className=\"w-full\">\r\n            <thead style={{ backgroundColor: \"var(--primary-dark)\" }}>\r\n              <tr>\r\n                <th className=\"px-6 py-4 text-left font-semibold text-white\">\r\n                  Nombre\r\n                </th>\r\n                <th className=\"px-6 py-4 text-center font-semibold text-white w-20\">\r\n                  Productos\r\n                </th>\r\n                <th className=\"px-6 py-4 text-right font-semibold text-white\">\r\n                  Acciones\r\n                </th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {categories.map((category) => (\r\n                <React.Fragment key={category.id}>\r\n                  {/* Fila de la categor√≠a */}\r\n                  <tr className=\"border-t border-gray-200 hover:bg-gray-50\">\r\n                    <td className=\"px-6 py-4\">\r\n                      {editingId === category.id ? (\r\n                        <input\r\n                          type=\"text\"\r\n                          value={editingName}\r\n                          onChange={(e) => setEditingName(e.target.value)}\r\n                          className=\"w-full px-3 py-1 border border-gray-300 rounded text-black\"\r\n                        />\r\n                      ) : (\r\n                        <div className=\"flex items-center gap-2\">\r\n                          <button\r\n                            onClick={() => setExpandedCategoryId(expandedCategoryId === category.id ? null : category.id)}\r\n                            className=\"text-gray-500 hover:text-gray-700 px-2\"\r\n                            title={expandedCategoryId === category.id ? \"Contraer\" : \"Expandir\"}\r\n                          >\r\n                            {expandedCategoryId === category.id ? \"‚ñº\" : \"‚ñ∂\"}\r\n                          </button>\r\n                          <span className=\"text-black font-medium\">{category.name}</span>\r\n                        </div>\r\n                      )}\r\n                    </td>\r\n                    <td className=\"px-6 py-4 text-center\">\r\n                      <span className=\"text-black\">{category.productCount || 0}</span>\r\n                    </td>\r\n                    <td className=\"px-6 py-4 text-right flex gap-2 justify-end\">\r\n                      {editingId === category.id ? (\r\n                        <>\r\n                          <button\r\n                            onClick={handleEditCategory}\r\n                            className=\"px-3 py-1 bg-green-500 text-white rounded text-sm hover:bg-green-600 transition-colors\"\r\n                          >\r\n                            Guardar\r\n                          </button>\r\n                          <button\r\n                            onClick={() => {\r\n                              setEditingId(null)\r\n                              setEditingName(\"\")\r\n                            }}\r\n                            className=\"px-3 py-1 bg-gray-400 text-white rounded text-sm hover:bg-gray-500 transition-colors\"\r\n                          >\r\n                            Cancelar\r\n                          </button>\r\n                        </>\r\n                      ) : (\r\n                        <>\r\n                          <button\r\n                            onClick={() => {\r\n                              setEditingId(category.id)\r\n                              setEditingName(category.name)\r\n                            }}\r\n                            className=\"px-3 py-1 bg-blue-500 text-white rounded text-sm hover:bg-blue-600 transition-colors\"\r\n                          >\r\n                            Editar\r\n                          </button>\r\n                          <button\r\n                            onClick={() => handleDeleteCategory(category.id)}\r\n                            disabled={(category.productCount ?? 0) > 0}\r\n                            className={`px-3 py-1 rounded text-sm font-medium transition-all ${\r\n                              (category.productCount ?? 0) > 0\r\n                                ? \"bg-gray-400 text-gray-600 cursor-not-allowed opacity-50\"\r\n                                : \"bg-red-500 text-white hover:bg-red-600\"\r\n                            }`}\r\n                            title={\r\n                              category.productCount && category.productCount > 0\r\n                                ? `No se puede eliminar: contiene ${category.productCount} producto(s)`\r\n                                : \"Eliminar categor√≠a\"\r\n                            }\r\n                          >\r\n                            Eliminar\r\n                          </button>\r\n                        </>\r\n                      )}\r\n                    </td>\r\n                  </tr>\r\n\r\n                  {/* Filas de subcategor√≠as */}\r\n                  {expandedCategoryId === category.id && (\r\n                    <>\r\n                      {/* Formulario para agregar subcategor√≠a */}\r\n                      <tr className=\"bg-gray-50 border-t border-gray-200\">\r\n                        <td colSpan={3} className=\"px-6 py-4\">\r\n                          <div className=\"ml-8 space-y-3\">\r\n                            <h3 className=\"text-sm font-semibold text-gray-700\">Agregar Subcategor√≠a</h3>\r\n                            <div className=\"flex gap-2\">\r\n                              <input\r\n                                type=\"text\"\r\n                                value={newSubcategoryName}\r\n                                onChange={(e) => setNewSubcategoryName(e.target.value)}\r\n                                placeholder=\"Nombre de la subcategor√≠a (ej: Samsung, Apple, etc.)\"\r\n                                className=\"flex-1 px-3 py-2 border border-gray-300 rounded text-black bg-white text-sm\"\r\n                                onKeyPress={(e) => {\r\n                                  if (e.key === \"Enter\") {\r\n                                    handleAddSubcategory(category.id)\r\n                                  }\r\n                                }}\r\n                              />\r\n                              <button\r\n                                onClick={() => handleAddSubcategory(category.id)}\r\n                                className=\"px-4 py-2 bg-green-500 text-white rounded text-sm hover:bg-green-600 transition-colors\"\r\n                              >\r\n                                Agregar\r\n                              </button>\r\n                            </div>\r\n                          </div>\r\n                        </td>\r\n                      </tr>\r\n\r\n                      {/* Lista de subcategor√≠as */}\r\n                      {category.subcategories && category.subcategories.length > 0 ? (\r\n                        category.subcategories.map((subcategory) => (\r\n                          <tr key={subcategory.id} className=\"bg-blue-50 border-t border-gray-200 hover:bg-blue-100\">\r\n                            <td className=\"px-6 py-3 pl-16\">\r\n                              {editingSubcategoryId === subcategory.id ? (\r\n                                <input\r\n                                  type=\"text\"\r\n                                  value={editingSubcategoryName}\r\n                                  onChange={(e) => setEditingSubcategoryName(e.target.value)}\r\n                                  className=\"w-full px-2 py-1 border border-gray-300 rounded text-black text-sm bg-white\"\r\n                                />\r\n                              ) : (\r\n                                <span className=\"text-black text-sm\">{subcategory.name}</span>\r\n                              )}\r\n                            </td>\r\n                            <td className=\"px-6 py-3 text-center\">\r\n                              <span className=\"text-black text-sm\">-</span>\r\n                            </td>\r\n                            <td className=\"px-6 py-3 text-right flex gap-2 justify-end\">\r\n                              {editingSubcategoryId === subcategory.id ? (\r\n                                <>\r\n                                  <button\r\n                                    onClick={handleEditSubcategory}\r\n                                    className=\"px-2 py-1 bg-green-500 text-white rounded text-xs hover:bg-green-600 transition-colors\"\r\n                                  >\r\n                                    Guardar\r\n                                  </button>\r\n                                  <button\r\n                                    onClick={() => {\r\n                                      setEditingSubcategoryId(null)\r\n                                      setEditingSubcategoryName(\"\")\r\n                                    }}\r\n                                    className=\"px-2 py-1 bg-gray-400 text-white rounded text-xs hover:bg-gray-500 transition-colors\"\r\n                                  >\r\n                                    Cancelar\r\n                                  </button>\r\n                                </>\r\n                              ) : (\r\n                                <>\r\n                                  <button\r\n                                    onClick={() => {\r\n                                      setEditingSubcategoryId(subcategory.id)\r\n                                      setEditingSubcategoryName(subcategory.name)\r\n                                    }}\r\n                                    className=\"px-2 py-1 bg-blue-500 text-white rounded text-xs hover:bg-blue-600 transition-colors\"\r\n                                  >\r\n                                    Editar\r\n                                  </button>\r\n                                  <button\r\n                                    onClick={() => handleDeleteSubcategory(subcategory.id)}\r\n                                    className=\"px-2 py-1 bg-red-500 text-white rounded text-xs hover:bg-red-600 transition-colors\"\r\n                                  >\r\n                                    Eliminar\r\n                                  </button>\r\n                                </>\r\n                              )}\r\n                            </td>\r\n                          </tr>\r\n                        ))\r\n                      ) : (\r\n                        <tr className=\"bg-blue-50 border-t border-gray-200\">\r\n                          <td colSpan={3} className=\"px-6 py-3 pl-16 text-gray-500 text-sm\">\r\n                            No hay subcategor√≠as a√∫n\r\n                          </td>\r\n                        </tr>\r\n                      )}\r\n                    </>\r\n                  )}\r\n                </React.Fragment>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        {categories.length === 0 && <div className=\"text-center py-8 text-black\">No hay categor√≠as a√∫n</div>}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AACA;AALA;;;;;;AAgBe,SAAS;IACtB,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAa,EAAE;IAC3D,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAgB;IAC1D,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAgB;IAElD,6BAA6B;IAC7B,MAAM,CAAC,oBAAoB,sBAAsB,GAAG,IAAA,iNAAQ,EAAgB;IAC5E,MAAM,CAAC,oBAAoB,sBAAsB,GAAG,IAAA,iNAAQ,EAAC;IAC7D,MAAM,CAAC,sBAAsB,wBAAwB,GAAG,IAAA,iNAAQ,EAAgB;IAChF,MAAM,CAAC,wBAAwB,0BAA0B,GAAG,IAAA,iNAAQ,EAAC;IAErE,IAAA,kNAAS,EAAC;QACR;IACF,GAAG,EAAE;IAEL,eAAe;QACb,IAAI;YACF,WAAW;YACX,SAAS;YACT,MAAM,KAAK,IAAA,wHAAK;YAChB,MAAM,WAAW,MAAM,IAAA,4KAAO,EAAC,IAAA,+KAAU,EAAC,IAAI;YAC9C,MAAM,OAAO,MAAM,QAAQ,GAAG,CAC5B,SAAS,IAAI,CAAC,GAAG,CAAC,OAAO;gBACvB,MAAM,eAAe,IAAI,IAAI,GAAG,IAAI;gBACpC,gEAAgE;gBAChE,IAAI,eAAe;gBACnB,IAAI,cAAc;oBAChB,MAAM,gBAAgB,IAAA,0KAAK,EAAC,IAAA,+KAAU,EAAC,IAAI,aAAa,IAAA,0KAAK,EAAC,YAAY,MAAM;oBAChF,MAAM,mBAAmB,MAAM,IAAA,4KAAO,EAAC;oBACvC,eAAe,iBAAiB,IAAI;gBACtC;gBAEA,uBAAuB;gBACvB,MAAM,gBAAgB,MAAM,IAAA,kJAA0B,EAAC,IAAI,EAAE;gBAE7D,OAAO;oBACL,IAAI,IAAI,EAAE;oBACV,MAAM;oBACN,cAAc;oBACd,eAAe;oBACf,mBAAmB;gBACrB;YACF;YAEF,cAAc;QAChB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,kCAAkC;YAChD,SAAS;QACX,SAAU;YACR,WAAW;QACb;IACF;IAEA,eAAe,kBAAkB,CAAkB;QACjD,EAAE,cAAc;QAChB,IAAI,CAAC,YAAY,IAAI,IAAI;QAEzB,IAAI;YACF,MAAM,KAAK,IAAA,wHAAK;YAChB,MAAM,IAAA,2KAAM,EAAC,IAAA,+KAAU,EAAC,IAAI,eAAe;gBAAE,MAAM;YAAY;YAC/D,eAAe;YACf,MAAM;QACR,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,+BAA+B;YAC7C,SAAS;QACX;IACF;IAEA,eAAe;QACb,IAAI,CAAC,aAAa,CAAC,YAAY,IAAI,IAAI;QAEvC,IAAI;YACF,MAAM,KAAK,IAAA,wHAAK;YAChB,MAAM,IAAA,8KAAS,EAAC,IAAA,wKAAG,EAAC,IAAI,cAAc,YAAY;gBAAE,MAAM;YAAY;YACtE,aAAa;YACb,eAAe;YACf,MAAM;QACR,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,iCAAiC;YAC/C,SAAS;QACX;IACF;IAEA,eAAe,qBAAqB,UAAkB;QACpD,IAAI,CAAC,mBAAmB,IAAI,IAAI;QAEhC,IAAI;YACF,MAAM,IAAA,sIAAc,EAAC,YAAY;YACjC,sBAAsB;YACtB,MAAM;YACN,SAAS;QACX,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,kCAAkC;YAChD,SAAS;QACX;IACF;IAEA,eAAe;QACb,IAAI,CAAC,wBAAwB,CAAC,uBAAuB,IAAI,IAAI;QAE7D,IAAI;YACF,MAAM,IAAA,yIAAiB,EAAC,sBAAsB;YAC9C,wBAAwB;YACxB,0BAA0B;YAC1B,MAAM;YACN,SAAS;QACX,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,oCAAoC;YAClD,SAAS;QACX;IACF;IAEA,eAAe,wBAAwB,aAAqB;QAC1D,IAAI,CAAC,QAAQ,0DAA0D;QAEvE,IAAI;YACF,MAAM,IAAA,yIAAiB,EAAC;YACxB,MAAM;YACN,SAAS;QACX,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,oCAAoC;YAClD,SAAS,iBAAiB,QAAQ,MAAM,OAAO,GAAG;QACpD;IACF;IAEA,eAAe,qBAAqB,EAAU;QAC5C,MAAM,WAAW,WAAW,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;QAEjD,4CAA4C;QAC5C,IAAI,YAAY,SAAS,YAAY,IAAI,SAAS,YAAY,GAAG,GAAG;YAClE,SACE,CAAC,mCAAmC,EAAE,SAAS,IAAI,CAAC,kBAAkB,EAAE,SAAS,YAAY,CAAC,gFAAgF,CAAC;YAEjL;QACF;QAEA,IAAI,CAAC,QAAQ,uDAAuD;QAEpE,IAAI;YACF,MAAM,KAAK,IAAA,wHAAK;YAChB,MAAM,IAAA,8KAAS,EAAC,IAAA,wKAAG,EAAC,IAAI,cAAc;YACtC,SAAS;YACT,MAAM;QACR,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,iCAAiC;YAC/C,SAAS;QACX;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;gBAAqB,OAAO;oBAAE,OAAO;gBAAsB;0BAAG;;;;;;0BAI5E,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAK,UAAU;oBAAmB,WAAU;;sCAC3C,8OAAC;4BAAG,WAAU;4BAA6B,OAAO;gCAAE,OAAO;4BAAsB;sCAAG;;;;;;sCAGpF,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCACC,MAAK;oCACL,OAAO;oCACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;oCAC9C,aAAY;oCACZ,WAAU;oCACV,OAAO;wCAAE,aAAa;oCAA0B;;;;;;8CAElD,8OAAC;oCACC,MAAK;oCACL,WAAU;oCACV,OAAO;wCAAE,iBAAiB;oCAAsB;8CACjD;;;;;;;;;;;;;;;;;;;;;;;YAON,uBACC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBACC,SAAS,IAAM,SAAS;wBACxB,WAAU;kCACX;;;;;;oBAGA;;;;;;;0BAIL,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BAAM,WAAU;;8CACf,8OAAC;oCAAM,OAAO;wCAAE,iBAAiB;oCAAsB;8CACrD,cAAA,8OAAC;;0DACC,8OAAC;gDAAG,WAAU;0DAA+C;;;;;;0DAG7D,8OAAC;gDAAG,WAAU;0DAAsD;;;;;;0DAGpE,8OAAC;gDAAG,WAAU;0DAAgD;;;;;;;;;;;;;;;;;8CAKlE,8OAAC;8CACE,WAAW,GAAG,CAAC,CAAC,yBACf,8OAAC,gNAAK,CAAC,QAAQ;;8DAEb,8OAAC;oDAAG,WAAU;;sEACZ,8OAAC;4DAAG,WAAU;sEACX,cAAc,SAAS,EAAE,iBACxB,8OAAC;gEACC,MAAK;gEACL,OAAO;gEACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;gEAC9C,WAAU;;;;;qFAGZ,8OAAC;gEAAI,WAAU;;kFACb,8OAAC;wEACC,SAAS,IAAM,sBAAsB,uBAAuB,SAAS,EAAE,GAAG,OAAO,SAAS,EAAE;wEAC5F,WAAU;wEACV,OAAO,uBAAuB,SAAS,EAAE,GAAG,aAAa;kFAExD,uBAAuB,SAAS,EAAE,GAAG,MAAM;;;;;;kFAE9C,8OAAC;wEAAK,WAAU;kFAA0B,SAAS,IAAI;;;;;;;;;;;;;;;;;sEAI7D,8OAAC;4DAAG,WAAU;sEACZ,cAAA,8OAAC;gEAAK,WAAU;0EAAc,SAAS,YAAY,IAAI;;;;;;;;;;;sEAEzD,8OAAC;4DAAG,WAAU;sEACX,cAAc,SAAS,EAAE,iBACxB;;kFACE,8OAAC;wEACC,SAAS;wEACT,WAAU;kFACX;;;;;;kFAGD,8OAAC;wEACC,SAAS;4EACP,aAAa;4EACb,eAAe;wEACjB;wEACA,WAAU;kFACX;;;;;;;6FAKH;;kFACE,8OAAC;wEACC,SAAS;4EACP,aAAa,SAAS,EAAE;4EACxB,eAAe,SAAS,IAAI;wEAC9B;wEACA,WAAU;kFACX;;;;;;kFAGD,8OAAC;wEACC,SAAS,IAAM,qBAAqB,SAAS,EAAE;wEAC/C,UAAU,CAAC,SAAS,YAAY,IAAI,CAAC,IAAI;wEACzC,WAAW,CAAC,qDAAqD,EAC/D,CAAC,SAAS,YAAY,IAAI,CAAC,IAAI,IAC3B,4DACA,0CACJ;wEACF,OACE,SAAS,YAAY,IAAI,SAAS,YAAY,GAAG,IAC7C,CAAC,+BAA+B,EAAE,SAAS,YAAY,CAAC,YAAY,CAAC,GACrE;kFAEP;;;;;;;;;;;;;;;;;;;gDASR,uBAAuB,SAAS,EAAE,kBACjC;;sEAEE,8OAAC;4DAAG,WAAU;sEACZ,cAAA,8OAAC;gEAAG,SAAS;gEAAG,WAAU;0EACxB,cAAA,8OAAC;oEAAI,WAAU;;sFACb,8OAAC;4EAAG,WAAU;sFAAsC;;;;;;sFACpD,8OAAC;4EAAI,WAAU;;8FACb,8OAAC;oFACC,MAAK;oFACL,OAAO;oFACP,UAAU,CAAC,IAAM,sBAAsB,EAAE,MAAM,CAAC,KAAK;oFACrD,aAAY;oFACZ,WAAU;oFACV,YAAY,CAAC;wFACX,IAAI,EAAE,GAAG,KAAK,SAAS;4FACrB,qBAAqB,SAAS,EAAE;wFAClC;oFACF;;;;;;8FAEF,8OAAC;oFACC,SAAS,IAAM,qBAAqB,SAAS,EAAE;oFAC/C,WAAU;8FACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;wDASR,SAAS,aAAa,IAAI,SAAS,aAAa,CAAC,MAAM,GAAG,IACzD,SAAS,aAAa,CAAC,GAAG,CAAC,CAAC,4BAC1B,8OAAC;gEAAwB,WAAU;;kFACjC,8OAAC;wEAAG,WAAU;kFACX,yBAAyB,YAAY,EAAE,iBACtC,8OAAC;4EACC,MAAK;4EACL,OAAO;4EACP,UAAU,CAAC,IAAM,0BAA0B,EAAE,MAAM,CAAC,KAAK;4EACzD,WAAU;;;;;iGAGZ,8OAAC;4EAAK,WAAU;sFAAsB,YAAY,IAAI;;;;;;;;;;;kFAG1D,8OAAC;wEAAG,WAAU;kFACZ,cAAA,8OAAC;4EAAK,WAAU;sFAAqB;;;;;;;;;;;kFAEvC,8OAAC;wEAAG,WAAU;kFACX,yBAAyB,YAAY,EAAE,iBACtC;;8FACE,8OAAC;oFACC,SAAS;oFACT,WAAU;8FACX;;;;;;8FAGD,8OAAC;oFACC,SAAS;wFACP,wBAAwB;wFACxB,0BAA0B;oFAC5B;oFACA,WAAU;8FACX;;;;;;;yGAKH;;8FACE,8OAAC;oFACC,SAAS;wFACP,wBAAwB,YAAY,EAAE;wFACtC,0BAA0B,YAAY,IAAI;oFAC5C;oFACA,WAAU;8FACX;;;;;;8FAGD,8OAAC;oFACC,SAAS,IAAM,wBAAwB,YAAY,EAAE;oFACrD,WAAU;8FACX;;;;;;;;;;;;;;+DAjDA,YAAY,EAAE;;;;sFA0DzB,8OAAC;4DAAG,WAAU;sEACZ,cAAA,8OAAC;gEAAG,SAAS;gEAAG,WAAU;0EAAwC;;;;;;;;;;;;;;2CA5KvD,SAAS,EAAE;;;;;;;;;;;;;;;;;;;;;oBAwLvC,WAAW,MAAM,KAAK,mBAAK,8OAAC;wBAAI,WAAU;kCAA8B;;;;;;;;;;;;;;;;;;AAIjF","debugId":null}},
    {"offset": {"line": 1484, "column": 0}, "map": {"version":3,"sources":["file:///D:/ubatech/lib/format-price.ts"],"sourcesContent":["/**\r\n * Asegura que el precio sea un n√∫mero v√°lido\r\n * Si es string, intenta convertirlo, si no es v√°lido retorna 0\r\n * Maneja correctamente: \"6000\", \"6.000\", \"1.234.567\", \"299.99\", etc.\r\n */\r\nexport function ensureNumberPrice(price: any): number {\r\n  if (typeof price === 'number') {\r\n    return Math.round(price * 100) / 100; // Redondea a 2 decimales\r\n  }\r\n  \r\n  if (typeof price === 'string') {\r\n    // Usar la misma l√≥gica que sanitizePriceInput para consistencia\r\n    if (!price || price.trim() === '') {\r\n      return 0;\r\n    }\r\n    \r\n    let cleaned = price.trim();\r\n    \r\n    // Si contiene puntos, asumir que podr√≠an ser separadores de miles\r\n    if (cleaned.includes('.')) {\r\n      const dotCount = (cleaned.match(/\\./g) || []).length;\r\n      \r\n      // Si hay m√∫ltiples puntos O un punto en los √∫ltimos 3 caracteres = separador de miles\r\n      if (dotCount > 1 || (dotCount === 1 && cleaned.lastIndexOf('.') > cleaned.length - 4)) {\r\n        cleaned = cleaned.replace(/\\./g, '');\r\n      } else {\r\n        // Un punto pero no al final = separador decimal\r\n        cleaned = cleaned.replace(',', '.');\r\n      }\r\n    }\r\n    \r\n    // Reemplazar coma por punto para decimales\r\n    cleaned = cleaned.replace(',', '.');\r\n    \r\n    // Asegurar que solo haya un punto decimal\r\n    const parts = cleaned.split('.');\r\n    if (parts.length > 2) {\r\n      cleaned = parts[0] + '.' + parts.slice(1).join('');\r\n    }\r\n    \r\n    const parsed = parseFloat(cleaned);\r\n    return isNaN(parsed) ? 0 : Math.round(parsed * 100) / 100;\r\n  }\r\n  \r\n  return 0;\r\n}\r\n\r\n/**\r\n * Formatea un precio para mostrar con separadores de miles (puntos)\r\n * Ejemplo: 3000 -> \"3.000\"\r\n *          1560000 -> \"1.560.000\"\r\n *          49.99 -> \"49.99\"\r\n */\r\nexport function formatPrice(price: number | string): string {\r\n  const numPrice = ensureNumberPrice(price);\r\n  \r\n  // Convertir a string y aplicar separadores de miles manualmente\r\n  const parts = numPrice.toString().split('.');\r\n  const integerPart = parts[0];\r\n  const decimalPart = parts[1];\r\n  \r\n  // Agregar puntos cada 3 d√≠gitos en la parte entera (de derecha a izquierda)\r\n  const withSeparators = integerPart.replace(/\\B(?=(\\d{3})+(?!\\d))/g, '.');\r\n  \r\n  // Recombinar con la parte decimal si existe\r\n  return decimalPart ? `${withSeparators},${decimalPart}` : withSeparators;\r\n}\r\n\r\n/**\r\n * Formatea un precio con s√≠mbolo de moneda\r\n * Ejemplo: 3000 -> \"$3.000\"\r\n */\r\nexport function formatPriceWithCurrency(price: number | string, currency: string = \"$\"): string {\r\n  return `${currency}${formatPrice(price)}`;\r\n}\r\n\r\n/**\r\n * Sanitiza entrada de precio para evitar caracteres inv√°lidos\r\n * Acepta tanto \"6000\" como \"6.000\" y convierte correctamente\r\n * Convierte \"1.234.567\" a \"1234567\" antes de guardar en BD\r\n */\r\nexport function sanitizePriceInput(priceString: string): number {\r\n  if (!priceString || priceString.trim() === '') {\r\n    return 0;\r\n  }\r\n  \r\n  // Eliminar espacios\r\n  let cleaned = priceString.trim();\r\n  \r\n  // Si contiene puntos, asumir que podr√≠an ser separadores de miles\r\n  // Ejemplo: \"1.234.567\" o \"6.000\" \r\n  if (cleaned.includes('.')) {\r\n    // Contar los puntos\r\n    const dotCount = (cleaned.match(/\\./g) || []).length;\r\n    \r\n    // Si hay m√∫ltiples puntos, probablemente sean separadores de miles\r\n    if (dotCount > 1 || (dotCount === 1 && cleaned.lastIndexOf('.') > cleaned.length - 4)) {\r\n      // M√∫ltiples puntos O un punto en los √∫ltimos 3 caracteres = separador de miles\r\n      cleaned = cleaned.replace(/\\./g, '');\r\n    } else {\r\n      // Un punto pero no al final = separador decimal, reemplazar coma si existe\r\n      cleaned = cleaned.replace(',', '.');\r\n    }\r\n  }\r\n  \r\n  // Reemplazar coma por punto para decimales\r\n  cleaned = cleaned.replace(',', '.');\r\n  \r\n  // Asegurar que solo haya un punto decimal\r\n  const parts = cleaned.split('.');\r\n  if (parts.length > 2) {\r\n    // Si hay m√∫ltiples puntos despu√©s del reemplazo, solo tomar la parte entera y la primera decimal\r\n    cleaned = parts[0] + '.' + parts.slice(1).join('');\r\n  }\r\n  \r\n  const parsed = parseFloat(cleaned);\r\n  return isNaN(parsed) ? 0 : Math.round(parsed * 100) / 100;\r\n}\r\n\r\n/**\r\n * Normaliza los precios de un producto cargado desde Firestore\r\n * Asegura que el precio sea siempre un n√∫mero, no un string\r\n * @param product Producto desde Firestore (puede tener precio como string o n√∫mero)\r\n * @returns Producto con precio garantizado como n√∫mero\r\n */\r\nexport function normalizeProductPrice(product: any): any {\r\n  return {\r\n    ...product,\r\n    price: ensureNumberPrice(product.price)\r\n  };\r\n}\r\n"],"names":[],"mappings":"AAAA;;;;CAIC;;;;;;;;;;;;AACM,SAAS,kBAAkB,KAAU;IAC1C,IAAI,OAAO,UAAU,UAAU;QAC7B,OAAO,KAAK,KAAK,CAAC,QAAQ,OAAO,KAAK,yBAAyB;IACjE;IAEA,IAAI,OAAO,UAAU,UAAU;QAC7B,gEAAgE;QAChE,IAAI,CAAC,SAAS,MAAM,IAAI,OAAO,IAAI;YACjC,OAAO;QACT;QAEA,IAAI,UAAU,MAAM,IAAI;QAExB,kEAAkE;QAClE,IAAI,QAAQ,QAAQ,CAAC,MAAM;YACzB,MAAM,WAAW,CAAC,QAAQ,KAAK,CAAC,UAAU,EAAE,EAAE,MAAM;YAEpD,sFAAsF;YACtF,IAAI,WAAW,KAAM,aAAa,KAAK,QAAQ,WAAW,CAAC,OAAO,QAAQ,MAAM,GAAG,GAAI;gBACrF,UAAU,QAAQ,OAAO,CAAC,OAAO;YACnC,OAAO;gBACL,gDAAgD;gBAChD,UAAU,QAAQ,OAAO,CAAC,KAAK;YACjC;QACF;QAEA,2CAA2C;QAC3C,UAAU,QAAQ,OAAO,CAAC,KAAK;QAE/B,0CAA0C;QAC1C,MAAM,QAAQ,QAAQ,KAAK,CAAC;QAC5B,IAAI,MAAM,MAAM,GAAG,GAAG;YACpB,UAAU,KAAK,CAAC,EAAE,GAAG,MAAM,MAAM,KAAK,CAAC,GAAG,IAAI,CAAC;QACjD;QAEA,MAAM,SAAS,WAAW;QAC1B,OAAO,MAAM,UAAU,IAAI,KAAK,KAAK,CAAC,SAAS,OAAO;IACxD;IAEA,OAAO;AACT;AAQO,SAAS,YAAY,KAAsB;IAChD,MAAM,WAAW,kBAAkB;IAEnC,gEAAgE;IAChE,MAAM,QAAQ,SAAS,QAAQ,GAAG,KAAK,CAAC;IACxC,MAAM,cAAc,KAAK,CAAC,EAAE;IAC5B,MAAM,cAAc,KAAK,CAAC,EAAE;IAE5B,4EAA4E;IAC5E,MAAM,iBAAiB,YAAY,OAAO,CAAC,yBAAyB;IAEpE,4CAA4C;IAC5C,OAAO,cAAc,GAAG,eAAe,CAAC,EAAE,aAAa,GAAG;AAC5D;AAMO,SAAS,wBAAwB,KAAsB,EAAE,WAAmB,GAAG;IACpF,OAAO,GAAG,WAAW,YAAY,QAAQ;AAC3C;AAOO,SAAS,mBAAmB,WAAmB;IACpD,IAAI,CAAC,eAAe,YAAY,IAAI,OAAO,IAAI;QAC7C,OAAO;IACT;IAEA,oBAAoB;IACpB,IAAI,UAAU,YAAY,IAAI;IAE9B,kEAAkE;IAClE,kCAAkC;IAClC,IAAI,QAAQ,QAAQ,CAAC,MAAM;QACzB,oBAAoB;QACpB,MAAM,WAAW,CAAC,QAAQ,KAAK,CAAC,UAAU,EAAE,EAAE,MAAM;QAEpD,mEAAmE;QACnE,IAAI,WAAW,KAAM,aAAa,KAAK,QAAQ,WAAW,CAAC,OAAO,QAAQ,MAAM,GAAG,GAAI;YACrF,+EAA+E;YAC/E,UAAU,QAAQ,OAAO,CAAC,OAAO;QACnC,OAAO;YACL,2EAA2E;YAC3E,UAAU,QAAQ,OAAO,CAAC,KAAK;QACjC;IACF;IAEA,2CAA2C;IAC3C,UAAU,QAAQ,OAAO,CAAC,KAAK;IAE/B,0CAA0C;IAC1C,MAAM,QAAQ,QAAQ,KAAK,CAAC;IAC5B,IAAI,MAAM,MAAM,GAAG,GAAG;QACpB,iGAAiG;QACjG,UAAU,KAAK,CAAC,EAAE,GAAG,MAAM,MAAM,KAAK,CAAC,GAAG,IAAI,CAAC;IACjD;IAEA,MAAM,SAAS,WAAW;IAC1B,OAAO,MAAM,UAAU,IAAI,KAAK,KAAK,CAAC,SAAS,OAAO;AACxD;AAQO,SAAS,sBAAsB,OAAY;IAChD,OAAO;QACL,GAAG,OAAO;QACV,OAAO,kBAAkB,QAAQ,KAAK;IACxC;AACF","debugId":null}},
    {"offset": {"line": 1588, "column": 0}, "map": {"version":3,"sources":["file:///D:/ubatech/components/admin/product-form.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport type React from \"react\"\r\n\r\nimport { useState, useEffect } from \"react\"\r\nimport type { Product, Subcategory } from \"@/types\"\r\nimport { getSubcategoriesByCategory } from \"@/lib/subcategories\"\r\nimport { getDb } from \"@/lib/firebase\"\r\nimport { getDocs, collection, query, where } from \"firebase/firestore\"\r\nimport { formatPrice, ensureNumberPrice, sanitizePriceInput } from \"@/lib/format-price\"\r\n\r\ninterface ProductFormProps {\r\n  product: Product | null\r\n  categories?: string[]\r\n  onSave: (product: Omit<Product, \"id\">) => void\r\n  onCancel: () => void\r\n}\r\n\r\ninterface CategoryData {\r\n  id: string\r\n  name: string\r\n}\r\n\r\n// Constante para el l√≠mite de tama√±o de imagen en bytes (1MB - L√≠mite de Firestore)\r\nconst MAX_IMAGE_SIZE = 1 * 1024 * 1024; // 1MB\r\n\r\nexport default function ProductForm({ product, categories, onSave, onCancel }: ProductFormProps) {\r\n  const [formData, setFormData] = useState({\r\n    name: product?.name || \"\",\r\n    description: product?.description || \"\",\r\n    price: product?.price || 0,\r\n    category: product?.category || \"\",\r\n    subcategory: product?.subcategory || \"\",\r\n    stock: product?.stock || 0,\r\n    image: product?.image || \"\",\r\n    sku: product?.sku || \"\",\r\n    details: product?.details || \"\",\r\n  })\r\n  const [imagePreview, setImagePreview] = useState<string>(product?.image || \"\")\r\n  const [loading, setLoading] = useState(false)\r\n  const [loadingCategories, setLoadingCategories] = useState(true)\r\n  const [categoryError, setCategoryError] = useState<string | null>(null)\r\n  const [subcategories, setSubcategories] = useState<Subcategory[]>([])\r\n  const [categoriesData, setCategoriesData] = useState<CategoryData[]>([])\r\n  const [imageInputFocus, setImageInputFocus] = useState(false)\r\n  const [pasteMessage, setPasteMessage] = useState<string | null>(null)\r\n  const [imageError, setImageError] = useState<string | null>(null)\r\n  const [imageLoadSuccess, setImageLoadSuccess] = useState(false)\r\n  const [saveError, setSaveError] = useState<string | null>(null)\r\n\r\n  // Cargar datos de categor√≠as y subcategor√≠as\r\n  useEffect(() => {\r\n    loadCategoriesData()\r\n  }, [])\r\n\r\n  // Una vez que se carguen las categor√≠as, si estamos editando, necesitamos convertir el nombre a ID\r\n  useEffect(() => {\r\n    if (!loadingCategories && product?.category && categoriesData.length > 0) {\r\n      // Si formData.category es un nombre (porque vino del producto existente), convertirlo a ID\r\n      // Primero verificamos si el formData.category es realmente un ID o un nombre\r\n      const isId = categoriesData.some(cat => cat.id === formData.category)\r\n      if (!isId) {\r\n        // Es un nombre, buscar el ID correspondiente\r\n        const categoryDoc = categoriesData.find(cat => cat.name === product.category)\r\n        if (categoryDoc) {\r\n          setFormData(prev => ({ ...prev, category: categoryDoc.id }))\r\n        }\r\n      }\r\n    }\r\n  }, [loadingCategories, categoriesData, product?.category])\r\n\r\n  // Cargar subcategor√≠as cuando cambia la categor√≠a\r\n  useEffect(() => {\r\n    if (formData.category) {\r\n      // formData.category contiene el ID de la categor√≠a\r\n      loadSubcategories(formData.category)\r\n    } else {\r\n      setSubcategories([])\r\n    }\r\n  }, [formData.category])\r\n\r\n  async function loadCategoriesData() {\r\n    try {\r\n      setCategoryError(null)\r\n      setLoadingCategories(true)\r\n      const db = getDb()\r\n      const snapshot = await getDocs(collection(db, \"categories\"))\r\n      if (snapshot.empty) {\r\n        setCategoryError(\"No hay categor√≠as disponibles. Crea una primero.\")\r\n        console.warn(\"[v0] No categories found in Firestore\")\r\n      }\r\n      const cats = snapshot.docs.map((doc) => ({\r\n        id: doc.id,\r\n        name: doc.data().name || \"Sin nombre\",\r\n      }))\r\n      setCategoriesData(cats)\r\n    } catch (error) {\r\n      console.error(\"[v0] Error loading categories:\", error)\r\n      setCategoryError(error instanceof Error ? error.message : \"Error al cargar categor√≠as\")\r\n      setCategoriesData([])\r\n    } finally {\r\n      setLoadingCategories(false)\r\n    }\r\n  }\r\n\r\n  async function loadSubcategories(categoryId: string) {\r\n    try {\r\n      // Validar que categoryId no est√© vac√≠o o undefined\r\n      if (!categoryId || !categoryId.trim()) {\r\n        setSubcategories([])\r\n        return\r\n      }\r\n\r\n      // Usar directamente el ID de la categor√≠a\r\n      const subs = await getSubcategoriesByCategory(categoryId)\r\n      setSubcategories(subs)\r\n    } catch (error) {\r\n      console.error(\"[v0] Error loading subcategories:\", error)\r\n      setSubcategories([])\r\n    }\r\n  }\r\n\r\n  function handleChange(e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>) {\r\n    const { name, value } = e.target\r\n    \r\n    if (name === \"price\" || name === \"stock\") {\r\n      if (name === \"price\") {\r\n        // Para el precio, usar sanitizePriceInput para limpiar puntos de mil\r\n        // permitir que el usuario digite con puntos de mil y se conviertan correctamente\r\n        const numValue = sanitizePriceInput(value);\r\n        setFormData((prev) => ({\r\n          ...prev,\r\n          [name]: numValue,\r\n        }))\r\n      } else {\r\n        // Para stock, convertir a n√∫mero entero\r\n        const numValue = parseFloat(value);\r\n        const finalValue = isNaN(numValue) ? 0 : Math.floor(numValue);\r\n        setFormData((prev) => ({\r\n          ...prev,\r\n          [name]: finalValue,\r\n        }))\r\n      }\r\n    } else {\r\n      setFormData((prev) => ({\r\n        ...prev,\r\n        [name]: value,\r\n      }))\r\n    }\r\n  }\r\n\r\n  function handleImageChange(e: React.ChangeEvent<HTMLInputElement>) {\r\n    const file = e.target.files?.[0]\r\n    if (file) {\r\n      // Validar tama√±o de archivo\r\n      if (file.size > MAX_IMAGE_SIZE) {\r\n        const sizeMB = (file.size / (1024 * 1024)).toFixed(2)\r\n        const limitMB = (MAX_IMAGE_SIZE / (1024 * 1024)).toFixed(2)\r\n        const errorMsg = `‚ö†Ô∏è Cambiar imagen: El archivo es demasiado grande (${sizeMB}MB). El l√≠mite m√°ximo es ${limitMB}MB. Selecciona una imagen m√°s peque√±a o de menor resoluci√≥n.`\r\n        setImageError(errorMsg)\r\n        setImagePreview(\"\")\r\n        setFormData((prev) => ({ ...prev, image: \"\" }))\r\n        setImageLoadSuccess(false)\r\n        setPasteMessage(null)\r\n        return\r\n      }\r\n\r\n      const reader = new FileReader()\r\n      reader.onload = (event) => {\r\n        const result = event.target?.result as string\r\n        setImagePreview(result)\r\n        setFormData((prev) => ({ ...prev, image: result }))\r\n        setImageError(null)\r\n        setImageLoadSuccess(true)\r\n        setPasteMessage(null)\r\n        // Mostrar mensaje de √©xito por 3 segundos\r\n        setTimeout(() => setImageLoadSuccess(false), 3000)\r\n      }\r\n      reader.readAsDataURL(file)\r\n    }\r\n  }\r\n\r\n  function handleImagePaste(e: React.ClipboardEvent<HTMLDivElement>) {\r\n    const items = e.clipboardData?.items\r\n    if (!items) return\r\n\r\n    // Buscar una imagen en los elementos del portapapeles\r\n    for (let i = 0; i < items.length; i++) {\r\n      if (items[i].type.indexOf(\"image\") !== -1) {\r\n        e.preventDefault()\r\n        const file = items[i].getAsFile()\r\n        if (file) {\r\n          // Validar tama√±o de archivo\r\n          if (file.size > MAX_IMAGE_SIZE) {\r\n            const sizeMB = (file.size / (1024 * 1024)).toFixed(2)\r\n            const limitMB = (MAX_IMAGE_SIZE / (1024 * 1024)).toFixed(2)\r\n            const errorMsg = `‚ö†Ô∏è Cambiar imagen: El archivo es demasiado grande (${sizeMB}MB). El l√≠mite m√°ximo es ${limitMB}MB. Selecciona una imagen m√°s peque√±a o de menor resoluci√≥n.`\r\n            setImageError(errorMsg)\r\n            setImagePreview(\"\")\r\n            setFormData((prev) => ({ ...prev, image: \"\" }))\r\n            setImageLoadSuccess(false)\r\n            setPasteMessage(null)\r\n            return\r\n          }\r\n\r\n          const reader = new FileReader()\r\n          reader.onload = (event) => {\r\n            const result = event.target?.result as string\r\n            setImagePreview(result)\r\n            setFormData((prev) => ({ ...prev, image: result }))\r\n            setPasteMessage(\"‚úì Imagen pegada correctamente\")\r\n            setImageError(null)\r\n            setImageLoadSuccess(true)\r\n            // Limpiar mensaje despu√©s de 3 segundos\r\n            setTimeout(() => {\r\n              setPasteMessage(null)\r\n              setImageLoadSuccess(false)\r\n            }, 3000)\r\n          }\r\n          reader.readAsDataURL(file)\r\n        }\r\n        break\r\n      }\r\n    }\r\n  }\r\n\r\n  async function handleSubmit(e: React.FormEvent) {\r\n    e.preventDefault()\r\n    setLoading(true)\r\n    setSaveError(null)\r\n    try {\r\n      // Validaci√≥n de tama√±o de imagen en base64 ANTES de guardar\r\n      if (formData.image) {\r\n        const imageSizeBytes = formData.image.length\r\n        const MAX_BASE64_SIZE = 1048487 // bytes\r\n        \r\n        if (imageSizeBytes > MAX_BASE64_SIZE) {\r\n          const sizeMB = (imageSizeBytes / (1024 * 1024)).toFixed(2)\r\n          const limitMB = (MAX_BASE64_SIZE / (1024 * 1024)).toFixed(2)\r\n          setSaveError(`‚ö†Ô∏è Cambiar imagen: La imagen en base64 supera el l√≠mite m√°ximo permitido (${limitMB}MB). Tama√±o actual: ${sizeMB}MB. Por favor, selecciona una imagen m√°s peque√±a o de menor resoluci√≥n.`)\r\n          setLoading(false)\r\n          return\r\n        }\r\n      }\r\n\r\n      // Asegurar que el precio se guarde como un n√∫mero v√°lido con m√°ximo 2 decimales\r\n      const dataToSave = {\r\n        ...formData,\r\n        price: Math.round(formData.price * 100) / 100, // Redondea a 2 decimales\r\n        stock: Math.floor(formData.stock), // Stock debe ser un entero\r\n      }\r\n      onSave(dataToSave)\r\n    } catch (error) {\r\n      const errorMsg = error instanceof Error ? error.message : String(error)\r\n      \r\n      // Detectar error de tama√±o de imagen\r\n      if (errorMsg.includes(\"1048487\") || errorMsg.includes(\"image\") || errorMsg.includes(\"longer than\")) {\r\n        setSaveError(`‚ö†Ô∏è Error al guardar: La imagen supera el l√≠mite m√°ximo permitido (1MB). Por favor, cambia la imagen por una m√°s peque√±a.`)\r\n        console.error(\"[ProductForm] Image size error:\", errorMsg)\r\n      } else {\r\n        setSaveError(`Error al guardar el producto: ${errorMsg}`)\r\n        console.error(\"[ProductForm] Save error:\", error)\r\n      }\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\r\n      <div className=\"bg-white rounded-lg shadow-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\r\n        <div className=\"p-6 space-y-4\">\r\n          <h2 className=\"text-2xl font-bold text-black\" style={{ color: \"var(--primary)\" }}>\r\n            {product ? \"Editar Producto\" : \"Nuevo Producto\"}\r\n          </h2>\r\n\r\n          {/* Mostrar error si no hay categor√≠as */}\r\n          {categoryError && (\r\n            <div className=\"p-4 bg-red-100 border border-red-400 text-red-700 rounded\">\r\n              ‚ö†Ô∏è {categoryError}\r\n            </div>\r\n          )}\r\n\r\n          {/* Mostrar estado de carga */}\r\n          {loadingCategories && (\r\n            <div className=\"p-4 bg-blue-100 border border-blue-400 text-blue-700 rounded\">\r\n              ‚è≥ Cargando categor√≠as...\r\n            </div>\r\n          )}\r\n\r\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium mb-2 text-black\" style={{ color: \"var(--primary)\" }}>\r\n                Nombre\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                name=\"name\"\r\n                value={formData.name}\r\n                onChange={handleChange}\r\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 text-black bg-white\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium mb-2 text-black\" style={{ color: \"var(--primary)\" }}>\r\n                Descripci√≥n\r\n              </label>\r\n              <textarea\r\n                name=\"description\"\r\n                value={formData.description}\r\n                onChange={handleChange}\r\n                rows={3}\r\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 text-black bg-white\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-2 text-black\" style={{ color: \"var(--primary)\" }}>\r\n                  Precio\r\n                </label>\r\n                <div>\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"price\"\r\n                    value={formData.price > 0 ? String(formData.price) : \"\"}\r\n                    onChange={handleChange}\r\n                    placeholder=\"Ej: 6000 o 6.000\"\r\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 text-black bg-white\"\r\n                    required\r\n                  />\r\n                  {formData.price > 0 && (\r\n                    <p className=\"text-xs text-gray-500 mt-1\" style={{ color: \"var(--accent-green)\" }}>\r\n                      ‚úì Mostrar√° como: ${formatPrice(formData.price)}\r\n                    </p>\r\n                  )}\r\n                </div>\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-2 text-black\" style={{ color: \"var(--primary)\" }}>\r\n                  Stock\r\n                </label>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"stock\"\r\n                  value={formData.stock}\r\n                  onChange={handleChange}\r\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 text-black bg-white\"\r\n                  required\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium mb-2 text-black\" style={{ color: \"var(--primary)\" }}>\r\n                SKU (C√≥digo Interno)\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                name=\"sku\"\r\n                value={formData.sku}\r\n                onChange={handleChange}\r\n                placeholder=\"Ej: SKU-001, PRD-2024-001\"\r\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 text-black bg-white\"\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium mb-2 text-black\" style={{ color: \"var(--primary)\" }}>\r\n                Detalles Adicionales\r\n              </label>\r\n              <textarea\r\n                name=\"details\"\r\n                value={formData.details}\r\n                onChange={handleChange}\r\n                placeholder=\"Ej: Incluye accesorios, especificaciones t√©cnicas, informaci√≥n importante, etc.\"\r\n                rows={3}\r\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 text-black bg-white\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-2 text-black\" style={{ color: \"var(--primary)\" }}>\r\n                  Categor√≠a *\r\n                </label>\r\n                <select\r\n                  name=\"category\"\r\n                  value={formData.category}\r\n                  onChange={handleChange}\r\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 text-black bg-white\"\r\n                  required\r\n                >\r\n                  <option value=\"\" className=\"text-black\">Seleccionar categor√≠a</option>\r\n                  {categoriesData.map((cat) => (\r\n                    <option key={cat.id} value={cat.id} className=\"text-black\">\r\n                      {cat.name}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-2 text-black\" style={{ color: \"var(--primary)\" }}>\r\n                  Subcategor√≠a {subcategories.length > 0 && \"*\"}\r\n                </label>\r\n                <select\r\n                  name=\"subcategory\"\r\n                  value={formData.subcategory}\r\n                  onChange={handleChange}\r\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 text-black bg-white\"\r\n                  required={subcategories.length > 0}\r\n                  disabled={subcategories.length === 0}\r\n                >\r\n                  <option value=\"\" className=\"text-black\">\r\n                    {subcategories.length === 0 ? \"Sin subcategor√≠as\" : \"Seleccionar subcategor√≠a\"}\r\n                  </option>\r\n                  {subcategories.map((sub) => (\r\n                    <option key={sub.id} value={sub.id} className=\"text-black\">\r\n                      {sub.name}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n            </div>\r\n\r\n            <div onPaste={handleImagePaste} className=\"focus:outline-none\">\r\n              <div className=\"flex items-center justify-between mb-2\">\r\n                <label className=\"block text-sm font-medium text-black\" style={{ color: \"var(--primary)\" }}>\r\n                  Imagen\r\n                </label>\r\n                <span className=\"text-xs text-gray-500\">\r\n                  M√°ximo: 1MB\r\n                </span>\r\n              </div>\r\n              <div\r\n                className={`w-full px-4 py-4 border-2 border-dashed rounded-lg transition-all ${\r\n                  imageInputFocus\r\n                    ? \"border-blue-500 bg-blue-50\"\r\n                    : \"border-gray-300 bg-white\"\r\n                } flex flex-col items-center justify-center cursor-pointer`}\r\n                onDragOver={(e) => {\r\n                  e.preventDefault()\r\n                  setImageInputFocus(true)\r\n                }}\r\n                onDragLeave={() => setImageInputFocus(false)}\r\n                onDrop={(e) => {\r\n                  e.preventDefault()\r\n                  setImageInputFocus(false)\r\n                  const file = e.dataTransfer.files?.[0]\r\n                  if (file && file.type.startsWith(\"image/\")) {\r\n                    // Validar tama√±o de archivo\r\n                    if (file.size > MAX_IMAGE_SIZE) {\r\n                      const sizeMB = (file.size / (1024 * 1024)).toFixed(2)\r\n                      const limitMB = (MAX_IMAGE_SIZE / (1024 * 1024)).toFixed(2)\r\n                      const errorMsg = `‚ö†Ô∏è Cambiar imagen: El archivo es demasiado grande (${sizeMB}MB). El l√≠mite m√°ximo es ${limitMB}MB. Selecciona una imagen m√°s peque√±a o de menor resoluci√≥n.`\r\n                      setImageError(errorMsg)\r\n                      setImagePreview(\"\")\r\n                      setFormData((prev) => ({ ...prev, image: \"\" }))\r\n                      setImageLoadSuccess(false)\r\n                      setPasteMessage(null)\r\n                      return\r\n                    }\r\n\r\n                    const reader = new FileReader()\r\n                    reader.onload = (event) => {\r\n                      const result = event.target?.result as string\r\n                      setImagePreview(result)\r\n                      setFormData((prev) => ({ ...prev, image: result }))\r\n                      setPasteMessage(\"‚úì Imagen cargada correctamente\")\r\n                      setImageError(null)\r\n                      setImageLoadSuccess(true)\r\n                      setTimeout(() => {\r\n                        setPasteMessage(null)\r\n                        setImageLoadSuccess(false)\r\n                      }, 3000)\r\n                    }\r\n                    reader.readAsDataURL(file)\r\n                  }\r\n                }}\r\n              >\r\n                <div className=\"text-center\">\r\n                  <svg className=\"mx-auto h-12 w-12 text-gray-400 mb-2\" stroke=\"currentColor\" fill=\"none\" viewBox=\"0 0 48 48\">\r\n                    <path d=\"M28 8H12a4 4 0 00-4 4v20a4 4 0 004 4h24a4 4 0 004-4V20m-8-12l-3.172-3.172a4 4 0 00-5.656 0L9.172 15.172a4 4 0 000 5.656l.6.6a4 4 0 005.656 0L24 13.656l8.772 8.772a4 4 0 005.656 0l.6-.6a4 4 0 000-5.656z\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\r\n                    <circle cx=\"16\" cy=\"16\" r=\"2\" fill=\"currentColor\" />\r\n                  </svg>\r\n                  <p className=\"text-sm font-medium text-gray-700 mb-1\">\r\n                    Haz clic para seleccionar o arrastra una imagen\r\n                  </p>\r\n                  <p className=\"text-xs text-gray-500\">\r\n                    Tambi√©n puedes pegar una imagen con <kbd className=\"px-2 py-1 bg-gray-200 rounded text-xs font-mono\">Ctrl+V</kbd>\r\n                  </p>\r\n                </div>\r\n                <input\r\n                  type=\"file\"\r\n                  accept=\"image/*\"\r\n                  onChange={handleImageChange}\r\n                  className=\"hidden\"\r\n                  id=\"image-input\"\r\n                />\r\n              </div>\r\n              \r\n              {imageError && (\r\n                <div className=\"mt-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg\">\r\n                  <p className=\"text-sm font-medium\">\r\n                    {imageError}\r\n                  </p>\r\n                </div>\r\n              )}\r\n\r\n              {formData.image && formData.image.length > 1048487 && (\r\n                <div className=\"mt-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg\">\r\n                  <p className=\"text-sm font-medium\">\r\n                    ‚ö†Ô∏è Cambiar imagen: La imagen en base64 supera el l√≠mite m√°ximo permitido (~1MB). Tama√±o actual: {(formData.image.length / (1024 * 1024)).toFixed(2)}MB. Por favor, selecciona una imagen m√°s peque√±a o de menor resoluci√≥n.\r\n                  </p>\r\n                </div>\r\n              )}\r\n\r\n              {imageLoadSuccess && (\r\n                <p className=\"text-sm text-green-600 mt-2 font-medium\">\r\n                  ‚úì Imagen cargada correctamente\r\n                </p>\r\n              )}\r\n              \r\n              {pasteMessage && (\r\n                <p className=\"text-sm text-green-600 mt-2 font-medium\">\r\n                  {pasteMessage}\r\n                </p>\r\n              )}\r\n\r\n              {imagePreview && (\r\n                <div className=\"mt-4\">\r\n                  <p className=\"text-sm font-medium text-gray-600 mb-2\">Vista previa:</p>\r\n                  <div className=\"relative w-full h-48 bg-gray-100 rounded-lg overflow-hidden flex items-center justify-center border border-gray-200\">\r\n                    <img src={imagePreview || \"/placeholder.svg\"} alt=\"Preview\" className=\"w-full h-full object-contain\" />\r\n                  </div>\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => {\r\n                      setImagePreview(\"\")\r\n                      setFormData((prev) => ({ ...prev, image: \"\" }))\r\n                      setPasteMessage(null)\r\n                      setImageError(null)\r\n                      setImageLoadSuccess(false)\r\n                    }}\r\n                    className=\"mt-2 text-sm text-red-600 hover:text-red-800 font-medium\"\r\n                  >\r\n                    ‚úï Eliminar imagen\r\n                  </button>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"flex gap-2 pt-6\">\r\n              <button\r\n                type=\"submit\"\r\n                disabled={loading}\r\n                className=\"flex-1 px-4 py-2 text-white rounded-lg font-medium hover:opacity-90 disabled:opacity-50\"\r\n                style={{ backgroundColor: \"var(--accent-green)\" }}\r\n              >\r\n                {loading ? \"Guardando...\" : \"Guardar\"}\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                onClick={onCancel}\r\n                className=\"flex-1 px-4 py-2 bg-gray-400 text-white rounded-lg font-medium hover:opacity-90\"\r\n              >\r\n                Cancelar\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAIA;AAEA;AACA;AACA;AAAA;AACA;AATA;;;;;;;AAuBA,oFAAoF;AACpF,MAAM,iBAAiB,IAAI,OAAO,MAAM,MAAM;AAE/B,SAAS,YAAY,EAAE,OAAO,EAAE,UAAU,EAAE,MAAM,EAAE,QAAQ,EAAoB;IAC7F,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;QACvC,MAAM,SAAS,QAAQ;QACvB,aAAa,SAAS,eAAe;QACrC,OAAO,SAAS,SAAS;QACzB,UAAU,SAAS,YAAY;QAC/B,aAAa,SAAS,eAAe;QACrC,OAAO,SAAS,SAAS;QACzB,OAAO,SAAS,SAAS;QACzB,KAAK,SAAS,OAAO;QACrB,SAAS,SAAS,WAAW;IAC/B;IACA,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAS,SAAS,SAAS;IAC3E,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,iNAAQ,EAAC;IAC3D,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iNAAQ,EAAgB;IAClE,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iNAAQ,EAAgB,EAAE;IACpE,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAiB,EAAE;IACvE,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,iNAAQ,EAAC;IACvD,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAgB;IAChE,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAgB;IAC5D,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,iNAAQ,EAAC;IACzD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAgB;IAE1D,6CAA6C;IAC7C,IAAA,kNAAS,EAAC;QACR;IACF,GAAG,EAAE;IAEL,mGAAmG;IACnG,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,qBAAqB,SAAS,YAAY,eAAe,MAAM,GAAG,GAAG;YACxE,2FAA2F;YAC3F,6EAA6E;YAC7E,MAAM,OAAO,eAAe,IAAI,CAAC,CAAA,MAAO,IAAI,EAAE,KAAK,SAAS,QAAQ;YACpE,IAAI,CAAC,MAAM;gBACT,6CAA6C;gBAC7C,MAAM,cAAc,eAAe,IAAI,CAAC,CAAA,MAAO,IAAI,IAAI,KAAK,QAAQ,QAAQ;gBAC5E,IAAI,aAAa;oBACf,YAAY,CAAA,OAAQ,CAAC;4BAAE,GAAG,IAAI;4BAAE,UAAU,YAAY,EAAE;wBAAC,CAAC;gBAC5D;YACF;QACF;IACF,GAAG;QAAC;QAAmB;QAAgB,SAAS;KAAS;IAEzD,kDAAkD;IAClD,IAAA,kNAAS,EAAC;QACR,IAAI,SAAS,QAAQ,EAAE;YACrB,mDAAmD;YACnD,kBAAkB,SAAS,QAAQ;QACrC,OAAO;YACL,iBAAiB,EAAE;QACrB;IACF,GAAG;QAAC,SAAS,QAAQ;KAAC;IAEtB,eAAe;QACb,IAAI;YACF,iBAAiB;YACjB,qBAAqB;YACrB,MAAM,KAAK,IAAA,wHAAK;YAChB,MAAM,WAAW,MAAM,IAAA,4KAAO,EAAC,IAAA,+KAAU,EAAC,IAAI;YAC9C,IAAI,SAAS,KAAK,EAAE;gBAClB,iBAAiB;gBACjB,QAAQ,IAAI,CAAC;YACf;YACA,MAAM,OAAO,SAAS,IAAI,CAAC,GAAG,CAAC,CAAC,MAAQ,CAAC;oBACvC,IAAI,IAAI,EAAE;oBACV,MAAM,IAAI,IAAI,GAAG,IAAI,IAAI;gBAC3B,CAAC;YACD,kBAAkB;QACpB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,kCAAkC;YAChD,iBAAiB,iBAAiB,QAAQ,MAAM,OAAO,GAAG;YAC1D,kBAAkB,EAAE;QACtB,SAAU;YACR,qBAAqB;QACvB;IACF;IAEA,eAAe,kBAAkB,UAAkB;QACjD,IAAI;YACF,mDAAmD;YACnD,IAAI,CAAC,cAAc,CAAC,WAAW,IAAI,IAAI;gBACrC,iBAAiB,EAAE;gBACnB;YACF;YAEA,0CAA0C;YAC1C,MAAM,OAAO,MAAM,IAAA,kJAA0B,EAAC;YAC9C,iBAAiB;QACnB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,qCAAqC;YACnD,iBAAiB,EAAE;QACrB;IACF;IAEA,SAAS,aAAa,CAAgF;QACpG,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,EAAE,MAAM;QAEhC,IAAI,SAAS,WAAW,SAAS,SAAS;YACxC,IAAI,SAAS,SAAS;gBACpB,qEAAqE;gBACrE,iFAAiF;gBACjF,MAAM,WAAW,IAAA,4IAAkB,EAAC;gBACpC,YAAY,CAAC,OAAS,CAAC;wBACrB,GAAG,IAAI;wBACP,CAAC,KAAK,EAAE;oBACV,CAAC;YACH,OAAO;gBACL,wCAAwC;gBACxC,MAAM,WAAW,WAAW;gBAC5B,MAAM,aAAa,MAAM,YAAY,IAAI,KAAK,KAAK,CAAC;gBACpD,YAAY,CAAC,OAAS,CAAC;wBACrB,GAAG,IAAI;wBACP,CAAC,KAAK,EAAE;oBACV,CAAC;YACH;QACF,OAAO;YACL,YAAY,CAAC,OAAS,CAAC;oBACrB,GAAG,IAAI;oBACP,CAAC,KAAK,EAAE;gBACV,CAAC;QACH;IACF;IAEA,SAAS,kBAAkB,CAAsC;QAC/D,MAAM,OAAO,EAAE,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE;QAChC,IAAI,MAAM;YACR,4BAA4B;YAC5B,IAAI,KAAK,IAAI,GAAG,gBAAgB;gBAC9B,MAAM,SAAS,CAAC,KAAK,IAAI,GAAG,CAAC,OAAO,IAAI,CAAC,EAAE,OAAO,CAAC;gBACnD,MAAM,UAAU,CAAC,iBAAiB,CAAC,OAAO,IAAI,CAAC,EAAE,OAAO,CAAC;gBACzD,MAAM,WAAW,CAAC,mDAAmD,EAAE,OAAO,yBAAyB,EAAE,QAAQ,4DAA4D,CAAC;gBAC9K,cAAc;gBACd,gBAAgB;gBAChB,YAAY,CAAC,OAAS,CAAC;wBAAE,GAAG,IAAI;wBAAE,OAAO;oBAAG,CAAC;gBAC7C,oBAAoB;gBACpB,gBAAgB;gBAChB;YACF;YAEA,MAAM,SAAS,IAAI;YACnB,OAAO,MAAM,GAAG,CAAC;gBACf,MAAM,SAAS,MAAM,MAAM,EAAE;gBAC7B,gBAAgB;gBAChB,YAAY,CAAC,OAAS,CAAC;wBAAE,GAAG,IAAI;wBAAE,OAAO;oBAAO,CAAC;gBACjD,cAAc;gBACd,oBAAoB;gBACpB,gBAAgB;gBAChB,0CAA0C;gBAC1C,WAAW,IAAM,oBAAoB,QAAQ;YAC/C;YACA,OAAO,aAAa,CAAC;QACvB;IACF;IAEA,SAAS,iBAAiB,CAAuC;QAC/D,MAAM,QAAQ,EAAE,aAAa,EAAE;QAC/B,IAAI,CAAC,OAAO;QAEZ,sDAAsD;QACtD,IAAK,IAAI,IAAI,GAAG,IAAI,MAAM,MAAM,EAAE,IAAK;YACrC,IAAI,KAAK,CAAC,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,GAAG;gBACzC,EAAE,cAAc;gBAChB,MAAM,OAAO,KAAK,CAAC,EAAE,CAAC,SAAS;gBAC/B,IAAI,MAAM;oBACR,4BAA4B;oBAC5B,IAAI,KAAK,IAAI,GAAG,gBAAgB;wBAC9B,MAAM,SAAS,CAAC,KAAK,IAAI,GAAG,CAAC,OAAO,IAAI,CAAC,EAAE,OAAO,CAAC;wBACnD,MAAM,UAAU,CAAC,iBAAiB,CAAC,OAAO,IAAI,CAAC,EAAE,OAAO,CAAC;wBACzD,MAAM,WAAW,CAAC,mDAAmD,EAAE,OAAO,yBAAyB,EAAE,QAAQ,4DAA4D,CAAC;wBAC9K,cAAc;wBACd,gBAAgB;wBAChB,YAAY,CAAC,OAAS,CAAC;gCAAE,GAAG,IAAI;gCAAE,OAAO;4BAAG,CAAC;wBAC7C,oBAAoB;wBACpB,gBAAgB;wBAChB;oBACF;oBAEA,MAAM,SAAS,IAAI;oBACnB,OAAO,MAAM,GAAG,CAAC;wBACf,MAAM,SAAS,MAAM,MAAM,EAAE;wBAC7B,gBAAgB;wBAChB,YAAY,CAAC,OAAS,CAAC;gCAAE,GAAG,IAAI;gCAAE,OAAO;4BAAO,CAAC;wBACjD,gBAAgB;wBAChB,cAAc;wBACd,oBAAoB;wBACpB,wCAAwC;wBACxC,WAAW;4BACT,gBAAgB;4BAChB,oBAAoB;wBACtB,GAAG;oBACL;oBACA,OAAO,aAAa,CAAC;gBACvB;gBACA;YACF;QACF;IACF;IAEA,eAAe,aAAa,CAAkB;QAC5C,EAAE,cAAc;QAChB,WAAW;QACX,aAAa;QACb,IAAI;YACF,4DAA4D;YAC5D,IAAI,SAAS,KAAK,EAAE;gBAClB,MAAM,iBAAiB,SAAS,KAAK,CAAC,MAAM;gBAC5C,MAAM,kBAAkB,QAAQ,QAAQ;;gBAExC,IAAI,iBAAiB,iBAAiB;oBACpC,MAAM,SAAS,CAAC,iBAAiB,CAAC,OAAO,IAAI,CAAC,EAAE,OAAO,CAAC;oBACxD,MAAM,UAAU,CAAC,kBAAkB,CAAC,OAAO,IAAI,CAAC,EAAE,OAAO,CAAC;oBAC1D,aAAa,CAAC,0EAA0E,EAAE,QAAQ,oBAAoB,EAAE,OAAO,uEAAuE,CAAC;oBACvM,WAAW;oBACX;gBACF;YACF;YAEA,gFAAgF;YAChF,MAAM,aAAa;gBACjB,GAAG,QAAQ;gBACX,OAAO,KAAK,KAAK,CAAC,SAAS,KAAK,GAAG,OAAO;gBAC1C,OAAO,KAAK,KAAK,CAAC,SAAS,KAAK;YAClC;YACA,OAAO;QACT,EAAE,OAAO,OAAO;YACd,MAAM,WAAW,iBAAiB,QAAQ,MAAM,OAAO,GAAG,OAAO;YAEjE,qCAAqC;YACrC,IAAI,SAAS,QAAQ,CAAC,cAAc,SAAS,QAAQ,CAAC,YAAY,SAAS,QAAQ,CAAC,gBAAgB;gBAClG,aAAa,CAAC,wHAAwH,CAAC;gBACvI,QAAQ,KAAK,CAAC,mCAAmC;YACnD,OAAO;gBACL,aAAa,CAAC,8BAA8B,EAAE,UAAU;gBACxD,QAAQ,KAAK,CAAC,6BAA6B;YAC7C;QACF,SAAU;YACR,WAAW;QACb;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;wBAAgC,OAAO;4BAAE,OAAO;wBAAiB;kCAC5E,UAAU,oBAAoB;;;;;;oBAIhC,+BACC,8OAAC;wBAAI,WAAU;;4BAA4D;4BACrE;;;;;;;oBAKP,mCACC,8OAAC;wBAAI,WAAU;kCAA+D;;;;;;kCAKhF,8OAAC;wBAAK,UAAU;wBAAc,WAAU;;0CACtC,8OAAC;;kDACC,8OAAC;wCAAM,WAAU;wCAA4C,OAAO;4CAAE,OAAO;wCAAiB;kDAAG;;;;;;kDAGjG,8OAAC;wCACC,MAAK;wCACL,MAAK;wCACL,OAAO,SAAS,IAAI;wCACpB,UAAU;wCACV,WAAU;wCACV,QAAQ;;;;;;;;;;;;0CAIZ,8OAAC;;kDACC,8OAAC;wCAAM,WAAU;wCAA4C,OAAO;4CAAE,OAAO;wCAAiB;kDAAG;;;;;;kDAGjG,8OAAC;wCACC,MAAK;wCACL,OAAO,SAAS,WAAW;wCAC3B,UAAU;wCACV,MAAM;wCACN,WAAU;;;;;;;;;;;;0CAId,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;;0DACC,8OAAC;gDAAM,WAAU;gDAA4C,OAAO;oDAAE,OAAO;gDAAiB;0DAAG;;;;;;0DAGjG,8OAAC;;kEACC,8OAAC;wDACC,MAAK;wDACL,MAAK;wDACL,OAAO,SAAS,KAAK,GAAG,IAAI,OAAO,SAAS,KAAK,IAAI;wDACrD,UAAU;wDACV,aAAY;wDACZ,WAAU;wDACV,QAAQ;;;;;;oDAET,SAAS,KAAK,GAAG,mBAChB,8OAAC;wDAAE,WAAU;wDAA6B,OAAO;4DAAE,OAAO;wDAAsB;;4DAAG;4DAC9D,IAAA,qIAAW,EAAC,SAAS,KAAK;;;;;;;;;;;;;;;;;;;kDAKrD,8OAAC;;0DACC,8OAAC;gDAAM,WAAU;gDAA4C,OAAO;oDAAE,OAAO;gDAAiB;0DAAG;;;;;;0DAGjG,8OAAC;gDACC,MAAK;gDACL,MAAK;gDACL,OAAO,SAAS,KAAK;gDACrB,UAAU;gDACV,WAAU;gDACV,QAAQ;;;;;;;;;;;;;;;;;;0CAKd,8OAAC;;kDACC,8OAAC;wCAAM,WAAU;wCAA4C,OAAO;4CAAE,OAAO;wCAAiB;kDAAG;;;;;;kDAGjG,8OAAC;wCACC,MAAK;wCACL,MAAK;wCACL,OAAO,SAAS,GAAG;wCACnB,UAAU;wCACV,aAAY;wCACZ,WAAU;;;;;;;;;;;;0CAId,8OAAC;;kDACC,8OAAC;wCAAM,WAAU;wCAA4C,OAAO;4CAAE,OAAO;wCAAiB;kDAAG;;;;;;kDAGjG,8OAAC;wCACC,MAAK;wCACL,OAAO,SAAS,OAAO;wCACvB,UAAU;wCACV,aAAY;wCACZ,MAAM;wCACN,WAAU;;;;;;;;;;;;0CAId,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;;0DACC,8OAAC;gDAAM,WAAU;gDAA4C,OAAO;oDAAE,OAAO;gDAAiB;0DAAG;;;;;;0DAGjG,8OAAC;gDACC,MAAK;gDACL,OAAO,SAAS,QAAQ;gDACxB,UAAU;gDACV,WAAU;gDACV,QAAQ;;kEAER,8OAAC;wDAAO,OAAM;wDAAG,WAAU;kEAAa;;;;;;oDACvC,eAAe,GAAG,CAAC,CAAC,oBACnB,8OAAC;4DAAoB,OAAO,IAAI,EAAE;4DAAE,WAAU;sEAC3C,IAAI,IAAI;2DADE,IAAI,EAAE;;;;;;;;;;;;;;;;;kDAOzB,8OAAC;;0DACC,8OAAC;gDAAM,WAAU;gDAA4C,OAAO;oDAAE,OAAO;gDAAiB;;oDAAG;oDACjF,cAAc,MAAM,GAAG,KAAK;;;;;;;0DAE5C,8OAAC;gDACC,MAAK;gDACL,OAAO,SAAS,WAAW;gDAC3B,UAAU;gDACV,WAAU;gDACV,UAAU,cAAc,MAAM,GAAG;gDACjC,UAAU,cAAc,MAAM,KAAK;;kEAEnC,8OAAC;wDAAO,OAAM;wDAAG,WAAU;kEACxB,cAAc,MAAM,KAAK,IAAI,sBAAsB;;;;;;oDAErD,cAAc,GAAG,CAAC,CAAC,oBAClB,8OAAC;4DAAoB,OAAO,IAAI,EAAE;4DAAE,WAAU;sEAC3C,IAAI,IAAI;2DADE,IAAI,EAAE;;;;;;;;;;;;;;;;;;;;;;;0CAQ3B,8OAAC;gCAAI,SAAS;gCAAkB,WAAU;;kDACxC,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAM,WAAU;gDAAuC,OAAO;oDAAE,OAAO;gDAAiB;0DAAG;;;;;;0DAG5F,8OAAC;gDAAK,WAAU;0DAAwB;;;;;;;;;;;;kDAI1C,8OAAC;wCACC,WAAW,CAAC,kEAAkE,EAC5E,kBACI,+BACA,2BACL,yDAAyD,CAAC;wCAC3D,YAAY,CAAC;4CACX,EAAE,cAAc;4CAChB,mBAAmB;wCACrB;wCACA,aAAa,IAAM,mBAAmB;wCACtC,QAAQ,CAAC;4CACP,EAAE,cAAc;4CAChB,mBAAmB;4CACnB,MAAM,OAAO,EAAE,YAAY,CAAC,KAAK,EAAE,CAAC,EAAE;4CACtC,IAAI,QAAQ,KAAK,IAAI,CAAC,UAAU,CAAC,WAAW;gDAC1C,4BAA4B;gDAC5B,IAAI,KAAK,IAAI,GAAG,gBAAgB;oDAC9B,MAAM,SAAS,CAAC,KAAK,IAAI,GAAG,CAAC,OAAO,IAAI,CAAC,EAAE,OAAO,CAAC;oDACnD,MAAM,UAAU,CAAC,iBAAiB,CAAC,OAAO,IAAI,CAAC,EAAE,OAAO,CAAC;oDACzD,MAAM,WAAW,CAAC,mDAAmD,EAAE,OAAO,yBAAyB,EAAE,QAAQ,4DAA4D,CAAC;oDAC9K,cAAc;oDACd,gBAAgB;oDAChB,YAAY,CAAC,OAAS,CAAC;4DAAE,GAAG,IAAI;4DAAE,OAAO;wDAAG,CAAC;oDAC7C,oBAAoB;oDACpB,gBAAgB;oDAChB;gDACF;gDAEA,MAAM,SAAS,IAAI;gDACnB,OAAO,MAAM,GAAG,CAAC;oDACf,MAAM,SAAS,MAAM,MAAM,EAAE;oDAC7B,gBAAgB;oDAChB,YAAY,CAAC,OAAS,CAAC;4DAAE,GAAG,IAAI;4DAAE,OAAO;wDAAO,CAAC;oDACjD,gBAAgB;oDAChB,cAAc;oDACd,oBAAoB;oDACpB,WAAW;wDACT,gBAAgB;wDAChB,oBAAoB;oDACtB,GAAG;gDACL;gDACA,OAAO,aAAa,CAAC;4CACvB;wCACF;;0DAEA,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDAAI,WAAU;wDAAuC,QAAO;wDAAe,MAAK;wDAAO,SAAQ;;0EAC9F,8OAAC;gEAAK,GAAE;gEAA4M,aAAY;gEAAI,eAAc;gEAAQ,gBAAe;;;;;;0EACzQ,8OAAC;gEAAO,IAAG;gEAAK,IAAG;gEAAK,GAAE;gEAAI,MAAK;;;;;;;;;;;;kEAErC,8OAAC;wDAAE,WAAU;kEAAyC;;;;;;kEAGtD,8OAAC;wDAAE,WAAU;;4DAAwB;0EACC,8OAAC;gEAAI,WAAU;0EAAkD;;;;;;;;;;;;;;;;;;0DAGzG,8OAAC;gDACC,MAAK;gDACL,QAAO;gDACP,UAAU;gDACV,WAAU;gDACV,IAAG;;;;;;;;;;;;oCAIN,4BACC,8OAAC;wCAAI,WAAU;kDACb,cAAA,8OAAC;4CAAE,WAAU;sDACV;;;;;;;;;;;oCAKN,SAAS,KAAK,IAAI,SAAS,KAAK,CAAC,MAAM,GAAG,yBACzC,8OAAC;wCAAI,WAAU;kDACb,cAAA,8OAAC;4CAAE,WAAU;;gDAAsB;gDACgE,CAAC,SAAS,KAAK,CAAC,MAAM,GAAG,CAAC,OAAO,IAAI,CAAC,EAAE,OAAO,CAAC;gDAAG;;;;;;;;;;;;oCAKzJ,kCACC,8OAAC;wCAAE,WAAU;kDAA0C;;;;;;oCAKxD,8BACC,8OAAC;wCAAE,WAAU;kDACV;;;;;;oCAIJ,8BACC,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAE,WAAU;0DAAyC;;;;;;0DACtD,8OAAC;gDAAI,WAAU;0DACb,cAAA,8OAAC;oDAAI,KAAK,gBAAgB;oDAAoB,KAAI;oDAAU,WAAU;;;;;;;;;;;0DAExE,8OAAC;gDACC,MAAK;gDACL,SAAS;oDACP,gBAAgB;oDAChB,YAAY,CAAC,OAAS,CAAC;4DAAE,GAAG,IAAI;4DAAE,OAAO;wDAAG,CAAC;oDAC7C,gBAAgB;oDAChB,cAAc;oDACd,oBAAoB;gDACtB;gDACA,WAAU;0DACX;;;;;;;;;;;;;;;;;;0CAOP,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCACC,MAAK;wCACL,UAAU;wCACV,WAAU;wCACV,OAAO;4CAAE,iBAAiB;wCAAsB;kDAE/C,UAAU,iBAAiB;;;;;;kDAE9B,8OAAC;wCACC,MAAK;wCACL,SAAS;wCACT,WAAU;kDACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASf","debugId":null}},
    {"offset": {"line": 2555, "column": 0}, "map": {"version":3,"sources":["file:///D:/ubatech/lib/normalize-products.ts"],"sourcesContent":["import type { Product } from \"@/types\"\r\n\r\n/**\r\n * Normaliza los productos para garantizar que el campo 'category' contenga un ID v√°lido\r\n * Los productos antiguos pueden tener el nombre de la categor√≠a en lugar del ID\r\n * @param products Array de productos a normalizar\r\n * @param categoriesMap Mapa de ID -> nombre de categor√≠a\r\n * @returns Array de productos normalizados\r\n */\r\nexport function normalizeProducts(\r\n  products: Product[],\r\n  categoriesMap: Map<string, string>\r\n): Product[] {\r\n  return products.map((product) => {\r\n    // Si la categor√≠a es un ID v√°lido en el mapa, est√° normalizada\r\n    if (categoriesMap.has(product.category)) {\r\n      return product\r\n    }\r\n\r\n    // Si no es un ID v√°lido, buscar si es un nombre\r\n    for (const [id, name] of categoriesMap.entries()) {\r\n      if (name === product.category) {\r\n        // Encontramos el ID correspondiente al nombre\r\n        return {\r\n          ...product,\r\n          category: id,\r\n        }\r\n      }\r\n    }\r\n\r\n    // Si no encontramos ni ID ni nombre, devolver el producto sin cambios\r\n    // (podr√≠a ser un error o una categor√≠a eliminada)\r\n    return product\r\n  })\r\n}\r\n"],"names":[],"mappings":";;;;AASO,SAAS,kBACd,QAAmB,EACnB,aAAkC;IAElC,OAAO,SAAS,GAAG,CAAC,CAAC;QACnB,+DAA+D;QAC/D,IAAI,cAAc,GAAG,CAAC,QAAQ,QAAQ,GAAG;YACvC,OAAO;QACT;QAEA,gDAAgD;QAChD,KAAK,MAAM,CAAC,IAAI,KAAK,IAAI,cAAc,OAAO,GAAI;YAChD,IAAI,SAAS,QAAQ,QAAQ,EAAE;gBAC7B,8CAA8C;gBAC9C,OAAO;oBACL,GAAG,OAAO;oBACV,UAAU;gBACZ;YACF;QACF;QAEA,sEAAsE;QACtE,kDAAkD;QAClD,OAAO;IACT;AACF","debugId":null}},
    {"offset": {"line": 2590, "column": 0}, "map": {"version":3,"sources":["file:///D:/ubatech/lib/pdf-generator.ts"],"sourcesContent":["import jsPDF from 'jspdf'\r\nimport type { Product } from '@/types'\r\n\r\ninterface PDFGeneratorOptions {\r\n  fileName?: string\r\n  title?: string\r\n}\r\n\r\nasync function loadImage(url: string): Promise<string | null> {\r\n  try {\r\n    return await new Promise((resolve) => {\r\n      const img = new Image()\r\n      img.crossOrigin = 'anonymous'\r\n      img.onload = () => {\r\n        const canvas = document.createElement('canvas')\r\n        canvas.width = img.width\r\n        canvas.height = img.height\r\n        const ctx = canvas.getContext('2d')\r\n        if (ctx) {\r\n          ctx.drawImage(img, 0, 0)\r\n          resolve(canvas.toDataURL('image/jpeg', 0.8))\r\n        } else {\r\n          resolve(null)\r\n        }\r\n      }\r\n      img.onerror = () => resolve(null)\r\n      img.src = url\r\n    })\r\n  } catch (error) {\r\n    console.error('Error loading image:', error)\r\n    return null\r\n  }\r\n}\r\n\r\nexport async function generateOutOfStockPDF(\r\n  products: Product[],\r\n  categoriesMap: Map<string, string>,\r\n  options: PDFGeneratorOptions = {}\r\n) {\r\n  const { fileName = 'Productos_Fuera_de_Stock.pdf', title = 'Reporte de Productos Fuera de Stock' } = options\r\n\r\n  // Crear documento PDF\r\n  const doc = new jsPDF({\r\n    orientation: 'portrait',\r\n    unit: 'mm',\r\n    format: 'a4',\r\n  })\r\n\r\n  const pageWidth = doc.internal.pageSize.getWidth()\r\n  const pageHeight = doc.internal.pageSize.getHeight()\r\n  const margin = 10\r\n  const contentWidth = pageWidth - 2 * margin\r\n  const imageWidth = 30\r\n  const imageHeight = 30\r\n\r\n  let yPosition = margin\r\n\r\n  // T√≠tulo del documento\r\n  doc.setFontSize(16)\r\n  doc.setFont('Helvetica', 'bold')\r\n  doc.text(title, margin, yPosition)\r\n  yPosition += 10\r\n\r\n  // Fecha de generaci√≥n\r\n  doc.setFontSize(10)\r\n  doc.setFont('Helvetica', 'normal')\r\n  const generatedDate = new Date().toLocaleDateString('es-ES', {\r\n    year: 'numeric',\r\n    month: 'long',\r\n    day: 'numeric',\r\n    hour: '2-digit',\r\n    minute: '2-digit',\r\n  })\r\n  doc.text(`Generado: ${generatedDate}`, margin, yPosition)\r\n  yPosition += 8\r\n\r\n  // Total de productos\r\n  doc.setFontSize(11)\r\n  doc.setFont('Helvetica', 'bold')\r\n  doc.text(`Total de productos fuera de stock: ${products.length}`, margin, yPosition)\r\n  yPosition += 10\r\n\r\n  // Agrupar productos por categor√≠a\r\n  const groupedByCategory = new Map<string, Product[]>()\r\n  products.forEach((product) => {\r\n    const categoryName = categoriesMap.get(product.category) || 'Sin categor√≠a'\r\n    if (!groupedByCategory.has(categoryName)) {\r\n      groupedByCategory.set(categoryName, [])\r\n    }\r\n    groupedByCategory.get(categoryName)!.push(product)\r\n  })\r\n\r\n  // Iterar sobre categor√≠as\r\n  const entries = Array.from(groupedByCategory.entries()).sort((a, b) => a[0].localeCompare(b[0]))\r\n\r\n  for (const [categoryName, categoryProducts] of entries) {\r\n    // Verificar si necesitamos una nueva p√°gina\r\n    if (yPosition > pageHeight - margin - 40) {\r\n      doc.addPage()\r\n      yPosition = margin\r\n    }\r\n\r\n    // Encabezado de categor√≠a\r\n    doc.setFontSize(12)\r\n    doc.setFont('Helvetica', 'bold')\r\n    doc.setFillColor(41, 128, 185) // Color azul oscuro\r\n    doc.setTextColor(255, 255, 255) // Texto blanco\r\n    doc.rect(margin, yPosition - 5, contentWidth, 8, 'F')\r\n    doc.text(`${categoryName} (${categoryProducts.length} productos)`, margin + 2, yPosition)\r\n    doc.setTextColor(0, 0, 0) // Volver a texto negro\r\n    yPosition += 12\r\n\r\n    // Productos de la categor√≠a\r\n    for (const product of categoryProducts) {\r\n      // Verificar espacio disponible (necesitamos espacio para imagen + info)\r\n      if (yPosition > pageHeight - margin - 45) {\r\n        doc.addPage()\r\n        yPosition = margin\r\n      }\r\n\r\n      const startYPosition = yPosition\r\n\r\n      // Agregar imagen si existe\r\n      if (product.image) {\r\n        const imageData = await loadImage(product.image)\r\n        if (imageData) {\r\n          doc.addImage(imageData, 'JPEG', margin + 2, yPosition, imageWidth, imageHeight)\r\n        }\r\n      }\r\n\r\n      // Informaci√≥n del producto (al lado de la imagen)\r\n      const infoX = margin + imageWidth + 8\r\n      const infoWidth = contentWidth - imageWidth - 6\r\n\r\n      // Nombre del producto\r\n      doc.setFontSize(10)\r\n      doc.setFont('Helvetica', 'bold')\r\n      const nameLines = doc.splitTextToSize(`${product.name}`, infoWidth)\r\n      doc.text(nameLines, infoX, yPosition)\r\n      yPosition += nameLines.length * 5 + 2\r\n\r\n      // Informaci√≥n del producto\r\n      doc.setFontSize(9)\r\n      doc.setFont('Helvetica', 'normal')\r\n\r\n      const infoLines: string[] = []\r\n      infoLines.push(`Categor√≠a: ${categoryName}`)\r\n      const formattedPrice = product.price ? new Intl.NumberFormat('es-ES', {\r\n        minimumFractionDigits: 0,\r\n        maximumFractionDigits: 2,\r\n      }).format(product.price) : 'N/A'\r\n      infoLines.push(`Precio: $${formattedPrice}`)\r\n\r\n      if (product.subcategory) {\r\n        infoLines.push(`Marca: ${product.subcategory}`)\r\n      }\r\n\r\n      if (product.sku) {\r\n        infoLines.push(`SKU: ${product.sku}`)\r\n      }\r\n\r\n      infoLines.forEach((line) => {\r\n        doc.text(line, infoX, yPosition)\r\n        yPosition += 4\r\n      })\r\n\r\n      // Asegurar espacio m√≠nimo para la imagen\r\n      yPosition = Math.max(yPosition, startYPosition + imageHeight + 3)\r\n      yPosition += 3\r\n\r\n      // L√≠nea separadora\r\n      doc.setDrawColor(200, 200, 200)\r\n      doc.line(margin + 1, yPosition, margin + contentWidth - 1, yPosition)\r\n      yPosition += 4\r\n    }\r\n  }\r\n\r\n  // Descargar el PDF\r\n  doc.save(fileName)\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2744, "column": 0}, "map": {"version":3,"sources":["file:///D:/ubatech/components/admin/products-manager.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState, useEffect } from \"react\"\r\nimport { getDb } from \"@/lib/firebase\"\r\nimport { collection, getDocs, addDoc, updateDoc, deleteDoc, doc } from \"firebase/firestore\"\r\nimport type { Product, Subcategory } from \"@/types\"\r\nimport ProductForm from \"./product-form\"\r\nimport { getSubcategoriesByCategory } from \"@/lib/subcategories\"\r\nimport { normalizeProducts } from \"@/lib/normalize-products\"\r\nimport { formatPriceWithCurrency, normalizeProductPrice } from \"@/lib/format-price\"\r\nimport { generateOutOfStockPDF } from \"@/lib/pdf-generator\"\r\nimport { Download } from \"lucide-react\"\r\n\r\nexport default function ProductsManager() {\r\n  const [products, setProducts] = useState<Product[]>([])\r\n  const [categories, setCategories] = useState<Array<{ id: string; name: string }>>([])\r\n  const [categoriesMap, setCategoriesMap] = useState<Map<string, string>>(new Map())\r\n  const [subcategoriesMap, setSubcategoriesMap] = useState<Map<string, Subcategory[]>>(new Map())\r\n  const [loading, setLoading] = useState(false)\r\n  const [showForm, setShowForm] = useState(false)\r\n  const [editingProduct, setEditingProduct] = useState<Product | null>(null)\r\n  const [selectedCategory, setSelectedCategory] = useState<string>(\"all\")\r\n  const [error, setError] = useState<string | null>(null)\r\n  const [downloadingPDF, setDownloadingPDF] = useState(false)\r\n  const [searchTerm, setSearchTerm] = useState<string>(\"\")\r\n\r\n  useEffect(() => {\r\n    loadData()\r\n  }, [])\r\n\r\n  async function handleDownloadOutOfStockPDF() {\r\n    try {\r\n      setDownloadingPDF(true)\r\n      const outOfStockProducts = products.filter((p) => p.stock === 0)\r\n      \r\n      if (outOfStockProducts.length === 0) {\r\n        alert(\"No hay productos fuera de stock para descargar\")\r\n        return\r\n      }\r\n\r\n      await generateOutOfStockPDF(outOfStockProducts, categoriesMap, {\r\n        fileName: `Productos_Fuera_de_Stock_${new Date().getTime()}.pdf`,\r\n        title: \"Reporte de Productos Fuera de Stock\",\r\n      })\r\n    } catch (error) {\r\n      console.error(\"[ProductsManager] Error downloading PDF:\", error)\r\n      alert(\"Error al descargar el PDF\")\r\n    } finally {\r\n      setDownloadingPDF(false)\r\n    }\r\n  }\r\n\r\n  async function loadData() {\r\n    try {\r\n      setLoading(true)\r\n      setError(null)\r\n      const db = getDb()\r\n      const [productsSnapshot, categoriesSnapshot] = await Promise.all([\r\n        getDocs(collection(db, \"products\")),\r\n        getDocs(collection(db, \"categories\")),\r\n      ])\r\n\r\n      const prods = productsSnapshot.docs.map((doc) => ({\r\n        id: doc.id,\r\n        ...doc.data(),\r\n      })) as Product[]\r\n\r\n      // Normalizar precios para asegurar que sean n√∫meros, no strings\r\n      const prodsWithNormalizedPrices = prods.map(normalizeProductPrice)\r\n\r\n      // Crear array de categor√≠as con ID y nombre\r\n      const cats = categoriesSnapshot.docs.map((doc) => ({\r\n        id: doc.id,\r\n        name: doc.data().name,\r\n      }))\r\n      setCategories(cats)\r\n\r\n      // Crear mapa de ID -> nombre de categor√≠a\r\n      const catMap = new Map<string, string>()\r\n      for (const catDoc of categoriesSnapshot.docs) {\r\n        catMap.set(catDoc.id, catDoc.data().name)\r\n      }\r\n      setCategoriesMap(catMap)\r\n\r\n      // Normalizar productos para asegurar que tengan IDs de categor√≠a v√°lidos\r\n      const normalizedProds = normalizeProducts(prodsWithNormalizedPrices, catMap)\r\n      setProducts(normalizedProds)\r\n\r\n      // Cargar subcategor√≠as para cada categor√≠a\r\n      const subMap = new Map<string, Subcategory[]>()\r\n      for (const catDoc of categoriesSnapshot.docs) {\r\n        const subs = await getSubcategoriesByCategory(catDoc.id)\r\n        subMap.set(catDoc.id, subs)\r\n      }\r\n      setSubcategoriesMap(subMap)\r\n    } catch (error) {\r\n      console.error(\"[ProductsManager] Error loading data:\", error)\r\n      const errorMessage = error instanceof Error ? error.message : \"Error al cargar productos\"\r\n      setError(errorMessage)\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  async function handleSaveProduct(productData: Omit<Product, \"id\">) {\r\n    try {\r\n      const db = getDb()\r\n      if (editingProduct) {\r\n        await updateDoc(doc(db, \"products\", editingProduct.id), productData)\r\n      } else {\r\n        await addDoc(collection(db, \"products\"), productData)\r\n      }\r\n      setShowForm(false)\r\n      setEditingProduct(null)\r\n      await loadData()\r\n    } catch (error) {\r\n      const errorMsg = error instanceof Error ? error.message : String(error)\r\n      console.error(\"[ProductsManager] Error saving product:\", error)\r\n      \r\n      // Propagar el error al formulario\r\n      throw error\r\n    }\r\n  }\r\n\r\n  async function handleDeleteProduct(id: string) {\r\n    if (!confirm(\"¬øEst√° seguro de que desea eliminar este producto?\")) return\r\n\r\n    try {\r\n      const db = getDb()\r\n      await deleteDoc(doc(db, \"products\", id))\r\n      await loadData()\r\n    } catch (error) {\r\n      console.error(\"[v0] Error deleting product:\", error)\r\n    }\r\n  }\r\n\r\n  const getSubcategoryName = (subcategoryId: string | undefined): string => {\r\n    if (!subcategoryId) return \"-\"\r\n    for (const subcategories of subcategoriesMap.values()) {\r\n      const sub = subcategories.find((s) => s.id === subcategoryId)\r\n      if (sub) return sub.name\r\n    }\r\n    return \"-\"\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {error && (\r\n        <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\">\r\n          <p className=\"font-semibold\">Error al cargar productos:</p>\r\n          <p>{error}</p>\r\n        </div>\r\n      )}\r\n\r\n      {/* Encabezado y buscador sticky */}\r\n      <div className=\"sticky top-0 z-40 bg-gradient-to-b from-[#f8fafc] to-[#f8fafc] pb-3 -mx-8 px-8 pt-0 -mt-30\" style={{ top: \"-32px\" }}>\r\n        <div className=\"flex items-center justify-between gap-4\">\r\n          <h1 className=\"text-3xl font-bold\" style={{ color: \"var(--primary-dark)\" }}>\r\n            Gesti√≥n de Productos\r\n          </h1>\r\n          <div className=\"flex gap-2 items-center\">\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"üîé Buscar productos...\"\r\n              value={searchTerm}\r\n              onChange={(e) => setSearchTerm(e.target.value)}\r\n              className=\"px-4 py-2 bg-white text-black border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-300 placeholder-gray-500\"\r\n            />\r\n            <div className=\"flex gap-2\">\r\n              {selectedCategory === \"out-of-stock\" && (\r\n                <button\r\n                  onClick={handleDownloadOutOfStockPDF}\r\n                  disabled={downloadingPDF || products.filter((p) => p.stock === 0).length === 0}\r\n                  className=\"px-4 py-2 text-white rounded-lg font-medium hover:opacity-90 transition-all hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2\"\r\n                  style={{ backgroundColor: \"var(--accent-turquoise)\" }}\r\n                  title=\"Descargar PDF de productos fuera de stock\"\r\n                >\r\n                  <Download size={18} />\r\n                  {downloadingPDF ? \"Descargando...\" : \"Descargar PDF\"}\r\n                </button>\r\n              )}\r\n              <button\r\n                onClick={() => {\r\n                  setShowForm(true)\r\n                  setEditingProduct(null)\r\n                }}\r\n                className=\"px-6 py-2 text-white rounded-lg font-medium hover:opacity-90 transition-all hover:shadow-lg\"\r\n                style={{ backgroundColor: \"var(--accent-green)\" }}\r\n              >\r\n                Agregar Producto\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Filtro de categor√≠as sticky */}\r\n        <div className=\"flex gap-2 mt-4 overflow-x-auto pb-2 -mx-4 px-4\">\r\n          <button\r\n            onClick={() => setSelectedCategory(\"all\")}\r\n            className={`px-4 py-2 rounded-full whitespace-nowrap font-medium transition-all ${\r\n              selectedCategory === \"all\" ? \"text-white shadow-lg\" : \"bg-gray-200 text-gray-800 hover:bg-gray-300\"\r\n            }`}\r\n            style={selectedCategory === \"all\" ? { backgroundColor: \"var(--primary-dark)\" } : {}}\r\n          >\r\n            Todos\r\n          </button>\r\n          <button\r\n            onClick={() => setSelectedCategory(\"out-of-stock\")}\r\n            className={`px-4 py-2 rounded-full whitespace-nowrap font-medium transition-all ${\r\n              selectedCategory === \"out-of-stock\" ? \"text-white shadow-lg\" : \"bg-gray-200 text-gray-800 hover:bg-gray-300\"\r\n            }`}\r\n            style={selectedCategory === \"out-of-stock\" ? { backgroundColor: \"var(--primary-dark)\" } : {}}\r\n          >\r\n            Fuera de Stock\r\n          </button>\r\n          {categories.map((cat) => (\r\n            <button\r\n              key={cat.id}\r\n              onClick={() => setSelectedCategory(cat.id)}\r\n              className={`px-4 py-2 rounded-full whitespace-nowrap font-medium transition-all ${\r\n                selectedCategory === cat.id ? \"text-white shadow-lg\" : \"bg-gray-200 text-gray-800 hover:bg-gray-300\"\r\n              }`}\r\n              style={selectedCategory === cat.id ? { backgroundColor: \"var(--primary-dark)\" } : {}}\r\n            >\r\n              {cat.name}\r\n            </button>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {showForm && (\r\n        <ProductForm\r\n          product={editingProduct}\r\n          onSave={handleSaveProduct}\r\n          onCancel={() => {\r\n            setShowForm(false)\r\n            setEditingProduct(null)\r\n          }}\r\n        />\r\n      )}\r\n\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-3\">\r\n        {(() => {\r\n          // Filtrar productos seg√∫n categor√≠a seleccionada\r\n          let filteredProducts = products.filter((product) => {\r\n            // Filtrar por categor√≠a\r\n            const categoryMatch = (() => {\r\n              if (selectedCategory === \"all\") return true\r\n              if (selectedCategory === \"out-of-stock\") return product.stock === 0\r\n              return product.category === selectedCategory\r\n            })()\r\n\r\n            // Filtrar por b√∫squeda\r\n            const searchMatch = searchTerm === \"\" || \r\n              product.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n              product.description?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n              product.sku?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n              categoriesMap.get(product.category)?.toLowerCase().includes(searchTerm.toLowerCase())\r\n\r\n            return categoryMatch && searchMatch\r\n          })\r\n\r\n          // Si est√° en \"Todos\", agrupar por categor√≠a\r\n          if (selectedCategory === \"all\") {\r\n            const groupedByCategory = new Map<string, Product[]>()\r\n            \r\n            filteredProducts.forEach((product) => {\r\n              const categoryName = categoriesMap.get(product.category) || \"Sin categor√≠a\"\r\n              if (!groupedByCategory.has(categoryName)) {\r\n                groupedByCategory.set(categoryName, [])\r\n              }\r\n              groupedByCategory.get(categoryName)!.push(product)\r\n            })\r\n\r\n            // Convertir a array ordenado alfab√©ticamente y ordenar productos por precio\r\n            const categorySections = Array.from(groupedByCategory.entries())\r\n              .sort((a, b) => a[0].localeCompare(b[0]))\r\n              .map(([categoryName, prods]) => [\r\n                categoryName,\r\n                [...prods].sort((a, b) => (a.price || 0) - (b.price || 0))\r\n              ]) as [string, Product[]][]\r\n\r\n            return (\r\n              <div className=\"col-span-full space-y-8\">\r\n                {categorySections.map(([categoryName, categoryProducts], index) => (\r\n                  <div key={categoryName}>\r\n                    {/* Encabezado de categor√≠a */}\r\n                    <h3 \r\n                      className=\"text-lg font-bold mb-4 pb-2\" \r\n                      style={{ color: \"var(--primary-dark)\" }}\r\n                    >\r\n                      {categoryName}\r\n                    </h3>\r\n\r\n                    {/* Grid de productos */}\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-3\">\r\n                      {categoryProducts.map((product) => (\r\n                        <div key={product.id} className=\"bg-white rounded-lg shadow-md overflow-hidden flex flex-col h-full hover:shadow-lg transition-shadow\">\r\n                          {product.image && (\r\n                            <img src={product.image || \"/placeholder.svg\"} alt={product.name} className=\"w-full h-20 object-contain p-1 bg-gradient-to-br from-gray-100 to-gray-50\" />\r\n                          )}\r\n                          <div className=\"p-2 space-y-1 flex-1 flex flex-col\">\r\n                            <h3 className=\"font-bold text-xs\" style={{ color: \"var(--primary-dark)\" }}>\r\n                              {product.name}\r\n                            </h3>\r\n                            <p className=\"text-xs text-gray-600 line-clamp-1\">{product.description || \"-\"}</p>\r\n                            <div className=\"flex items-center justify-between mt-auto pt-2\">\r\n                              <div>\r\n                                <p className=\"text-xs text-gray-500\">Precio</p>\r\n                                <p className=\"text-sm font-bold\" style={{ color: \"var(--accent-turquoise)\" }}>\r\n                                  {formatPriceWithCurrency(product.price)}\r\n                                </p>\r\n                              </div>\r\n                              <div>\r\n                                <p className=\"text-xs text-gray-500\">Stock</p>\r\n                                <p className=\"text-sm font-bold\">{product.stock}</p>\r\n                              </div>\r\n                            </div>\r\n                            <div className=\"space-y-1 text-xs\">\r\n                              <p style={{ color: \"var(--primary-dark)\" }}>\r\n                                Categor√≠a: {categoriesMap.get(product.category) || product.category}\r\n                              </p>\r\n                              {product.subcategory && (\r\n                                <p style={{ color: \"var(--primary-dark)\" }}>\r\n                                  Marca: {getSubcategoryName(product.subcategory)}\r\n                                </p>\r\n                              )}\r\n                              {product.sku && (\r\n                                <p style={{ color: \"var(--primary-dark)\" }}>\r\n                                  SKU: {product.sku}\r\n                                </p>\r\n                              )}\r\n                              {product.details && (\r\n                                <p style={{ color: \"var(--primary-dark)\" }} className=\"line-clamp-2\">\r\n                                  Detalles: {product.details}\r\n                                </p>\r\n                              )}\r\n                            </div>\r\n                            <div className=\"flex gap-1 pt-2\">\r\n                              <button\r\n                                onClick={() => {\r\n                                  setEditingProduct(product)\r\n                                  setShowForm(true)\r\n                                }}\r\n                                className=\"flex-1 px-2 py-1 bg-blue-500 text-white rounded text-xs hover:bg-blue-600 transition-colors\"\r\n                              >\r\n                                Editar\r\n                              </button>\r\n                              <button\r\n                                onClick={() => handleDeleteProduct(product.id)}\r\n                                className=\"flex-1 px-2 py-1 bg-red-500 text-white rounded text-xs hover:bg-red-600 transition-colors\"\r\n                              >\r\n                                Eliminar\r\n                              </button>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n\r\n                    {/* Separador de categor√≠a (no mostrar en la √∫ltima) */}\r\n                    {index < categorySections.length - 1 && (\r\n                      <div className=\"my-8 border-t-2\" style={{ borderColor: \"#d4d4d4\" }} />\r\n                    )}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )\r\n          } else {\r\n            // Para \"Fuera de Stock\" y categor√≠a espec√≠fica\r\n            // Si es \"Fuera de Stock\", agrupar por categor√≠a\r\n            if (selectedCategory === \"out-of-stock\") {\r\n              const groupedByCategory = new Map<string, Product[]>()\r\n              \r\n              filteredProducts.forEach((product) => {\r\n                const categoryName = categoriesMap.get(product.category) || \"Sin categor√≠a\"\r\n                if (!groupedByCategory.has(categoryName)) {\r\n                  groupedByCategory.set(categoryName, [])\r\n                }\r\n                groupedByCategory.get(categoryName)!.push(product)\r\n              })\r\n\r\n              // Convertir a array ordenado alfab√©ticamente y ordenar productos por precio\r\n              const categorySections = Array.from(groupedByCategory.entries())\r\n                .sort((a, b) => a[0].localeCompare(b[0]))\r\n                .map(([categoryName, prods]) => [\r\n                  categoryName,\r\n                  [...prods].sort((a, b) => (a.price || 0) - (b.price || 0))\r\n                ]) as [string, Product[]][]\r\n\r\n              return (\r\n                <div className=\"col-span-full space-y-8\">\r\n                  {categorySections.map(([categoryName, categoryProducts], index) => (\r\n                    <div key={categoryName}>\r\n                      {/* Encabezado de categor√≠a */}\r\n                      <h3 \r\n                        className=\"text-lg font-bold mb-4 pb-2\" \r\n                        style={{ color: \"var(--primary-dark)\" }}\r\n                      >\r\n                        {categoryName}\r\n                      </h3>\r\n\r\n                      {/* Grid de productos */}\r\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-3\">\r\n                        {categoryProducts.map((product) => (\r\n                          <div key={product.id} className=\"bg-white rounded-lg shadow-md overflow-hidden flex flex-col h-full hover:shadow-lg transition-shadow\">\r\n                            {product.image && (\r\n                              <img src={product.image || \"/placeholder.svg\"} alt={product.name} className=\"w-full h-20 object-contain p-1 bg-gradient-to-br from-gray-100 to-gray-50\" />\r\n                            )}\r\n                            <div className=\"p-2 space-y-1 flex-1 flex flex-col\">\r\n                              <h3 className=\"font-bold text-xs\" style={{ color: \"var(--primary-dark)\" }}>\r\n                                {product.name}\r\n                              </h3>\r\n                              <p className=\"text-xs text-gray-600 line-clamp-1\">{product.description || \"-\"}</p>\r\n                              <div className=\"flex items-center justify-between mt-auto pt-2\">\r\n                                <div>\r\n                                  <p className=\"text-xs text-gray-500\">Precio</p>\r\n                                  <p className=\"text-sm font-bold\" style={{ color: \"var(--accent-turquoise)\" }}>\r\n                                    {formatPriceWithCurrency(product.price)}\r\n                                  </p>\r\n                                </div>\r\n                                <div>\r\n                                  <p className=\"text-xs text-gray-500\">Stock</p>\r\n                                  <p className=\"text-sm font-bold\">{product.stock}</p>\r\n                                </div>\r\n                              </div>\r\n                              <div className=\"space-y-1 text-xs\">\r\n                                <p style={{ color: \"var(--primary-dark)\" }}>\r\n                                  Categor√≠a: {categoriesMap.get(product.category) || product.category}\r\n                                </p>\r\n                                {product.subcategory && (\r\n                                  <p style={{ color: \"var(--primary-dark)\" }}>\r\n                                    Marca: {getSubcategoryName(product.subcategory)}\r\n                                  </p>\r\n                                )}\r\n                                {product.sku && (\r\n                                  <p style={{ color: \"var(--primary-dark)\" }}>\r\n                                    SKU: {product.sku}\r\n                                  </p>\r\n                                )}\r\n                                {product.details && (\r\n                                  <p style={{ color: \"var(--primary-dark)\" }} className=\"line-clamp-2\">\r\n                                    Detalles: {product.details}\r\n                                  </p>\r\n                                )}\r\n                              </div>\r\n                              <div className=\"flex gap-1 pt-2\">\r\n                                <button\r\n                                  onClick={() => {\r\n                                    setEditingProduct(product)\r\n                                    setShowForm(true)\r\n                                  }}\r\n                                  className=\"flex-1 px-2 py-1 bg-blue-500 text-white rounded text-xs hover:bg-blue-600 transition-colors\"\r\n                                >\r\n                                  Editar\r\n                                </button>\r\n                                <button\r\n                                  onClick={() => handleDeleteProduct(product.id)}\r\n                                  className=\"flex-1 px-2 py-1 bg-red-500 text-white rounded text-xs hover:bg-red-600 transition-colors\"\r\n                                >\r\n                                  Eliminar\r\n                                </button>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n\r\n                      {/* Separador de categor√≠a (no mostrar en la √∫ltima) */}\r\n                      {index < categorySections.length - 1 && (\r\n                        <div className=\"my-8 border-t-2\" style={{ borderColor: \"#d4d4d4\" }} />\r\n                      )}\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )\r\n            } else {\r\n              // Para categor√≠a espec√≠fica, solo ordenar por precio\r\n              const sortedProducts = [...filteredProducts].sort((a, b) => (a.price || 0) - (b.price || 0))\r\n              \r\n              return sortedProducts.map((product) => (\r\n                <div key={product.id} className=\"bg-white rounded-lg shadow-md overflow-hidden flex flex-col h-full hover:shadow-lg transition-shadow\">\r\n                  {product.image && (\r\n                    <img src={product.image || \"/placeholder.svg\"} alt={product.name} className=\"w-full h-20 object-contain p-1 bg-gradient-to-br from-gray-100 to-gray-50\" />\r\n                  )}\r\n                  <div className=\"p-2 space-y-1 flex-1 flex flex-col\">\r\n                    <h3 className=\"font-bold text-xs\" style={{ color: \"var(--primary-dark)\" }}>\r\n                      {product.name}\r\n                    </h3>\r\n                    <p className=\"text-xs text-gray-600 line-clamp-1\">{product.description || \"-\"}</p>\r\n                    <div className=\"flex items-center justify-between mt-auto pt-2\">\r\n                      <div>\r\n                        <p className=\"text-xs text-gray-500\">Precio</p>\r\n                        <p className=\"text-sm font-bold\" style={{ color: \"var(--accent-turquoise)\" }}>\r\n                          {formatPriceWithCurrency(product.price)}\r\n                        </p>\r\n                      </div>\r\n                      <div>\r\n                        <p className=\"text-xs text-gray-500\">Stock</p>\r\n                        <p className=\"text-sm font-bold\">{product.stock}</p>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"space-y-1 text-xs\">\r\n                      <p style={{ color: \"var(--primary-dark)\" }}>\r\n                        Categor√≠a: {categoriesMap.get(product.category) || product.category}\r\n                      </p>\r\n                      {product.subcategory && (\r\n                        <p style={{ color: \"var(--primary-dark)\" }}>\r\n                          Marca: {getSubcategoryName(product.subcategory)}\r\n                        </p>\r\n                      )}\r\n                      {product.sku && (\r\n                        <p style={{ color: \"var(--primary-dark)\" }}>\r\n                          SKU: {product.sku}\r\n                        </p>\r\n                      )}\r\n                      {product.details && (\r\n                        <p style={{ color: \"var(--primary-dark)\" }} className=\"line-clamp-2\">\r\n                          Detalles: {product.details}\r\n                        </p>\r\n                      )}\r\n                    </div>\r\n                    <div className=\"flex gap-1 pt-2\">\r\n                      <button\r\n                        onClick={() => {\r\n                          setEditingProduct(product)\r\n                          setShowForm(true)\r\n                        }}\r\n                        className=\"flex-1 px-2 py-1 bg-blue-500 text-white rounded text-xs hover:bg-blue-600 transition-colors\"\r\n                      >\r\n                        Editar\r\n                      </button>\r\n                      <button\r\n                        onClick={() => handleDeleteProduct(product.id)}\r\n                        className=\"flex-1 px-2 py-1 bg-red-500 text-white rounded text-xs hover:bg-red-600 transition-colors\"\r\n                      >\r\n                        Eliminar\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))\r\n            }\r\n          }\r\n        })()}\r\n      </div>\r\n\r\n      {products.filter((product) => {\r\n        if (selectedCategory === \"all\") return true\r\n        if (selectedCategory === \"out-of-stock\") return product.stock === 0\r\n        return product.category === selectedCategory\r\n      }).length === 0 && (\r\n        <div className=\"text-center py-12 text-gray-500\">\r\n          {products.length === 0 ? \"No hay productos a√∫n\" : \"No hay productos en esta categor√≠a\"}\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3835, "column": 0}, "map": {"version":3,"sources":["file:///D:/ubatech/lib/services/adminService.ts"],"sourcesContent":["import {\r\n  getAuth,\r\n  createUserWithEmailAndPassword,\r\n  signOut,\r\n  signInWithEmailAndPassword,\r\n  AuthError,\r\n} from \"firebase/auth\"\r\nimport {\r\n  collection,\r\n  doc,\r\n  setDoc,\r\n  getDoc,\r\n  getDocs,\r\n  query,\r\n  where,\r\n  deleteDoc,\r\n  Timestamp,\r\n} from \"firebase/firestore\"\r\nimport { getDb } from \"@/lib/firebase\"\r\nimport { app } from \"@/lib/firebase\"\r\n\r\nexport interface AdminUser {\r\n  id?: string\r\n  email: string\r\n  role: string\r\n  createdAt: string\r\n  updatedAt?: string\r\n  status?: string\r\n}\r\n\r\n/**\r\n * Servicio para manejar operaciones de administradores\r\n */\r\nexport const adminService = {\r\n  /**\r\n   * Crear un nuevo administrador\r\n   * @param email Email del nuevo administrador\r\n   * @param password Contrase√±a del nuevo administrador\r\n   * @param currentUserEmail Email del usuario actual (para auditor√≠a)\r\n   */\r\n  async createAdmin(\r\n    email: string,\r\n    password: string,\r\n    currentUserEmail: string\r\n  ): Promise<{\r\n    success: boolean\r\n    message: string\r\n    uid?: string\r\n  }> {\r\n    let userCreated = false\r\n    let userUid = \"\"\r\n\r\n    try {\r\n      // Validar que el email sea v√°lido\r\n      if (!email || !password) {\r\n        return {\r\n          success: false,\r\n          message: \"Email y contrase√±a son requeridos\",\r\n        }\r\n      }\r\n\r\n      if (password.length < 6) {\r\n        return {\r\n          success: false,\r\n          message: \"La contrase√±a debe tener al menos 6 caracteres\",\r\n        }\r\n      }\r\n\r\n      // Verificar que el email no exista en adminUsers\r\n      const db = getDb()\r\n      const existingQuery = query(\r\n        collection(db, \"adminUsers\"),\r\n        where(\"email\", \"==\", email)\r\n      )\r\n      const existingDocs = await getDocs(existingQuery)\r\n\r\n      if (existingDocs.size > 0) {\r\n        return {\r\n          success: false,\r\n          message: \"Este email ya existe como administrador\",\r\n        }\r\n      }\r\n\r\n      // Crear usuario en Firebase Authentication\r\n      const auth = getAuth(app)\r\n      const userCredential = await createUserWithEmailAndPassword(\r\n        auth,\r\n        email,\r\n        password\r\n      )\r\n\r\n      userUid = userCredential.user.uid\r\n      userCreated = true\r\n\r\n      console.log(\"‚úÖ Usuario creado en Firebase Auth:\", userUid)\r\n\r\n      // Esperar un momento para asegurar que el usuario est√© completamente creado\r\n      await new Promise((resolve) => setTimeout(resolve, 500))\r\n\r\n      // Guardar informaci√≥n del admin en Firestore\r\n      const adminRef = doc(db, \"adminUsers\", userUid)\r\n      const adminData: AdminUser = {\r\n        id: userUid,\r\n        email: email,\r\n        role: \"admin\",\r\n        createdAt: new Date().toISOString(),\r\n        updatedAt: new Date().toISOString(),\r\n        status: \"active\",\r\n      }\r\n\r\n      await setDoc(adminRef, adminData)\r\n\r\n      console.log(\"‚úÖ Administrador guardado en Firestore:\", userUid)\r\n\r\n      // Verificar que se guard√≥ correctamente\r\n      const verifyDoc = await getDoc(adminRef)\r\n      if (!verifyDoc.exists()) {\r\n        throw new Error(\"Error de verificaci√≥n: documento no se guard√≥\")\r\n      }\r\n\r\n      // Cerrar sesi√≥n del usuario reci√©n creado para mantener la sesi√≥n del super admin\r\n      try {\r\n        await signOut(auth)\r\n        // Volver a iniciar sesi√≥n con el super admin si es necesario\r\n        // Esto se maneja desde el componente\r\n      } catch (signOutError) {\r\n        console.warn(\"Error al cerrar sesi√≥n temporal:\", signOutError)\r\n      }\r\n\r\n      return {\r\n        success: true,\r\n        message: \"Administrador creado correctamente\",\r\n        uid: userUid,\r\n      }\r\n    } catch (error) {\r\n      const authError = error as AuthError\r\n\r\n      // Si el usuario fue creado pero Firestore fall√≥, eliminarlo de Auth\r\n      if (userCreated && userUid) {\r\n        try {\r\n          const auth = getAuth(app)\r\n          const userToDelete = auth.currentUser\r\n          if (userToDelete) {\r\n            await userToDelete.delete()\r\n            console.log(\"üóëÔ∏è Usuario eliminado de Firebase Auth por error en Firestore\")\r\n          }\r\n        } catch (deleteError) {\r\n          console.error(\"Error al eliminar usuario de Auth:\", deleteError)\r\n        }\r\n      }\r\n\r\n      let message = \"Error desconocido\"\r\n\r\n      if (authError.code === \"auth/email-already-in-use\") {\r\n        message = \"Este email ya est√° registrado en Firebase Authentication\"\r\n      } else if (authError.code === \"auth/weak-password\") {\r\n        message = \"La contrase√±a es muy d√©bil (m√≠nimo 6 caracteres)\"\r\n      } else if (authError.code === \"auth/invalid-email\") {\r\n        message = \"El email ingresado es inv√°lido\"\r\n      } else if (authError.code === \"permission-denied\") {\r\n        message = \"Permiso denegado: verifica las reglas de Firestore\"\r\n      } else {\r\n        message = authError.message || \"Error al crear administrador\"\r\n      }\r\n\r\n      console.error(\"‚ùå Error en adminService.createAdmin:\", authError)\r\n\r\n      return {\r\n        success: false,\r\n        message: message,\r\n      }\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Obtener todos los administradores\r\n   */\r\n  async getAllAdmins(): Promise<AdminUser[]> {\r\n    try {\r\n      const db = getDb()\r\n      const snapshot = await getDocs(collection(db, \"adminUsers\"))\r\n      return snapshot.docs.map((doc) => ({\r\n        id: doc.id,\r\n        ...doc.data(),\r\n      } as AdminUser))\r\n    } catch (error) {\r\n      console.error(\"Error obteniendo administradores:\", error)\r\n      return []\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Obtener administrador por email\r\n   */\r\n  async getAdminByEmail(email: string): Promise<AdminUser | null> {\r\n    try {\r\n      const db = getDb()\r\n      const q = query(collection(db, \"adminUsers\"), where(\"email\", \"==\", email))\r\n      const snapshot = await getDocs(q)\r\n\r\n      if (snapshot.docs.length > 0) {\r\n        const doc = snapshot.docs[0]\r\n        return {\r\n          id: doc.id,\r\n          ...doc.data(),\r\n        } as AdminUser\r\n      }\r\n\r\n      return null\r\n    } catch (error) {\r\n      console.error(\"Error buscando admin:\", error)\r\n      return null\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Eliminar administrador\r\n   */\r\n  async deleteAdmin(userId: string): Promise<{\r\n    success: boolean\r\n    message: string\r\n  }> {\r\n    try {\r\n      const db = getDb()\r\n      const adminRef = doc(db, \"adminUsers\", userId)\r\n\r\n      // Verificar que existe\r\n      const adminDoc = await getDoc(adminRef)\r\n      if (!adminDoc.exists()) {\r\n        return {\r\n          success: false,\r\n          message: \"Administrador no encontrado\",\r\n        }\r\n      }\r\n\r\n      // Eliminar documento\r\n      await deleteDoc(adminRef)\r\n\r\n      console.log(\"‚úÖ Administrador eliminado:\", userId)\r\n\r\n      return {\r\n        success: true,\r\n        message: \"Administrador eliminado correctamente\",\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error eliminando admin:\", error)\r\n      return {\r\n        success: false,\r\n        message: \"Error al eliminar administrador\",\r\n      }\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Actualizar rol de administrador\r\n   */\r\n  async updateAdminRole(\r\n    userId: string,\r\n    newRole: string\r\n  ): Promise<{\r\n    success: boolean\r\n    message: string\r\n  }> {\r\n    try {\r\n      const db = getDb()\r\n      const adminRef = doc(db, \"adminUsers\", userId)\r\n\r\n      await setDoc(\r\n        adminRef,\r\n        {\r\n          role: newRole,\r\n          updatedAt: new Date().toISOString(),\r\n        },\r\n        { merge: true }\r\n      )\r\n\r\n      return {\r\n        success: true,\r\n        message: \"Rol actualizado correctamente\",\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error actualizando rol:\", error)\r\n      return {\r\n        success: false,\r\n        message: \"Error al actualizar rol\",\r\n      }\r\n    }\r\n  },\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4046, "column": 0}, "map": {"version":3,"sources":["file:///D:/ubatech/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\nimport { twMerge } from 'tailwind-merge'\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,sKAAO,EAAC,IAAA,6IAAI,EAAC;AACtB","debugId":null}},
    {"offset": {"line": 4061, "column": 0}, "map": {"version":3,"sources":["file:///D:/ubatech/components/ui/button.tsx"],"sourcesContent":["import * as React from 'react'\r\nimport { Slot } from '@radix-ui/react-slot'\r\nimport { cva, type VariantProps } from 'class-variance-authority'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\r\n        destructive:\r\n          'bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\r\n        outline:\r\n          'border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50',\r\n        secondary:\r\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80',\r\n        ghost:\r\n          'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',\r\n        link: 'text-primary underline-offset-4 hover:underline',\r\n      },\r\n      size: {\r\n        default: 'h-9 px-4 py-2 has-[>svg]:px-3',\r\n        sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',\r\n        lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',\r\n        icon: 'size-9',\r\n        'icon-sm': 'size-8',\r\n        'icon-lg': 'size-10',\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: 'default',\r\n      size: 'default',\r\n    },\r\n  },\r\n)\r\n\r\nfunction Button({\r\n  className,\r\n  variant,\r\n  size,\r\n  asChild = false,\r\n  ...props\r\n}: React.ComponentProps<'button'> &\r\n  VariantProps<typeof buttonVariants> & {\r\n    asChild?: boolean\r\n  }) {\r\n  const Comp = asChild ? Slot : 'button'\r\n\r\n  return (\r\n    <Comp\r\n      data-slot=\"button\"\r\n      className={cn(buttonVariants({ variant, size, className }))}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Button, buttonVariants }\r\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,uKAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,wKAAI,GAAG;IAE9B,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 4120, "column": 0}, "map": {"version":3,"sources":["file:///D:/ubatech/components/ui/alert-dialog.tsx"],"sourcesContent":["'use client'\r\n\r\nimport * as React from 'react'\r\nimport * as AlertDialogPrimitive from '@radix-ui/react-alert-dialog'\r\n\r\nimport { cn } from '@/lib/utils'\r\nimport { buttonVariants } from '@/components/ui/button'\r\n\r\nfunction AlertDialog({\r\n  ...props\r\n}: React.ComponentProps<typeof AlertDialogPrimitive.Root>) {\r\n  return <AlertDialogPrimitive.Root data-slot=\"alert-dialog\" {...props} />\r\n}\r\n\r\nfunction AlertDialogTrigger({\r\n  ...props\r\n}: React.ComponentProps<typeof AlertDialogPrimitive.Trigger>) {\r\n  return (\r\n    <AlertDialogPrimitive.Trigger data-slot=\"alert-dialog-trigger\" {...props} />\r\n  )\r\n}\r\n\r\nfunction AlertDialogPortal({\r\n  ...props\r\n}: React.ComponentProps<typeof AlertDialogPrimitive.Portal>) {\r\n  return (\r\n    <AlertDialogPrimitive.Portal data-slot=\"alert-dialog-portal\" {...props} />\r\n  )\r\n}\r\n\r\nfunction AlertDialogOverlay({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof AlertDialogPrimitive.Overlay>) {\r\n  return (\r\n    <AlertDialogPrimitive.Overlay\r\n      data-slot=\"alert-dialog-overlay\"\r\n      className={cn(\r\n        'data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction AlertDialogContent({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof AlertDialogPrimitive.Content>) {\r\n  return (\r\n    <AlertDialogPortal>\r\n      <AlertDialogOverlay />\r\n      <AlertDialogPrimitive.Content\r\n        data-slot=\"alert-dialog-content\"\r\n        className={cn(\r\n          'bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg',\r\n          className,\r\n        )}\r\n        {...props}\r\n      />\r\n    </AlertDialogPortal>\r\n  )\r\n}\r\n\r\nfunction AlertDialogHeader({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"alert-dialog-header\"\r\n      className={cn('flex flex-col gap-2 text-center sm:text-left', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction AlertDialogFooter({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"alert-dialog-footer\"\r\n      className={cn(\r\n        'flex flex-col-reverse gap-2 sm:flex-row sm:justify-end',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction AlertDialogTitle({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof AlertDialogPrimitive.Title>) {\r\n  return (\r\n    <AlertDialogPrimitive.Title\r\n      data-slot=\"alert-dialog-title\"\r\n      className={cn('text-lg font-semibold', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction AlertDialogDescription({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof AlertDialogPrimitive.Description>) {\r\n  return (\r\n    <AlertDialogPrimitive.Description\r\n      data-slot=\"alert-dialog-description\"\r\n      className={cn('text-muted-foreground text-sm', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction AlertDialogAction({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof AlertDialogPrimitive.Action>) {\r\n  return (\r\n    <AlertDialogPrimitive.Action\r\n      className={cn(buttonVariants(), className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction AlertDialogCancel({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof AlertDialogPrimitive.Cancel>) {\r\n  return (\r\n    <AlertDialogPrimitive.Cancel\r\n      className={cn(buttonVariants({ variant: 'outline' }), className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport {\r\n  AlertDialog,\r\n  AlertDialogPortal,\r\n  AlertDialogOverlay,\r\n  AlertDialogTrigger,\r\n  AlertDialogContent,\r\n  AlertDialogHeader,\r\n  AlertDialogFooter,\r\n  AlertDialogTitle,\r\n  AlertDialogDescription,\r\n  AlertDialogAction,\r\n  AlertDialogCancel,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAGA;AAEA;AACA;AANA;;;;;AAQA,SAAS,YAAY,EACnB,GAAG,OACoD;IACvD,qBAAO,8OAAC,mLAAyB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AACtE;AAEA,SAAS,mBAAmB,EAC1B,GAAG,OACuD;IAC1D,qBACE,8OAAC,sLAA4B;QAAC,aAAU;QAAwB,GAAG,KAAK;;;;;;AAE5E;AAEA,SAAS,kBAAkB,EACzB,GAAG,OACsD;IACzD,qBACE,8OAAC,qLAA2B;QAAC,aAAU;QAAuB,GAAG,KAAK;;;;;;AAE1E;AAEA,SAAS,mBAAmB,EAC1B,SAAS,EACT,GAAG,OACuD;IAC1D,qBACE,8OAAC,sLAA4B;QAC3B,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,0JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,mBAAmB,EAC1B,SAAS,EACT,GAAG,OACuD;IAC1D,qBACE,8OAAC;;0BACC,8OAAC;;;;;0BACD,8OAAC,sLAA4B;gBAC3B,aAAU;gBACV,WAAW,IAAA,kHAAE,EACX,+WACA;gBAED,GAAG,KAAK;;;;;;;;;;;;AAIjB;AAEA,SAAS,kBAAkB,EACzB,SAAS,EACT,GAAG,OACyB;IAC5B,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,gDAAgD;QAC7D,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,kBAAkB,EACzB,SAAS,EACT,GAAG,OACyB;IAC5B,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,0DACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,iBAAiB,EACxB,SAAS,EACT,GAAG,OACqD;IACxD,qBACE,8OAAC,oLAA0B;QACzB,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,yBAAyB;QACtC,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,uBAAuB,EAC9B,SAAS,EACT,GAAG,OAC2D;IAC9D,qBACE,8OAAC,0LAAgC;QAC/B,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,kBAAkB,EACzB,SAAS,EACT,GAAG,OACsD;IACzD,qBACE,8OAAC,qLAA2B;QAC1B,WAAW,IAAA,kHAAE,EAAC,IAAA,6IAAc,KAAI;QAC/B,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,kBAAkB,EACzB,SAAS,EACT,GAAG,OACsD;IACzD,qBACE,8OAAC,qLAA2B;QAC1B,WAAW,IAAA,kHAAE,EAAC,IAAA,6IAAc,EAAC;YAAE,SAAS;QAAU,IAAI;QACrD,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 4289, "column": 0}, "map": {"version":3,"sources":["file:///D:/ubatech/components/admin/users-manager.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport type React from \"react\"\r\nimport { useState, useEffect } from \"react\"\r\nimport { getAuth } from \"firebase/auth\"\r\nimport { adminService, type AdminUser } from \"@/lib/services/adminService\"\r\nimport {\r\n  AlertDialog,\r\n  AlertDialogAction,\r\n  AlertDialogCancel,\r\n  AlertDialogContent,\r\n  AlertDialogDescription,\r\n  AlertDialogTitle,\r\n  AlertDialogTrigger,\r\n} from \"@/components/ui/alert-dialog\"\r\n\r\nexport default function UsersManager() {\r\n  const [users, setUsers] = useState<AdminUser[]>([])\r\n  const [loading, setLoading] = useState(true)\r\n  const [searchTerm, setSearchTerm] = useState(\"\")\r\n  const [newEmail, setNewEmail] = useState(\"\")\r\n  const [newPassword, setNewPassword] = useState(\"\")\r\n  const [error, setError] = useState(\"\")\r\n  const [success, setSuccess] = useState(\"\")\r\n  const [isCreating, setIsCreating] = useState(false)\r\n\r\n  useEffect(() => {\r\n    fetchAdminUsers()\r\n  }, [])\r\n\r\n  const fetchAdminUsers = async () => {\r\n    setLoading(true)\r\n    try {\r\n      const admins = await adminService.getAllAdmins()\r\n      setUsers(admins)\r\n    } catch (error) {\r\n      console.error(\"Error al obtener administradores:\", error)\r\n      setError(\"Error al obtener administradores\")\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  const filteredUsers = users.filter((user) => user.email.toLowerCase().includes(searchTerm.toLowerCase()))\r\n\r\n  const handleDeleteAdmin = async (userId: string) => {\r\n    setError(\"\")\r\n    setSuccess(\"\")\r\n    try {\r\n      const result = await adminService.deleteAdmin(userId)\r\n      if (result.success) {\r\n        setUsers(users.filter((u) => u.id !== userId))\r\n        setSuccess(result.message)\r\n      } else {\r\n        setError(result.message)\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error al eliminar administrador:\", error)\r\n      setError(\"Error al eliminar administrador\")\r\n    }\r\n  }\r\n\r\n  const handleCreateAdmin = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    setError(\"\")\r\n    setSuccess(\"\")\r\n    setIsCreating(true)\r\n\r\n    try {\r\n      if (!newEmail || !newPassword) {\r\n        setError(\"Completa email y contrase√±a\")\r\n        setIsCreating(false)\r\n        return\r\n      }\r\n\r\n      // Validar email\r\n      const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\r\n      if (!emailRegex.test(newEmail)) {\r\n        setError(\"Email inv√°lido\")\r\n        setIsCreating(false)\r\n        return\r\n      }\r\n\r\n      // Validar contrase√±a (m√≠nimo 6 caracteres)\r\n      if (newPassword.length < 6) {\r\n        setError(\"La contrase√±a debe tener al menos 6 caracteres\")\r\n        setIsCreating(false)\r\n        return\r\n      }\r\n\r\n      // Obtener email del usuario actual para auditor√≠a\r\n      const auth = getAuth()\r\n      const currentUserEmail = auth.currentUser?.email || \"admin@system\"\r\n\r\n      // Crear administrador usando el servicio\r\n      const result = await adminService.createAdmin(newEmail, newPassword, currentUserEmail)\r\n\r\n      if (result.success) {\r\n        setSuccess(result.message)\r\n        setNewEmail(\"\")\r\n        setNewPassword(\"\")\r\n        // Recargar lista de administradores\r\n        await fetchAdminUsers()\r\n      } else {\r\n        setError(result.message)\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error inesperado:\", error)\r\n      setError(\"Error inesperado al crear administrador\")\r\n    } finally {\r\n      setIsCreating(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <h1 className=\"text-3xl font-bold\" style={{ color: \"var(--primary-dark)\" }}>\r\n        Administraci√≥n de Usuarios\r\n      </h1>\r\n\r\n      <div className=\"bg-white rounded-lg shadow p-6\">\r\n        <form onSubmit={handleCreateAdmin} className=\"space-y-4\">\r\n          <h2 className=\"text-xl font-semibold mb-4\" style={{ color: \"var(--primary-dark)\" }}>\r\n            Gesti√≥n de Administradores\r\n          </h2>\r\n          <p className=\"text-sm text-gray-600 mb-4\">Solo el super usuario puede crear y eliminar administradores</p>\r\n          <div className=\"flex gap-2\">\r\n            <input\r\n              type=\"email\"\r\n              placeholder=\"Email del nuevo administrador\"\r\n              value={newEmail}\r\n              onChange={(e) => setNewEmail(e.target.value)}\r\n              className=\"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 text-black bg-white\"\r\n              style={{ borderColor: \"var(--accent-turquoise)\" }}\r\n              disabled={isCreating}\r\n            />\r\n            <input\r\n              type=\"password\"\r\n              placeholder=\"Contrase√±a\"\r\n              value={newPassword}\r\n              onChange={(e) => setNewPassword(e.target.value)}\r\n              className=\"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 text-black bg-white\"\r\n              style={{ borderColor: \"var(--accent-turquoise)\" }}\r\n              disabled={isCreating}\r\n            />\r\n            <button\r\n              type=\"submit\"\r\n              className=\"px-6 py-2 text-white rounded-lg font-medium hover:opacity-90 transition-all disabled:opacity-50\"\r\n              style={{ backgroundColor: \"var(--accent-green)\" }}\r\n              disabled={loading || isCreating}\r\n            >\r\n              {isCreating ? \"Creando...\" : \"Crear administrador\"}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n\r\n      {error && (\r\n        <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative\">\r\n          <button\r\n            onClick={() => setError(\"\")}\r\n            className=\"absolute top-2 right-2 text-red-700 hover:text-red-900\"\r\n          >\r\n            √ó\r\n          </button>\r\n          {error}\r\n        </div>\r\n      )}\r\n\r\n      {success && (\r\n        <div className=\"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative\">\r\n          <button\r\n            onClick={() => setSuccess(\"\")}\r\n            className=\"absolute top-2 right-2 text-green-700 hover:text-green-900\"\r\n          >\r\n            √ó\r\n          </button>\r\n          {success}\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"bg-white rounded-lg shadow overflow-hidden\">\r\n        <div className=\"p-4\">\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Buscar por email...\"\r\n            value={searchTerm}\r\n            onChange={(e) => setSearchTerm(e.target.value)}\r\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 text-black\"\r\n            style={{ borderColor: \"var(--accent-turquoise)\" }}\r\n          />\r\n        </div>\r\n        {loading ? (\r\n          <div className=\"flex justify-center py-8\">\r\n            <div className=\"w-8 h-8 border-4 border-gray-300 border-t-transparent rounded-full animate-spin\" style={{ borderTopColor: \"var(--primary)\" }} />\r\n          </div>\r\n        ) : (\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"w-full\">\r\n              <thead style={{ backgroundColor: \"var(--primary-dark)\" }}>\r\n                <tr>\r\n                  <th className=\"px-6 py-4 text-left font-semibold text-white\">\r\n                    Email\r\n                  </th>\r\n                  <th className=\"px-6 py-4 text-left font-semibold text-white\">\r\n                    Rol\r\n                  </th>\r\n                  <th className=\"px-6 py-4 text-left font-semibold text-white\">\r\n                    Fecha Registro\r\n                  </th>\r\n                  <th className=\"px-6 py-4 text-right font-semibold text-white\">\r\n                    Acciones\r\n                  </th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {filteredUsers.map((user) => (\r\n                  <tr key={user.id} className=\"border-t border-gray-200 hover:bg-gray-50\">\r\n                    <td className=\"px-6 py-4 text-black\">{user.email}</td>\r\n                    <td className=\"px-6 py-4 text-black\">{user.role}</td>\r\n                    <td className=\"px-6 py-4 text-black\">{new Date(user.createdAt).toLocaleDateString()}</td>\r\n                    <td className=\"px-6 py-4 text-right\">\r\n                      {user.role !== \"super\" && (\r\n                        <AlertDialog>\r\n                          <AlertDialogTrigger asChild>\r\n                            <button className=\"px-3 py-1 bg-red-500 text-white rounded text-sm hover:bg-red-600 transition-colors\">\r\n                              Eliminar\r\n                            </button>\r\n                          </AlertDialogTrigger>\r\n                          <AlertDialogContent>\r\n                            <AlertDialogTitle>¬øEliminar administrador?</AlertDialogTitle>\r\n                            <AlertDialogDescription>Esta acci√≥n no se puede deshacer. Se eliminar√° el usuario y todos sus datos.</AlertDialogDescription>\r\n                            <AlertDialogCancel>Cancelar</AlertDialogCancel>\r\n                            <AlertDialogAction onClick={() => user.id && handleDeleteAdmin(user.id)}>Eliminar</AlertDialogAction>\r\n                          </AlertDialogContent>\r\n                        </AlertDialog>\r\n                      )}\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        )}\r\n        {filteredUsers.length === 0 && !loading && <div className=\"text-center py-8 text-black\">No hay administradores registrados</div>}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4767, "column": 0}, "map": {"version":3,"sources":["file:///D:/ubatech/components/admin/orders-manager.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport type React from \"react\"\r\nimport { useState, useEffect } from \"react\"\r\nimport { getDb } from \"@/lib/firebase\"\r\nimport { collection, getDocs, updateDoc, doc } from \"firebase/firestore\"\r\nimport { formatPriceWithCurrency } from \"@/lib/format-price\"\r\n\r\ninterface Order {\r\n  id: string\r\n  customerName: string\r\n  email: string\r\n  total: number\r\n  status: \"pending\" | \"processing\" | \"completed\" | \"cancelled\"\r\n  createdAt: string\r\n  items: number\r\n}\r\n\r\nexport default function OrdersManager() {\r\n  const [orders, setOrders] = useState<Order[]>([])\r\n  const [loading, setLoading] = useState(true)\r\n  const [searchTerm, setSearchTerm] = useState(\"\")\r\n\r\n  useEffect(() => {\r\n    fetchOrders()\r\n  }, [])\r\n\r\n  const fetchOrders = async () => {\r\n    try {\r\n      const db = getDb()\r\n      const ordersSnapshot = await getDocs(collection(db, \"orders\"))\r\n      const ordersData = ordersSnapshot.docs.map((doc) => ({\r\n        id: doc.id,\r\n        ...doc.data(),\r\n      })) as Order[]\r\n      setOrders(ordersData)\r\n    } catch (error) {\r\n      console.error(\"Error fetching orders:\", error)\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  const filteredOrders = orders.filter((order) => order.id.toLowerCase().includes(searchTerm.toLowerCase()) || order.customerName.toLowerCase().includes(searchTerm.toLowerCase()))\r\n\r\n  const getStatusColor = (status: string) => {\r\n    switch (status) {\r\n      case \"completed\":\r\n        return \"bg-green-100 text-green-800\"\r\n      case \"processing\":\r\n        return \"bg-blue-100 text-blue-800\"\r\n      case \"pending\":\r\n        return \"bg-yellow-100 text-yellow-800\"\r\n      case \"cancelled\":\r\n        return \"bg-red-100 text-red-800\"\r\n      default:\r\n        return \"bg-gray-100 text-gray-800\"\r\n    }\r\n  }\r\n\r\n  const handleUpdateStatus = async (orderId: string, newStatus: string) => {\r\n    try {\r\n      const db = getDb()\r\n      await updateDoc(doc(db, \"orders\", orderId), { status: newStatus })\r\n      setOrders(orders.map((o) => (o.id === orderId ? { ...o, status: newStatus as Order[\"status\"] } : o)))\r\n    } catch (error) {\r\n      console.error(\"Error updating order:\", error)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <h1 className=\"text-3xl font-bold\" style={{ color: \"var(--primary-dark)\" }}>\r\n        Gesti√≥n de Pedidos\r\n      </h1>\r\n\r\n      <div className=\"bg-white rounded-lg shadow p-6\">\r\n        <h2 className=\"text-xl font-semibold mb-4\" style={{ color: \"var(--primary-dark)\" }}>\r\n          Todos los Pedidos\r\n        </h2>\r\n        <p className=\"text-sm text-gray-600 mb-4\">Administra y supervisa todos los pedidos de los clientes</p>\r\n        \r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Buscar por ID o cliente...\"\r\n          value={searchTerm}\r\n          onChange={(e) => setSearchTerm(e.target.value)}\r\n          className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 text-black bg-white mb-4\"\r\n          style={{ borderColor: \"var(--accent-turquoise)\" }}\r\n        />\r\n\r\n        {loading ? (\r\n          <div className=\"flex justify-center py-8\">\r\n            <div className=\"w-8 h-8 border-4 border-gray-300 border-t-transparent rounded-full animate-spin\" style={{ borderTopColor: \"var(--primary)\" }} />\r\n          </div>\r\n        ) : (\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"w-full\">\r\n              <thead style={{ backgroundColor: \"var(--primary-dark)\" }}>\r\n                <tr>\r\n                  <th className=\"px-6 py-4 text-left font-semibold text-white\">ID Pedido</th>\r\n                  <th className=\"px-6 py-4 text-left font-semibold text-white\">Cliente</th>\r\n                  <th className=\"px-6 py-4 text-left font-semibold text-white\">Email</th>\r\n                  <th className=\"px-6 py-4 text-left font-semibold text-white\">Art√≠culos</th>\r\n                  <th className=\"px-6 py-4 text-left font-semibold text-white\">Total</th>\r\n                  <th className=\"px-6 py-4 text-left font-semibold text-white\">Estado</th>\r\n                  <th className=\"px-6 py-4 text-left font-semibold text-white\">Fecha</th>\r\n                  <th className=\"px-6 py-4 text-right font-semibold text-white\">Acciones</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {filteredOrders.map((order) => (\r\n                  <tr key={order.id} className=\"border-t border-gray-200 hover:bg-gray-50\">\r\n                    <td className=\"px-6 py-4 font-medium text-black\">{order.id}</td>\r\n                    <td className=\"px-6 py-4 text-black\">{order.customerName}</td>\r\n                    <td className=\"px-6 py-4 text-black\">{order.email}</td>\r\n                    <td className=\"px-6 py-4 text-black\">{order.items}</td>\r\n                    <td className=\"px-6 py-4 text-black\">{formatPriceWithCurrency(order.total)}</td>\r\n                    <td className=\"px-6 py-4\">\r\n                      <span className={`px-3 py-1 rounded-full text-sm font-medium ${getStatusColor(order.status)}`}>\r\n                        {order.status}\r\n                      </span>\r\n                    </td>\r\n                    <td className=\"px-6 py-4 text-black\">{new Date(order.createdAt).toLocaleDateString()}</td>\r\n                    <td className=\"px-6 py-4 text-right\">\r\n                      <select\r\n                        onChange={(e) => handleUpdateStatus(order.id, e.target.value)}\r\n                        value={order.status}\r\n                        className=\"text-sm border border-gray-300 rounded px-3 py-1 text-black focus:outline-none focus:ring-2\"\r\n                        style={{ borderColor: \"var(--accent-turquoise)\" }}\r\n                      >\r\n                        <option value=\"pending\">Pendiente</option>\r\n                        <option value=\"processing\">Procesando</option>\r\n                        <option value=\"completed\">Completado</option>\r\n                        <option value=\"cancelled\">Cancelado</option>\r\n                      </select>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        )}\r\n\r\n        {filteredOrders.length === 0 && !loading && <div className=\"text-center py-8 text-black\">No hay pedidos registrados</div>}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 5153, "column": 0}, "map": {"version":3,"sources":["file:///D:/ubatech/components/ui/card.tsx"],"sourcesContent":["import * as React from 'react'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nfunction Card({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card\"\r\n      className={cn(\r\n        'bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardHeader({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-header\"\r\n      className={cn(\r\n        '@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardTitle({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-title\"\r\n      className={cn('leading-none font-semibold', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardDescription({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-description\"\r\n      className={cn('text-muted-foreground text-sm', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardAction({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-action\"\r\n      className={cn(\r\n        'col-start-2 row-span-2 row-start-1 self-start justify-self-end',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardContent({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-content\"\r\n      className={cn('px-6', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardFooter({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-footer\"\r\n      className={cn('flex items-center px-6 [.border-t]:pt-6', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport {\r\n  Card,\r\n  CardHeader,\r\n  CardFooter,\r\n  CardTitle,\r\n  CardAction,\r\n  CardDescription,\r\n  CardContent,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,4JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 5255, "column": 0}, "map": {"version":3,"sources":["file:///D:/ubatech/hooks/use-platform-info.ts"],"sourcesContent":["import { useEffect, useState, useCallback } from \"react\"\r\nimport { getDb } from \"@/lib/firebase\"\r\nimport { collection, getDocs, onSnapshot, query } from \"firebase/firestore\"\r\n\r\nexport interface PlatformInfo {\r\n  version: string\r\n  lastUpdate: string\r\n  supportEmail: string\r\n  description: string\r\n}\r\n\r\nconst defaultPlatformInfo: PlatformInfo = {\r\n  version: \"1.0.0\",\r\n  lastUpdate: \"Diciembre 2025\",\r\n  supportEmail: \"support@ubatech.com\",\r\n  description: \"Plataforma de compras online\",\r\n}\r\n\r\nexport function usePlatformInfo() {\r\n  const [platformInfo, setPlatformInfo] = useState<PlatformInfo>(defaultPlatformInfo)\r\n  const [loading, setLoading] = useState(true)\r\n  const [error, setError] = useState<string | null>(null)\r\n\r\n  const reload = useCallback(async () => {\r\n    try {\r\n      setError(null)\r\n      const db = getDb()\r\n      const platformSnapshot = await getDocs(collection(db, \"platform_info\"))\r\n      \r\n      if (!platformSnapshot.empty) {\r\n        const data = platformSnapshot.docs[0].data() as PlatformInfo\r\n        setPlatformInfo({\r\n          version: data.version || defaultPlatformInfo.version,\r\n          lastUpdate: data.lastUpdate || defaultPlatformInfo.lastUpdate,\r\n          supportEmail: data.supportEmail || defaultPlatformInfo.supportEmail,\r\n          description: data.description || defaultPlatformInfo.description,\r\n        })\r\n        console.log(\"[Hook Platform] ‚úÖ Platform info cargada desde Firestore\")\r\n      } else {\r\n        console.warn(\"[Hook Platform] Colecci√≥n platform_info vac√≠a, usando valores por defecto\")\r\n        setPlatformInfo(defaultPlatformInfo)\r\n      }\r\n    } catch (error) {\r\n      console.error(\"[Hook Platform] Error cargando platform info:\", error)\r\n      setError(error instanceof Error ? error.message : \"Error desconocido\")\r\n      setPlatformInfo(defaultPlatformInfo)\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    // Cargar datos iniciales\r\n    reload()\r\n\r\n    // Opcional: Intentar configurar listener en tiempo real\r\n    let unsubscribe: (() => void) | null = null\r\n    try {\r\n      const db = getDb()\r\n      const platformQuery = query(collection(db, \"platform_info\"))\r\n      \r\n      unsubscribe = onSnapshot(\r\n        platformQuery,\r\n        (snapshot) => {\r\n          if (!snapshot.empty) {\r\n            const data = snapshot.docs[0].data() as PlatformInfo\r\n            setPlatformInfo({\r\n              version: data.version || defaultPlatformInfo.version,\r\n              lastUpdate: data.lastUpdate || defaultPlatformInfo.lastUpdate,\r\n              supportEmail: data.supportEmail || defaultPlatformInfo.supportEmail,\r\n              description: data.description || defaultPlatformInfo.description,\r\n            })\r\n            console.log(\"[Hook Platform] ‚úÖ Actualizado en tiempo real\")\r\n          }\r\n        },\r\n        (error) => {\r\n          console.warn(\"[Hook Platform] Error en listener tiempo real:\", error)\r\n          // Continuar con valores actuales\r\n        }\r\n      )\r\n    } catch (err) {\r\n      console.warn(\"[Hook Platform] No se pudo establecer listener:\", err)\r\n    }\r\n\r\n    const handleVisibilityChange = () => {\r\n      if (document.visibilityState === \"visible\") {\r\n        reload()\r\n      }\r\n    }\r\n\r\n    if (typeof window !== \"undefined\") {\r\n      document.addEventListener(\"visibilitychange\", handleVisibilityChange)\r\n    }\r\n\r\n    return () => {\r\n      if (unsubscribe) {\r\n        unsubscribe()\r\n      }\r\n      if (typeof window !== \"undefined\") {\r\n        document.removeEventListener(\"visibilitychange\", handleVisibilityChange)\r\n      }\r\n    }\r\n  }, [reload])\r\n\r\n  return { platformInfo, loading, error, reload }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AAAA;;;;AASA,MAAM,sBAAoC;IACxC,SAAS;IACT,YAAY;IACZ,cAAc;IACd,aAAa;AACf;AAEO,SAAS;IACd,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAe;IAC/D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAgB;IAElD,MAAM,SAAS,IAAA,oNAAW,EAAC;QACzB,IAAI;YACF,SAAS;YACT,MAAM,KAAK,IAAA,wHAAK;YAChB,MAAM,mBAAmB,MAAM,IAAA,4KAAO,EAAC,IAAA,+KAAU,EAAC,IAAI;YAEtD,IAAI,CAAC,iBAAiB,KAAK,EAAE;gBAC3B,MAAM,OAAO,iBAAiB,IAAI,CAAC,EAAE,CAAC,IAAI;gBAC1C,gBAAgB;oBACd,SAAS,KAAK,OAAO,IAAI,oBAAoB,OAAO;oBACpD,YAAY,KAAK,UAAU,IAAI,oBAAoB,UAAU;oBAC7D,cAAc,KAAK,YAAY,IAAI,oBAAoB,YAAY;oBACnE,aAAa,KAAK,WAAW,IAAI,oBAAoB,WAAW;gBAClE;gBACA,QAAQ,GAAG,CAAC;YACd,OAAO;gBACL,QAAQ,IAAI,CAAC;gBACb,gBAAgB;YAClB;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,iDAAiD;YAC/D,SAAS,iBAAiB,QAAQ,MAAM,OAAO,GAAG;YAClD,gBAAgB;QAClB,SAAU;YACR,WAAW;QACb;IACF,GAAG,EAAE;IAEL,IAAA,kNAAS,EAAC;QACR,yBAAyB;QACzB;QAEA,wDAAwD;QACxD,IAAI,cAAmC;QACvC,IAAI;YACF,MAAM,KAAK,IAAA,wHAAK;YAChB,MAAM,gBAAgB,IAAA,0KAAK,EAAC,IAAA,+KAAU,EAAC,IAAI;YAE3C,cAAc,IAAA,+KAAU,EACtB,eACA,CAAC;gBACC,IAAI,CAAC,SAAS,KAAK,EAAE;oBACnB,MAAM,OAAO,SAAS,IAAI,CAAC,EAAE,CAAC,IAAI;oBAClC,gBAAgB;wBACd,SAAS,KAAK,OAAO,IAAI,oBAAoB,OAAO;wBACpD,YAAY,KAAK,UAAU,IAAI,oBAAoB,UAAU;wBAC7D,cAAc,KAAK,YAAY,IAAI,oBAAoB,YAAY;wBACnE,aAAa,KAAK,WAAW,IAAI,oBAAoB,WAAW;oBAClE;oBACA,QAAQ,GAAG,CAAC;gBACd;YACF,GACA,CAAC;gBACC,QAAQ,IAAI,CAAC,kDAAkD;YAC/D,iCAAiC;YACnC;QAEJ,EAAE,OAAO,KAAK;YACZ,QAAQ,IAAI,CAAC,mDAAmD;QAClE;QAEA,MAAM,yBAAyB;YAC7B,IAAI,SAAS,eAAe,KAAK,WAAW;gBAC1C;YACF;QACF;QAEA;;QAIA,OAAO;YACL,IAAI,aAAa;gBACf;YACF;YACA;;QAGF;IACF,GAAG;QAAC;KAAO;IAEX,OAAO;QAAE;QAAc;QAAS;QAAO;IAAO;AAChD","debugId":null}},
    {"offset": {"line": 5356, "column": 0}, "map": {"version":3,"sources":["file:///D:/ubatech/components/admin/platform-info-panel.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { usePlatformInfo } from \"@/hooks/use-platform-info\"\r\n\r\nexport default function PlatformInfoPanel() {\r\n  const { platformInfo, loading } = usePlatformInfo()\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"bg-white rounded-lg shadow p-6 animate-pulse\">\r\n        <div className=\"h-6 bg-gray-200 rounded w-1/3 mb-4\"></div>\r\n        <div className=\"space-y-3\">\r\n          <div className=\"h-4 bg-gray-200 rounded\"></div>\r\n          <div className=\"h-4 bg-gray-200 rounded\"></div>\r\n          <div className=\"h-4 bg-gray-200 rounded\"></div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-lg shadow p-6\">\r\n      <h2 className=\"text-xl font-semibold mb-4\" style={{ color: \"var(--primary-dark)\" }}>\r\n        Informaci√≥n de la Plataforma\r\n      </h2>\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n        <div>\r\n          <h3 className=\"text-sm font-medium text-gray-700 mb-1\">Versi√≥n</h3>\r\n          <p className=\"text-lg font-bold\" style={{ color: \"var(--accent-purple)\" }}>\r\n            {platformInfo.version}\r\n          </p>\r\n        </div>\r\n        \r\n        <div>\r\n          <h3 className=\"text-sm font-medium text-gray-700 mb-1\">√öltima Actualizaci√≥n</h3>\r\n          <p className=\"text-lg font-bold\" style={{ color: \"var(--accent-turquoise)\" }}>\r\n            {platformInfo.lastUpdate}\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"md:col-span-2\">\r\n          <h3 className=\"text-sm font-medium text-gray-700 mb-1\">Email de Soporte</h3>\r\n          <a \r\n            href={`mailto:${platformInfo.supportEmail}`}\r\n            className=\"text-lg font-semibold hover:opacity-70 transition-opacity\"\r\n            style={{ color: \"var(--accent-green)\" }}\r\n          >\r\n            {platformInfo.supportEmail}\r\n          </a>\r\n        </div>\r\n\r\n        <div className=\"md:col-span-2\">\r\n          <h3 className=\"text-sm font-medium text-gray-700 mb-1\">Descripci√≥n</h3>\r\n          <p className=\"text-gray-600\">\r\n            {platformInfo.description}\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAIe,SAAS;IACtB,MAAM,EAAE,YAAY,EAAE,OAAO,EAAE,GAAG,IAAA,mJAAe;IAEjD,IAAI,SAAS;QACX,qBACE,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAI,WAAU;;;;;;8BACf,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;;;;;sCACf,8OAAC;4BAAI,WAAU;;;;;;sCACf,8OAAC;4BAAI,WAAU;;;;;;;;;;;;;;;;;;IAIvB;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;gBAA6B,OAAO;oBAAE,OAAO;gBAAsB;0BAAG;;;;;;0BAGpF,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;;0CACC,8OAAC;gCAAG,WAAU;0CAAyC;;;;;;0CACvD,8OAAC;gCAAE,WAAU;gCAAoB,OAAO;oCAAE,OAAO;gCAAuB;0CACrE,aAAa,OAAO;;;;;;;;;;;;kCAIzB,8OAAC;;0CACC,8OAAC;gCAAG,WAAU;0CAAyC;;;;;;0CACvD,8OAAC;gCAAE,WAAU;gCAAoB,OAAO;oCAAE,OAAO;gCAA0B;0CACxE,aAAa,UAAU;;;;;;;;;;;;kCAI5B,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAG,WAAU;0CAAyC;;;;;;0CACvD,8OAAC;gCACC,MAAM,CAAC,OAAO,EAAE,aAAa,YAAY,EAAE;gCAC3C,WAAU;gCACV,OAAO;oCAAE,OAAO;gCAAsB;0CAErC,aAAa,YAAY;;;;;;;;;;;;kCAI9B,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAG,WAAU;0CAAyC;;;;;;0CACvD,8OAAC;gCAAE,WAAU;0CACV,aAAa,WAAW;;;;;;;;;;;;;;;;;;;;;;;;AAMrC","debugId":null}},
    {"offset": {"line": 5557, "column": 0}, "map": {"version":3,"sources":["file:///D:/ubatech/components/admin/analytics.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState, useEffect } from \"react\"\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\r\nimport { LineChart, Line, BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer, PieChart, Pie, Cell } from \"recharts\"\r\nimport PlatformInfoPanel from \"./platform-info-panel\"\r\nimport { formatPriceWithCurrency } from \"@/lib/format-price\"\r\n\r\ninterface DashboardStats {\r\n  totalSales: number\r\n  totalOrders: number\r\n  totalUsers: number\r\n  totalProducts: number\r\n  monthlySales: Array<{ month: string; sales: number; orders: number }>\r\n  topProducts: Array<{ name: string; sales: number }>\r\n  ordersByStatus: Array<{ status: string; count: number }>\r\n}\r\n\r\nconst COLORS = [\"#3b82f6\", \"#10b981\", \"#f59e0b\", \"#ef4444\"]\r\n\r\nexport default function Analytics() {\r\n  const [stats, setStats] = useState<DashboardStats | null>(null)\r\n  const [loading, setLoading] = useState(true)\r\n\r\n  useEffect(() => {\r\n    fetchStats()\r\n  }, [])\r\n\r\n  const fetchStats = async () => {\r\n    try {\r\n      const response = await fetch(\"/api/admin/analytics\")\r\n      if (response.ok) {\r\n        const data = await response.json()\r\n        setStats(data)\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error fetching analytics:\", error)\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex justify-center py-12\">\r\n        <div className=\"w-8 h-8 border-4 border-gray-300 border-t-transparent rounded-full animate-spin\" style={{ borderTopColor: \"var(--primary)\" }} />\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (!stats) {\r\n    return <div className=\"text-center text-gray-500\">Error al cargar las estad√≠sticas</div>\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <h1 className=\"text-3xl font-bold\" style={{ color: \"var(--primary-dark)\" }}>Dashboard de An√°lisis</h1>\r\n      {/* Estad√≠sticas principales */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n        <Card>\r\n          <CardHeader className=\"pb-3\">\r\n            <CardTitle className=\"text-sm font-medium\">Ventas Totales</CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-2xl font-bold\">{formatPriceWithCurrency(stats.totalSales)}</div>\r\n            <p className=\"text-xs text-gray-500 mt-1\">Todos los tiempos</p>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card>\r\n          <CardHeader className=\"pb-3\">\r\n            <CardTitle className=\"text-sm font-medium\">Pedidos</CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-2xl font-bold\">{stats.totalOrders}</div>\r\n            <p className=\"text-xs text-gray-500 mt-1\">Total de pedidos</p>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card>\r\n          <CardHeader className=\"pb-3\">\r\n            <CardTitle className=\"text-sm font-medium\">Usuarios</CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-2xl font-bold\">{stats.totalUsers}</div>\r\n            <p className=\"text-xs text-gray-500 mt-1\">Clientes registrados</p>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        <Card>\r\n          <CardHeader className=\"pb-3\">\r\n            <CardTitle className=\"text-sm font-medium\">Productos</CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-2xl font-bold\">{stats.totalProducts}</div>\r\n            <p className=\"text-xs text-gray-500 mt-1\">En el cat√°logo</p>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Gr√°ficos */}\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n        {/* Ventas mensuales */}\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle>Ventas Mensuales</CardTitle>\r\n            <CardDescription>√öltimos 6 meses</CardDescription>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <ResponsiveContainer width=\"100%\" height={300}>\r\n              <LineChart data={stats.monthlySales}>\r\n                <CartesianGrid strokeDasharray=\"3 3\" />\r\n                <XAxis dataKey=\"month\" />\r\n                <YAxis />\r\n                <Tooltip />\r\n                <Legend />\r\n                <Line type=\"monotone\" dataKey=\"sales\" stroke=\"#3b82f6\" name=\"Ventas ($)\" />\r\n                <Line type=\"monotone\" dataKey=\"orders\" stroke=\"#10b981\" name=\"Pedidos\" />\r\n              </LineChart>\r\n            </ResponsiveContainer>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* Productos m√°s vendidos */}\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle>Productos M√°s Vendidos</CardTitle>\r\n            <CardDescription>Top 5 productos</CardDescription>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <ResponsiveContainer width=\"100%\" height={300}>\r\n              <BarChart data={stats.topProducts}>\r\n                <CartesianGrid strokeDasharray=\"3 3\" />\r\n                <XAxis dataKey=\"name\" />\r\n                <YAxis />\r\n                <Tooltip />\r\n                <Bar dataKey=\"sales\" fill=\"#3b82f6\" />\r\n              </BarChart>\r\n            </ResponsiveContainer>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* Estado de pedidos */}\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle>Estado de Pedidos</CardTitle>\r\n            <CardDescription>Distribuci√≥n por estado</CardDescription>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <ResponsiveContainer width=\"100%\" height={300}>\r\n              <PieChart>\r\n                <Pie data={stats.ordersByStatus} cx=\"50%\" cy=\"50%\" labelLine={false} label={({ name, value }) => `${name}: ${value}`} outerRadius={100} fill=\"#8884d8\" dataKey=\"count\">\r\n                  {stats.ordersByStatus.map((entry, index) => (\r\n                    <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\r\n                  ))}\r\n                </Pie>\r\n                <Tooltip />\r\n              </PieChart>\r\n            </ResponsiveContainer>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Informaci√≥n de la Plataforma */}\r\n      <PlatformInfoPanel />\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 6141, "column": 0}, "map": {"version":3,"sources":["file:///D:/ubatech/lib/public-site-status.ts"],"sourcesContent":["import { getDb } from \"@/lib/firebase\"\r\nimport { doc, getDoc, setDoc, updateDoc } from \"firebase/firestore\"\r\n\r\nconst STATUS_DOC_ID = \"public_site_status\"\r\nconst SETTINGS_COLLECTION = \"settings\"\r\n\r\nexport interface PublicSiteStatus {\r\n  isPublic: boolean\r\n  lastUpdatedAt: number\r\n  lastUpdatedBy: string\r\n}\r\n\r\n/**\r\n * Obtiene el estado actual de la p√°gina p√∫blica\r\n */\r\nexport async function getPublicSiteStatus(): Promise<PublicSiteStatus> {\r\n  try {\r\n    const db = getDb()\r\n    const docRef = doc(db, SETTINGS_COLLECTION, STATUS_DOC_ID)\r\n    const docSnap = await getDoc(docRef)\r\n\r\n    if (docSnap.exists()) {\r\n      return docSnap.data() as PublicSiteStatus\r\n    }\r\n\r\n    // Si no existe, crear con valor por defecto (p√∫blica habilitada)\r\n    const defaultStatus: PublicSiteStatus = {\r\n      isPublic: true,\r\n      lastUpdatedAt: Date.now(),\r\n      lastUpdatedBy: \"system\",\r\n    }\r\n    await setDoc(docRef, defaultStatus)\r\n    return defaultStatus\r\n  } catch (error) {\r\n    console.error(\"Error getting public site status:\", error)\r\n    // Por defecto, permitir que la p√°gina sea p√∫blica en caso de error\r\n    return {\r\n      isPublic: true,\r\n      lastUpdatedAt: Date.now(),\r\n      lastUpdatedBy: \"system\",\r\n    }\r\n  }\r\n}\r\n\r\nexport async function setPublicSiteStatus(\r\n  isPublic: boolean,\r\n  userId: string\r\n): Promise<void> {\r\n  try {\r\n    const db = getDb()\r\n    const docRef = doc(db, SETTINGS_COLLECTION, STATUS_DOC_ID)\r\n\r\n    const statusData = {\r\n      isPublic,\r\n      lastUpdatedAt: Date.now(),\r\n      lastUpdatedBy: userId,\r\n    }\r\n\r\n    // Intentar actualizar primero\r\n    try {\r\n      await updateDoc(docRef, statusData)\r\n    } catch (error: any) {\r\n      // Si el documento no existe, crearlo\r\n      if (error.code === \"not-found\") {\r\n        await setDoc(docRef, statusData)\r\n      } else {\r\n        throw error\r\n      }\r\n    }\r\n  } catch (error) {\r\n    console.error(\"Error setting public site status:\", error)\r\n    throw error\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AAAA;;;AAEA,MAAM,gBAAgB;AACtB,MAAM,sBAAsB;AAWrB,eAAe;IACpB,IAAI;QACF,MAAM,KAAK,IAAA,wHAAK;QAChB,MAAM,SAAS,IAAA,wKAAG,EAAC,IAAI,qBAAqB;QAC5C,MAAM,UAAU,MAAM,IAAA,2KAAM,EAAC;QAE7B,IAAI,QAAQ,MAAM,IAAI;YACpB,OAAO,QAAQ,IAAI;QACrB;QAEA,iEAAiE;QACjE,MAAM,gBAAkC;YACtC,UAAU;YACV,eAAe,KAAK,GAAG;YACvB,eAAe;QACjB;QACA,MAAM,IAAA,2KAAM,EAAC,QAAQ;QACrB,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,qCAAqC;QACnD,mEAAmE;QACnE,OAAO;YACL,UAAU;YACV,eAAe,KAAK,GAAG;YACvB,eAAe;QACjB;IACF;AACF;AAEO,eAAe,oBACpB,QAAiB,EACjB,MAAc;IAEd,IAAI;QACF,MAAM,KAAK,IAAA,wHAAK;QAChB,MAAM,SAAS,IAAA,wKAAG,EAAC,IAAI,qBAAqB;QAE5C,MAAM,aAAa;YACjB;YACA,eAAe,KAAK,GAAG;YACvB,eAAe;QACjB;QAEA,8BAA8B;QAC9B,IAAI;YACF,MAAM,IAAA,8KAAS,EAAC,QAAQ;QAC1B,EAAE,OAAO,OAAY;YACnB,qCAAqC;YACrC,IAAI,MAAM,IAAI,KAAK,aAAa;gBAC9B,MAAM,IAAA,2KAAM,EAAC,QAAQ;YACvB,OAAO;gBACL,MAAM;YACR;QACF;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,qCAAqC;QACnD,MAAM;IACR;AACF","debugId":null}},
    {"offset": {"line": 6209, "column": 0}, "map": {"version":3,"sources":["file:///D:/ubatech/hooks/use-toast.ts"],"sourcesContent":["'use client'\n\n// Inspired by react-hot-toast library\nimport * as React from 'react'\n\nimport type { ToastActionElement, ToastProps } from '@/components/ui/toast'\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: 'ADD_TOAST',\n  UPDATE_TOAST: 'UPDATE_TOAST',\n  DISMISS_TOAST: 'DISMISS_TOAST',\n  REMOVE_TOAST: 'REMOVE_TOAST',\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType['ADD_TOAST']\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType['UPDATE_TOAST']\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType['DISMISS_TOAST']\n      toastId?: ToasterToast['id']\n    }\n  | {\n      type: ActionType['REMOVE_TOAST']\n      toastId?: ToasterToast['id']\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: 'REMOVE_TOAST',\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case 'ADD_TOAST':\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case 'UPDATE_TOAST':\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t,\n        ),\n      }\n\n    case 'DISMISS_TOAST': {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t,\n        ),\n      }\n    }\n    case 'REMOVE_TOAST':\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, 'id'>\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: 'UPDATE_TOAST',\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: 'DISMISS_TOAST', toastId: id })\n\n  dispatch({\n    type: 'ADD_TOAST',\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: 'DISMISS_TOAST', toastId }),\n  }\n}\n\nexport { useToast, toast }\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 6366, "column": 0}, "map": {"version":3,"sources":["file:///D:/ubatech/components/admin/public-site-control.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useEffect, useState } from \"react\"\r\nimport { getPublicSiteStatus, setPublicSiteStatus } from \"@/lib/public-site-status\"\r\nimport { useToast } from \"@/hooks/use-toast\"\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\r\n\r\ninterface PublicSiteControlProps {\r\n  userId: string\r\n  userRole: string\r\n}\r\n\r\nexport default function PublicSiteControl({ userId, userRole }: PublicSiteControlProps) {\r\n  const [isPublic, setIsPublic] = useState(true)\r\n  const [loading, setLoading] = useState(true)\r\n  const [updating, setUpdating] = useState(false)\r\n  const { toast } = useToast()\r\n\r\n  // Solo mostrar si es superusuario (aceptar \"super\" o \"superuser\")\r\n  if (userRole !== \"superuser\" && userRole !== \"super\") {\r\n    return null\r\n  }\r\n\r\n  useEffect(() => {\r\n    loadStatus()\r\n  }, [])\r\n\r\n  async function loadStatus() {\r\n    try {\r\n      setLoading(true)\r\n      const status = await getPublicSiteStatus()\r\n      setIsPublic(status.isPublic)\r\n    } catch (error) {\r\n      console.error(\"Error loading public site status:\", error)\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"No se pudo cargar el estado de la p√°gina p√∫blica\",\r\n        variant: \"destructive\",\r\n      })\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  async function handleToggle() {\r\n    try {\r\n      setUpdating(true)\r\n      await setPublicSiteStatus(!isPublic, userId)\r\n      setIsPublic(!isPublic)\r\n      toast({\r\n        title: \"√âxito\",\r\n        description: !isPublic\r\n          ? \"P√°gina p√∫blica habilitada\"\r\n          : \"P√°gina p√∫blica deshabilitada - En mantenimiento\",\r\n        variant: \"default\",\r\n      })\r\n    } catch (error) {\r\n      console.error(\"Error updating public site status:\", error)\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"No se pudo actualizar el estado de la p√°gina p√∫blica\",\r\n        variant: \"destructive\",\r\n      })\r\n    } finally {\r\n      setUpdating(false)\r\n    }\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <Card className=\"border-2 border-indigo-300 bg-gradient-to-br from-indigo-50 to-blue-50 shadow-lg\">\r\n        <CardHeader>\r\n          <CardTitle className=\"text-2xl\">üîê Control de P√°gina P√∫blica</CardTitle>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <div className=\"flex items-center justify-center py-8\">\r\n            <div className=\"w-6 h-6 border-3 border-indigo-300 border-t-indigo-600 rounded-full animate-spin\" />\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <Card className={`border-2 shadow-xl transition-all duration-300 ${\r\n      isPublic \r\n        ? \"border-green-400 bg-gradient-to-br from-green-50 to-emerald-50\" \r\n        : \"border-red-400 bg-gradient-to-br from-red-50 to-orange-50\"\r\n    }`}>\r\n      <CardHeader className=\"pb-4\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div>\r\n            <CardTitle className=\"text-3xl font-bold flex items-center gap-2\">\r\n              {isPublic ? \"üåê\" : \"üöß\"} Control de P√°gina P√∫blica\r\n            </CardTitle>\r\n            <CardDescription className=\"text-base mt-2\">\r\n              {isPublic ? \"‚úÖ P√°gina p√∫blica habilitada\" : \"‚ö†Ô∏è P√°gina en modo mantenimiento\"}\r\n            </CardDescription>\r\n          </div>\r\n        </div>\r\n      </CardHeader>\r\n      <CardContent className=\"space-y-6\">\r\n        {/* Toggle Switch */}\r\n        <div className=\"flex items-center justify-between p-4 rounded-xl bg-white border-2 border-gray-200\">\r\n          <div className=\"flex-1\">\r\n            <p className=\"text-base font-bold block mb-2\">\r\n              Estado de la tienda\r\n            </p>\r\n            <p className=\"text-sm text-gray-700\">\r\n              {isPublic\r\n                ? \"üè™ La tienda est√° disponible para los clientes\"\r\n                : \"üîí La tienda est√° en mantenimiento. Los clientes ver√°n una p√°gina de mantenimiento\"}\r\n            </p>\r\n          </div>\r\n          \r\n          {/* Custom Toggle Button - Estilo iOS/Android */}\r\n          <button\r\n            onClick={handleToggle}\r\n            disabled={updating}\r\n            className={`ml-4 flex-shrink-0 relative inline-flex h-10 w-20 items-center rounded-full transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 cursor-pointer ${\r\n              isPublic\r\n                ? \"bg-green-500 focus:ring-green-500\"\r\n                : \"bg-red-500 focus:ring-red-500\"\r\n            } ${updating ? \"opacity-75 cursor-not-allowed\" : \"hover:shadow-lg\"}`}\r\n            title={isPublic ? \"Click para deshabilitar\" : \"Click para habilitar\"}\r\n          >\r\n            {/* C√≠rculo blanco que se mueve */}\r\n            <span\r\n              className={`inline-block h-8 w-8 transform rounded-full bg-white shadow-lg transition duration-300 ease-in-out ${\r\n                isPublic ? \"translate-x-1\" : \"translate-x-10\"\r\n              }`}\r\n            />\r\n            \r\n            {/* Texto dentro del bot√≥n */}\r\n            <span className=\"absolute inset-0 flex items-center justify-center text-xs font-bold text-white pointer-events-none\">\r\n              {isPublic ? (\r\n                <span className=\"mr-3\">ON</span>\r\n              ) : (\r\n                <span className=\"ml-3\">OFF</span>\r\n              )}\r\n            </span>\r\n          </button>\r\n        </div>\r\n\r\n        {/* Estado Indicador */}\r\n        <div className={`p-4 rounded-xl border-2 transition-all duration-300 ${\r\n          isPublic\r\n            ? \"bg-green-100 border-green-400\"\r\n            : \"bg-red-100 border-red-400\"\r\n        }`}>\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className={`w-4 h-4 rounded-full ${isPublic ? \"bg-green-500\" : \"bg-red-500\"}`} />\r\n            <p className={`text-base font-semibold ${\r\n              isPublic ? \"text-green-700\" : \"text-red-700\"\r\n            }`}>\r\n              {isPublic ? \"‚úì P√°gina p√∫blica activa\" : \"‚úó P√°gina en mantenimiento\"}\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Informaci√≥n Adicional */}\r\n        <div className=\"grid grid-cols-2 gap-4 text-sm\">\r\n          <div className=\"p-4 rounded-lg bg-gray-50 border border-gray-200\">\r\n            <p className=\"text-gray-600 font-medium mb-1\">Estado Actual</p>\r\n            <p className={`text-lg font-bold ${\r\n              isPublic ? \"text-green-600\" : \"text-red-600\"\r\n            }`}>\r\n              {isPublic ? \"ACTIVO ‚úÖ\" : \"INACTIVO ‚ùå\"}\r\n            </p>\r\n          </div>\r\n          <div className=\"p-4 rounded-lg bg-gray-50 border border-gray-200\">\r\n            <p className=\"text-gray-600 font-medium mb-1\">Ver Clientes</p>\r\n            <p className=\"text-lg font-bold text-gray-800\">\r\n              {isPublic ? \"Tienda üè™\" : \"Mantenimiento üöß\"}\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Botones de Ayuda */}\r\n        <div className=\"pt-3 border-t-2 border-gray-200 text-center\">\r\n          <p className=\"text-xs text-gray-500\">\r\n            üí° Usa este control para habilitar o deshabilitar la tienda de forma inmediata\r\n          </p>\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 6719, "column": 0}, "map": {"version":3,"sources":["file:///D:/ubatech/components/admin/settings.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport type React from \"react\"\r\nimport { useState, useEffect } from \"react\"\r\nimport { getAuth } from \"firebase/auth\"\r\nimport { app, getDb } from \"@/lib/firebase\"\r\nimport { collection, getDocs, doc, setDoc } from \"firebase/firestore\"\r\nimport { getInactivityTimeout, setInactivityTimeout } from \"@/lib/admin-auth\"\r\nimport PublicSiteControl from \"./public-site-control\"\r\n\r\nexport default function Settings() {\r\n  const [loading, setLoading] = useState(false)\r\n  const [message, setMessage] = useState(\"\")\r\n  const [messageType, setMessageType] = useState<\"success\" | \"error\">(\"success\")\r\n  const [inactivityTimeout, setInactivityTimeoutValue] = useState(5)\r\n  const [isSecuritySuper, setIsSecuritySuper] = useState(false)\r\n  const [lastUpdated, setLastUpdated] = useState<string>(\"\")\r\n  const [user, setUser] = useState<import(\"firebase/auth\").User | null>(null)\r\n  const [userRole, setUserRole] = useState<string | null>(null)\r\n\r\n  const [formData, setFormData] = useState({\r\n    storeName: \"Ubatech+Pro\",\r\n    storeEmail: \"info@ubatech.com\",\r\n    storePhone: \"+57 1 xxxx xxxx\",\r\n    storeWhatsApp: \"+57 1 xxxx xxxx\",\r\n    storeAddress: \"Bogot√°, Colombia\",\r\n    storeHours: \"Lunes - Viernes: 8am - 6pm\",\r\n    description: \"Plataforma de compras online\",\r\n  })\r\n  const [platformData, setPlatformData] = useState({\r\n    version: \"1.0.0\",\r\n    lastUpdate: \"Diciembre 2025\",\r\n    supportEmail: \"support@ubatech.com\",\r\n    description: \"Plataforma de compras online\",\r\n  })\r\n  const [isInitialized, setIsInitialized] = useState(false)\r\n\r\n  // Cargar configuraci√≥n desde Firestore\r\n  useEffect(() => {\r\n    loadSettings()\r\n    \r\n    // Obtener usuario autenticado para PublicSiteControl\r\n    const auth = getAuth(app)\r\n    const unsubscribe = auth.onAuthStateChanged((firebaseUser) => {\r\n      if (firebaseUser) {\r\n        setUser(firebaseUser)\r\n        // Cargar rol desde localStorage\r\n        const role = localStorage.getItem(\"adminRole\")\r\n        setUserRole(role)\r\n      }\r\n    })\r\n    \r\n    return () => unsubscribe()\r\n  }, [])\r\n\r\n  const loadSettings = async () => {\r\n    try {\r\n      const db = getDb()\r\n      const settingsSnapshot = await getDocs(collection(db, \"store_settings\"))\r\n      if (!settingsSnapshot.empty) {\r\n        const settings = settingsSnapshot.docs[0].data()\r\n        setFormData({\r\n          storeName: settings.storeName || \"Ubatech+Pro\",\r\n          storeEmail: settings.storeEmail || \"info@ubatech.com\",\r\n          storePhone: settings.storePhone || \"+57 1 xxxx xxxx\",\r\n          storeWhatsApp: settings.storeWhatsApp || \"+57 1 xxxx xxxx\",\r\n          storeAddress: settings.storeAddress || \"Bogot√°, Colombia\",\r\n          storeHours: settings.storeHours || \"Lunes - Viernes: 8am - 6pm\",\r\n          description: settings.description || \"Plataforma de compras online\",\r\n        })\r\n        if (settings.updatedAt) {\r\n          setLastUpdated(new Date(settings.updatedAt).toLocaleString(\"es-CO\"))\r\n        }\r\n      }\r\n      \r\n      // Cargar informaci√≥n de la plataforma\r\n      const platformSnapshot = await getDocs(collection(db, \"platform_info\"))\r\n      if (!platformSnapshot.empty) {\r\n        const platform = platformSnapshot.docs[0].data()\r\n        setPlatformData({\r\n          version: platform.version || \"1.0.0\",\r\n          lastUpdate: platform.lastUpdate || \"Diciembre 2025\",\r\n          supportEmail: platform.supportEmail || \"support@ubatech.com\",\r\n          description: platform.description || \"Plataforma de compras online\",\r\n        })\r\n      }\r\n      \r\n      setIsInitialized(true)\r\n    } catch (error) {\r\n      console.error(\"Error loading settings:\", error)\r\n      setIsInitialized(true)\r\n    }\r\n  }\r\n\r\n  // Cargar tiempo de inactividad al montar\r\n  useEffect(() => {\r\n    const timeout = getInactivityTimeout()\r\n    setInactivityTimeoutValue(timeout)\r\n    \r\n    // Verificar si es super usuario\r\n    if (typeof window !== \"undefined\") {\r\n      const role = localStorage.getItem(\"adminRole\")\r\n      setIsSecuritySuper(role === \"super\")\r\n    }\r\n  }, [])\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>) => {\r\n    const { name, value } = e.target\r\n    setFormData((prev) => ({ ...prev, [name]: value }))\r\n  }\r\n\r\n  const handlePlatformChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\r\n    const { name, value } = e.target\r\n    setPlatformData((prev) => ({ ...prev, [name]: value }))\r\n  }\r\n\r\n  const handleInactivityChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const value = parseInt(e.target.value, 10)\r\n    if (!isNaN(value)) {\r\n      setInactivityTimeoutValue(value)\r\n    }\r\n  }\r\n\r\n  const handleSaveInactivity = async () => {\r\n    if (inactivityTimeout < 1 || inactivityTimeout > 120) {\r\n      setMessage(\"El tiempo debe estar entre 1 y 120 minutos\")\r\n      setMessageType(\"error\")\r\n      setTimeout(() => setMessage(\"\"), 3000)\r\n      return\r\n    }\r\n\r\n    if (setInactivityTimeout(inactivityTimeout)) {\r\n      setMessage(\"Tiempo de inactividad actualizado correctamente\")\r\n      setMessageType(\"success\")\r\n      setTimeout(() => setMessage(\"\"), 3000)\r\n    } else {\r\n      setMessage(\"Error al guardar el tiempo de inactividad\")\r\n      setMessageType(\"error\")\r\n      setTimeout(() => setMessage(\"\"), 3000)\r\n    }\r\n  }\r\n\r\n  const handleSave = async () => {\r\n    // Validar que storeWhatsApp no tenga placeholders\r\n    if (formData?.storeWhatsApp?.toLowerCase().includes(\"xxxx\")) {\r\n      setMessage(\"‚ùå El campo 'WhatsApp para √ìrdenes' no puede contener placeholders (xxxx). Por favor, ingresa un n√∫mero real.\")\r\n      setMessageType(\"error\")\r\n      setTimeout(() => setMessage(\"\"), 5000)\r\n      return\r\n    }\r\n\r\n    // Validar que storeWhatsApp tenga al menos algunos d√≠gitos\r\n    const whatsappDigitsOnly = formData?.storeWhatsApp?.replace(/\\D/g, \"\") || \"\"\r\n    if (whatsappDigitsOnly.length < 10) {\r\n      setMessage(\"‚ùå El n√∫mero de WhatsApp debe tener al menos 10 d√≠gitos. Actualmente tiene: \" + whatsappDigitsOnly.length)\r\n      setMessageType(\"error\")\r\n      setTimeout(() => setMessage(\"\"), 5000)\r\n      return\r\n    }\r\n\r\n    setLoading(true)\r\n    try {\r\n      const db = getDb()\r\n      const settingsRef = doc(db, \"store_settings\", \"store_settings\")\r\n      const now = new Date()\r\n      const timestamp = now.toISOString()\r\n      \r\n      await setDoc(\r\n        settingsRef,\r\n        {\r\n          ...formData,\r\n          updatedAt: timestamp,\r\n        },\r\n        { merge: true }\r\n      )\r\n\r\n      setMessage(\"‚úì Configuraci√≥n guardada exitosamente. WhatsApp: \" + formData.storeWhatsApp)\r\n      setMessageType(\"success\")\r\n      const nowFormatted = now.toLocaleString(\"es-CO\")\r\n      setLastUpdated(nowFormatted)\r\n      setTimeout(() => setMessage(\"\"), 4000)\r\n    } catch (error) {\r\n      console.error(\"Error:\", error)\r\n      setMessage(\"Error de conexi√≥n: \" + String(error))\r\n      setMessageType(\"error\")\r\n      setTimeout(() => setMessage(\"\"), 5000)\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  const handleSavePlatform = async () => {\r\n    setLoading(true)\r\n    try {\r\n      const db = getDb()\r\n      const platformRef = doc(db, \"platform_info\", \"platform_info\")\r\n      \r\n      await setDoc(\r\n        platformRef,\r\n        {\r\n          ...platformData,\r\n          updatedAt: new Date().toISOString(),\r\n        },\r\n        { merge: true }\r\n      )\r\n\r\n      setMessage(\"‚úì Informaci√≥n de la plataforma guardada exitosamente\")\r\n      setMessageType(\"success\")\r\n      setTimeout(() => setMessage(\"\"), 4000)\r\n    } catch (error) {\r\n      console.error(\"Error:\", error)\r\n      setMessage(\"Error al guardar informaci√≥n de plataforma: \" + String(error))\r\n      setMessageType(\"error\")\r\n      setTimeout(() => setMessage(\"\"), 5000)\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  // Extraer ciudad y pa√≠s para preview\r\n  const addressParts = formData.storeAddress.split(\",\").map((part) => part.trim())\r\n  const city = addressParts[0] || \"Bogot√°\"\r\n  const country = addressParts[1] || \"Colombia\"\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <h1 className=\"text-3xl font-bold\" style={{ color: \"var(--primary-dark)\" }}>\r\n        Configuraci√≥n\r\n      </h1>\r\n\r\n      {isSecuritySuper && (\r\n        <div className=\"bg-white rounded-lg shadow p-6\">\r\n          <h2 className=\"text-xl font-semibold mb-4\" style={{ color: \"var(--primary-dark)\" }}>\r\n            Configuraci√≥n de Seguridad\r\n          </h2>\r\n          <p className=\"text-sm text-gray-600 mb-4\">Administra la configuraci√≥n de seguridad y sesiones</p>\r\n          \r\n          {message && (\r\n            <div className={`mb-4 px-4 py-3 rounded border ${messageType === \"success\" ? \"bg-green-100 border-green-400 text-green-700\" : \"bg-red-100 border-red-400 text-red-700\"}`}>\r\n              {message}\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\r\n            <h3 className=\"font-semibold text-blue-900 mb-2\">Tiempo de Inactividad de Sesi√≥n</h3>\r\n            <p className=\"text-sm text-blue-800 mb-4\">\r\n              Configura el tiempo m√°ximo de inactividad antes de cerrar sesi√≥n autom√°ticamente.\r\n            </p>\r\n\r\n            <div className=\"space-y-4\">\r\n              <div>\r\n                <label htmlFor=\"inactivityTimeout\" className=\"block text-sm font-medium text-gray-700\">\r\n                  Tiempo de inactividad (minutos)\r\n                </label>\r\n                <div className=\"flex items-center gap-2 mt-2\">\r\n                  <input\r\n                    id=\"inactivityTimeout\"\r\n                    type=\"number\"\r\n                    min=\"1\"\r\n                    max=\"120\"\r\n                    value={inactivityTimeout}\r\n                    onChange={handleInactivityChange}\r\n                    className=\"w-32 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 text-black bg-white\"\r\n                    style={{ borderColor: \"var(--accent-turquoise)\" }}\r\n                  />\r\n                  <span className=\"text-sm text-gray-600\">minutos</span>\r\n                </div>\r\n                <p className=\"text-xs text-gray-500 mt-2\">Rango permitido: 1 a 120 minutos</p>\r\n              </div>\r\n\r\n              <button\r\n                onClick={handleSaveInactivity}\r\n                className=\"w-full px-6 py-2 text-white rounded-lg font-medium hover:opacity-90 transition-all\"\r\n                style={{ backgroundColor: \"var(--accent-purple)\" }}\r\n              >\r\n                Guardar Configuraci√≥n de Inactividad\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"bg-white rounded-lg shadow p-6\">\r\n        <h2 className=\"text-xl font-semibold mb-4\" style={{ color: \"var(--primary-dark)\" }}>\r\n          Configuraci√≥n General\r\n        </h2>\r\n        <p className=\"text-sm text-gray-600 mb-4\">Administra la configuraci√≥n de tu tienda y sincroniza con el sitio p√∫blico</p>\r\n\r\n        {message && (\r\n          <div className={`mb-4 px-4 py-3 rounded border ${messageType === \"success\" ? \"bg-green-100 border-green-400 text-green-700\" : \"bg-red-100 border-red-400 text-red-700\"}`}>\r\n            {message}\r\n          </div>\r\n        )}\r\n\r\n        {lastUpdated && (\r\n          <div className=\"text-xs text-gray-500 bg-gray-50 p-2 rounded mb-4\">\r\n            √öltima actualizaci√≥n: {lastUpdated}\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6\">\r\n          <div>\r\n            <label htmlFor=\"storeName\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              Nombre de la Tienda\r\n            </label>\r\n            <input\r\n              id=\"storeName\"\r\n              name=\"storeName\"\r\n              value={formData?.storeName || \"\"}\r\n              onChange={handleChange}\r\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 text-black bg-white\"\r\n              style={{ borderColor: \"var(--accent-turquoise)\" }}\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label htmlFor=\"storeEmail\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              Email de la Tienda\r\n            </label>\r\n            <input\r\n              id=\"storeEmail\"\r\n              name=\"storeEmail\"\r\n              type=\"email\"\r\n              value={formData?.storeEmail || \"\"}\r\n              onChange={handleChange}\r\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 text-black bg-white\"\r\n              style={{ borderColor: \"var(--accent-turquoise)\" }}\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label htmlFor=\"storePhone\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              Tel√©fono\r\n            </label>\r\n            <input\r\n              id=\"storePhone\"\r\n              name=\"storePhone\"\r\n              value={formData?.storePhone || \"\"}\r\n              onChange={handleChange}\r\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 text-black bg-white\"\r\n              style={{ borderColor: \"var(--accent-turquoise)\" }}\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label htmlFor=\"storeWhatsApp\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              üì± WhatsApp para √ìrdenes (Requerido)\r\n            </label>\r\n            <input\r\n              id=\"storeWhatsApp\"\r\n              name=\"storeWhatsApp\"\r\n              value={formData?.storeWhatsApp || \"\"}\r\n              onChange={handleChange}\r\n              placeholder=\"Ej: +57 1 1234 5678 o 573187654321\"\r\n              required\r\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 text-black bg-white\"\r\n              style={{ borderColor: \"var(--accent-turquoise)\" }}\r\n            />\r\n            <p className=\"text-xs text-gray-500 mt-1\">\r\n              ‚ö†Ô∏è IMPORTANTE: Este es el n√∫mero que se usa para recibir √≥rdenes en checkout. Debe ser un n√∫mero real (sin placeholders xxxx). Incluye c√≥digo de pa√≠s (+57 para Colombia).\r\n            </p>\r\n            {formData?.storeWhatsApp?.toLowerCase().includes(\"xxxx\") && (\r\n              <p className=\"text-xs text-red-600 mt-2 font-semibold\">‚ùå Este campo contiene placeholders (xxxx). Por favor, ingresa un n√∫mero real.</p>\r\n            )}\r\n          </div>\r\n\r\n          <div>\r\n            <label htmlFor=\"storeAddress\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              Direcci√≥n\r\n            </label>\r\n            <input\r\n              id=\"storeAddress\"\r\n              name=\"storeAddress\"\r\n              value={formData?.storeAddress || \"\"}\r\n              onChange={handleChange}\r\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 text-black bg-white\"\r\n              style={{ borderColor: \"var(--accent-turquoise)\" }}\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label htmlFor=\"storeHours\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              Horario de Atenci√≥n\r\n            </label>\r\n            <input\r\n              id=\"storeHours\"\r\n              name=\"storeHours\"\r\n              value={formData?.storeHours || \"\"}\r\n              onChange={handleChange}\r\n              placeholder=\"Ej: Lunes - Viernes: 8am - 6pm\"\r\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 text-black bg-white\"\r\n              style={{ borderColor: \"var(--accent-turquoise)\" }}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <button\r\n          onClick={handleSave}\r\n          disabled={loading}\r\n          className=\"w-full px-6 py-2 text-white rounded-lg font-medium hover:opacity-90 transition-all disabled:opacity-50\"\r\n          style={{ backgroundColor: \"var(--accent-green)\" }}\r\n        >\r\n          {loading ? \"Guardando...\" : \"Guardar Configuraci√≥n\"}\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"bg-white rounded-lg shadow p-6\">\r\n        <h2 className=\"text-xl font-semibold mb-4\" style={{ color: \"var(--primary-dark)\" }}>\r\n          Vista Previa - Footer P√∫blico\r\n        </h2>\r\n        <p className=\"text-sm text-gray-600 mb-4\">As√≠ se ver√° la informaci√≥n en el sitio p√∫blico</p>\r\n        \r\n        <div className=\"bg-gray-50 border border-gray-200 rounded-lg p-8\">\r\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\r\n            <div>\r\n              <h3 className=\"text-lg font-bold mb-4\" style={{ color: \"var(--primary-dark)\" }}>\r\n                Contacto\r\n              </h3>\r\n              <div className=\"space-y-2 text-gray-600 text-sm\">\r\n                <p>\r\n                  <strong>Tel√©fono:</strong> {formData.storePhone}\r\n                </p>\r\n                <p>\r\n                  <strong>Email:</strong> {formData.storeEmail}\r\n                </p>\r\n                <p>\r\n                  <strong>Horario:</strong> {formData.storeHours}\r\n                </p>\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <h3 className=\"text-lg font-bold mb-4\" style={{ color: \"var(--primary-dark)\" }}>\r\n                Ubicaci√≥n\r\n              </h3>\r\n              <div className=\"space-y-2 text-gray-600 text-sm\">\r\n                <p>{addressParts[0] || \"Bogot√°\"}</p>\r\n                <p>{addressParts[1] || \"Colombia\"}</p>\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <h3 className=\"text-lg font-bold mb-4\" style={{ color: \"var(--primary-dark)\" }}>\r\n                Sobre Nosotros\r\n              </h3>\r\n              <p className=\"text-gray-600 text-sm\">\r\n                {platformData.description}\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"border-t border-gray-200 mt-8 pt-8\">\r\n            <p className=\"text-center text-gray-600 text-sm\">\r\n              ¬© {new Date().getFullYear()} {formData.storeName}. Todos los derechos reservados.\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"bg-white rounded-lg shadow p-6\">\r\n        <h2 className=\"text-xl font-semibold mb-4\" style={{ color: \"var(--primary-dark)\" }}>\r\n          Informaci√≥n de la Plataforma\r\n        </h2>\r\n        <p className=\"text-sm text-gray-600 mb-4\">\r\n          {isSecuritySuper \r\n            ? \"Administra los datos de versi√≥n, soporte y descripci√≥n de la plataforma\" \r\n            : \"Informaci√≥n de versi√≥n, soporte y descripci√≥n de la plataforma\"}\r\n        </p>\r\n\r\n        {message && (\r\n          <div className={`mb-4 px-4 py-3 rounded border ${messageType === \"success\" ? \"bg-green-100 border-green-400 text-green-700\" : \"bg-red-100 border-red-400 text-red-700\"}`}>\r\n            {message}\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6\">\r\n          <div>\r\n            <label htmlFor=\"version\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              Versi√≥n de la Plataforma\r\n            </label>\r\n            <input\r\n              id=\"version\"\r\n              name=\"version\"\r\n              value={platformData.version}\r\n              onChange={handlePlatformChange}\r\n              placeholder=\"Ej: 1.0.0\"\r\n              disabled={!isSecuritySuper}\r\n              className={`w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 text-black bg-white ${!isSecuritySuper ? 'opacity-60 cursor-not-allowed' : ''}`}\r\n              style={{ borderColor: \"var(--accent-turquoise)\" }}\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label htmlFor=\"lastUpdate\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              √öltima Actualizaci√≥n\r\n            </label>\r\n            <input\r\n              id=\"lastUpdate\"\r\n              name=\"lastUpdate\"\r\n              value={platformData.lastUpdate}\r\n              onChange={handlePlatformChange}\r\n              placeholder=\"Ej: Diciembre 2025\"\r\n              disabled={!isSecuritySuper}\r\n              className={`w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 text-black bg-white ${!isSecuritySuper ? 'opacity-60 cursor-not-allowed' : ''}`}\r\n              style={{ borderColor: \"var(--accent-turquoise)\" }}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"md:col-span-2\">\r\n            <label htmlFor=\"supportEmail\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              Email de Soporte\r\n            </label>\r\n            <input\r\n              id=\"supportEmail\"\r\n              name=\"supportEmail\"\r\n              type=\"email\"\r\n              value={platformData.supportEmail}\r\n              onChange={handlePlatformChange}\r\n              placeholder=\"Ej: support@ubatech.com\"\r\n              disabled={!isSecuritySuper}\r\n              className={`w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 text-black bg-white ${!isSecuritySuper ? 'opacity-60 cursor-not-allowed' : ''}`}\r\n              style={{ borderColor: \"var(--accent-turquoise)\" }}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"md:col-span-2\">\r\n            <label htmlFor=\"platformDescription\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              Descripci√≥n de la Plataforma\r\n            </label>\r\n            <textarea\r\n              id=\"platformDescription\"\r\n              name=\"description\"\r\n              value={platformData.description}\r\n              onChange={handlePlatformChange}\r\n              placeholder=\"Describe la plataforma...\"\r\n              disabled={!isSecuritySuper}\r\n              rows={3}\r\n              className={`w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 text-black bg-white ${!isSecuritySuper ? 'opacity-60 cursor-not-allowed' : ''}`}\r\n              style={{ borderColor: \"var(--accent-turquoise)\" }}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {isSecuritySuper && (\r\n          <button\r\n            onClick={handleSavePlatform}\r\n            disabled={loading}\r\n            className=\"w-full px-6 py-2 text-white rounded-lg font-medium hover:opacity-90 transition-all disabled:opacity-50\"\r\n            style={{ backgroundColor: \"var(--accent-turquoise)\" }}\r\n          >\r\n            {loading ? \"Guardando...\" : \"Guardar Informaci√≥n de Plataforma\"}\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      {/* Control de P√°gina P√∫blica - Solo para Superuser */}\r\n      {(userRole === \"super\" || userRole === \"superuser\") && user && (\r\n        <div className=\"mt-12\">\r\n          <PublicSiteControl userId={user.uid} userRole={userRole} />\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 7794, "column": 0}, "map": {"version":3,"sources":["file:///D:/ubatech/hooks/use-admin-inactivity.ts"],"sourcesContent":["import { useEffect, useRef, useCallback } from \"react\"\r\nimport { useRouter } from \"next/navigation\"\r\nimport { logoutAdmin } from \"@/lib/admin-auth\"\r\n\r\ninterface InactivityConfig {\r\n  timeoutMinutes?: number\r\n  warningMinutes?: number\r\n}\r\n\r\n/**\r\n * Hook para manejar la inactividad del administrador\r\n * Cierra sesi√≥n autom√°ticamente despu√©s del tiempo de inactividad configurado\r\n */\r\nexport function useAdminInactivity(config?: InactivityConfig) {\r\n  const router = useRouter()\r\n  const timeoutRef = useRef<NodeJS.Timeout | null>(null)\r\n  const warningTimeoutRef = useRef<NodeJS.Timeout | null>(null)\r\n  const inactivityMinutes = config?.timeoutMinutes ?? 5\r\n  const warningMinutes = config?.warningMinutes ?? 1\r\n\r\n  const getInactivityTimeout = useCallback(() => {\r\n    if (typeof window === \"undefined\") return inactivityMinutes * 60 * 1000\r\n    \r\n    const customTimeout = localStorage.getItem(\"adminInactivityTimeout\")\r\n    if (customTimeout) {\r\n      const minutes = parseInt(customTimeout, 10)\r\n      return minutes * 60 * 1000\r\n    }\r\n    return inactivityMinutes * 60 * 1000\r\n  }, [inactivityMinutes])\r\n\r\n  const getWarningTimeout = useCallback(() => {\r\n    const timeout = getInactivityTimeout()\r\n    return timeout - warningMinutes * 60 * 1000\r\n  }, [getInactivityTimeout, warningMinutes])\r\n\r\n  const handleLogout = useCallback(async () => {\r\n    localStorage.removeItem(\"adminInactivityWarning\")\r\n    await logoutAdmin()\r\n    router.push(\"/admin/login\")\r\n  }, [router])\r\n\r\n  const resetInactivityTimer = useCallback(() => {\r\n    // Limpiar timers previos\r\n    if (timeoutRef.current) clearTimeout(timeoutRef.current)\r\n    if (warningTimeoutRef.current) clearTimeout(warningTimeoutRef.current)\r\n\r\n    // Establecer timer de advertencia\r\n    warningTimeoutRef.current = setTimeout(() => {\r\n      if (typeof window !== \"undefined\") {\r\n        localStorage.setItem(\"adminInactivityWarning\", \"true\")\r\n        // Emitir evento para mostrar notificaci√≥n\r\n        window.dispatchEvent(new CustomEvent(\"adminInactivityWarning\"))\r\n      }\r\n    }, getWarningTimeout())\r\n\r\n    // Establecer timer de cierre de sesi√≥n\r\n    timeoutRef.current = setTimeout(() => {\r\n      handleLogout()\r\n    }, getInactivityTimeout())\r\n\r\n    // Limpiar la advertencia\r\n    if (typeof window !== \"undefined\") {\r\n      localStorage.removeItem(\"adminInactivityWarning\")\r\n    }\r\n  }, [getInactivityTimeout, getWarningTimeout, handleLogout])\r\n\r\n  useEffect(() => {\r\n    // Resetear timer cuando el usuario interact√∫a\r\n    const events = [\"mousedown\", \"keydown\", \"touchstart\", \"click\"]\r\n\r\n    const handleActivity = () => {\r\n      resetInactivityTimer()\r\n    }\r\n\r\n    events.forEach((event) => {\r\n      document.addEventListener(event, handleActivity, true)\r\n    })\r\n\r\n    // Iniciar timer al montar\r\n    resetInactivityTimer()\r\n\r\n    return () => {\r\n      events.forEach((event) => {\r\n        document.removeEventListener(event, handleActivity, true)\r\n      })\r\n      if (timeoutRef.current) clearTimeout(timeoutRef.current)\r\n      if (warningTimeoutRef.current) clearTimeout(warningTimeoutRef.current)\r\n    }\r\n  }, [resetInactivityTimer])\r\n\r\n  return { handleLogout }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAWO,SAAS,mBAAmB,MAAyB;IAC1D,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,aAAa,IAAA,+MAAM,EAAwB;IACjD,MAAM,oBAAoB,IAAA,+MAAM,EAAwB;IACxD,MAAM,oBAAoB,QAAQ,kBAAkB;IACpD,MAAM,iBAAiB,QAAQ,kBAAkB;IAEjD,MAAM,uBAAuB,IAAA,oNAAW,EAAC;QACvC,wCAAmC,OAAO,oBAAoB,KAAK;;;QAEnE,MAAM;IAMR,GAAG;QAAC;KAAkB;IAEtB,MAAM,oBAAoB,IAAA,oNAAW,EAAC;QACpC,MAAM,UAAU;QAChB,OAAO,UAAU,iBAAiB,KAAK;IACzC,GAAG;QAAC;QAAsB;KAAe;IAEzC,MAAM,eAAe,IAAA,oNAAW,EAAC;QAC/B,aAAa,UAAU,CAAC;QACxB,MAAM,IAAA,mIAAW;QACjB,OAAO,IAAI,CAAC;IACd,GAAG;QAAC;KAAO;IAEX,MAAM,uBAAuB,IAAA,oNAAW,EAAC;QACvC,yBAAyB;QACzB,IAAI,WAAW,OAAO,EAAE,aAAa,WAAW,OAAO;QACvD,IAAI,kBAAkB,OAAO,EAAE,aAAa,kBAAkB,OAAO;QAErE,kCAAkC;QAClC,kBAAkB,OAAO,GAAG,WAAW;YACrC;;QAKF,GAAG;QAEH,uCAAuC;QACvC,WAAW,OAAO,GAAG,WAAW;YAC9B;QACF,GAAG;QAEH,yBAAyB;QACzB;;IAGF,GAAG;QAAC;QAAsB;QAAmB;KAAa;IAE1D,IAAA,kNAAS,EAAC;QACR,8CAA8C;QAC9C,MAAM,SAAS;YAAC;YAAa;YAAW;YAAc;SAAQ;QAE9D,MAAM,iBAAiB;YACrB;QACF;QAEA,OAAO,OAAO,CAAC,CAAC;YACd,SAAS,gBAAgB,CAAC,OAAO,gBAAgB;QACnD;QAEA,0BAA0B;QAC1B;QAEA,OAAO;YACL,OAAO,OAAO,CAAC,CAAC;gBACd,SAAS,mBAAmB,CAAC,OAAO,gBAAgB;YACtD;YACA,IAAI,WAAW,OAAO,EAAE,aAAa,WAAW,OAAO;YACvD,IAAI,kBAAkB,OAAO,EAAE,aAAa,kBAAkB,OAAO;QACvE;IACF,GAAG;QAAC;KAAqB;IAEzB,OAAO;QAAE;IAAa;AACxB","debugId":null}},
    {"offset": {"line": 7887, "column": 0}, "map": {"version":3,"sources":["file:///D:/ubatech/app/admin/dashboard/page.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useEffect, useState } from \"react\"\r\nimport { getAuth, onAuthStateChanged } from \"firebase/auth\"\r\nimport { app, getDb } from \"@/lib/firebase\"\r\nimport { doc, getDoc } from \"firebase/firestore\"\r\nimport { useRouter } from \"next/navigation\"\r\n// ...existing code...\r\nimport AdminHeader from \"@/components/admin-header\"\r\nimport AdminSidebar from \"@/components/admin-sidebar\"\r\nimport CategoriesManager from \"@/components/admin/categories-manager\"\r\nimport ProductsManager from \"@/components/admin/products-manager\"\r\nimport UsersManager from \"@/components/admin/users-manager\"\r\nimport OrdersManager from \"@/components/admin/orders-manager\"\r\nimport Analytics from \"@/components/admin/analytics\"\r\nimport Settings from \"@/components/admin/settings\"\r\nimport { useAdminInactivity } from \"@/hooks/use-admin-inactivity\"\r\nimport { getInactivityTimeout } from \"@/lib/admin-auth\"\r\nimport { useToast } from \"@/hooks/use-toast\"\r\n\r\nexport default function AdminDashboard() {\r\n  const [user, setUser] = useState<import(\"firebase/auth\").User | null>(null)\r\n  const [role, setRole] = useState<string | null>(null)\r\n  const [loading, setLoading] = useState(true)\r\n  const [error, setError] = useState<string | null>(null)\r\n  const router = useRouter()\r\n  const { toast } = useToast()\r\n  const [activeTab, setActiveTab] = useState(\"dashboard\")\r\n  const [showWarning, setShowWarning] = useState(false)\r\n  const [countdownSeconds, setCountdownSeconds] = useState(0)\r\n  \r\n  // Obtener timeout configurado\r\n  const inactivityMinutes = getInactivityTimeout()\r\n  const { handleLogout } = useAdminInactivity({ timeoutMinutes: inactivityMinutes })\r\n\r\n  useEffect(() => {\r\n    const auth = getAuth(app)\r\n    const unsubscribe = onAuthStateChanged(auth, async (firebaseUser) => {\r\n      if (firebaseUser) {\r\n        setUser(firebaseUser)\r\n        // Consultar el rol en Firestore\r\n        try {\r\n          const db = getDb()\r\n          const userDoc = await getDoc(doc(db, \"adminUsers\", firebaseUser.uid))\r\n          if (userDoc.exists()) {\r\n            const data = userDoc.data()\r\n            setRole(data.role)\r\n            setLoading(false)\r\n          } else {\r\n            // Usuario no existe en adminUsers\r\n            // Pero antes de logout forzado, esperar un momento para permitir sincronizaci√≥n\r\n            // Esto previene logout accidental durante creaci√≥n de usuarios\r\n            const checkAgainAfterDelay = async () => {\r\n              await new Promise(resolve => setTimeout(resolve, 1000))\r\n              \r\n              // Verificar nuevamente\r\n              const retryDoc = await getDoc(doc(db, \"adminUsers\", firebaseUser.uid))\r\n              if (!retryDoc.exists()) {\r\n                // Realmente no existe, logout forzado\r\n                setRole(null)\r\n                setError(\"Usuario no autorizado\")\r\n                setLoading(false)\r\n                await auth.signOut()\r\n                setTimeout(() => {\r\n                  router.push(\"/admin/login\")\r\n                }, 2000)\r\n              } else {\r\n                // Ahora existe, cargar normalmente\r\n                const data = retryDoc.data()\r\n                setRole(data.role)\r\n                setLoading(false)\r\n              }\r\n            }\r\n            \r\n            checkAgainAfterDelay().catch(err => {\r\n              console.error(\"Error in retry check:\", err)\r\n              setLoading(false)\r\n            })\r\n          }\r\n        } catch (err) {\r\n          console.error(\"Error fetching user role:\", err)\r\n          setRole(null)\r\n          setError(\"Error al cargar los datos de usuario\")\r\n          setLoading(false)\r\n          // No hacer logout en caso de error de conexi√≥n, permitir reintentos\r\n        }\r\n      } else {\r\n        setUser(null)\r\n        setRole(null)\r\n        setLoading(false)\r\n        router.push(\"/admin/login\")\r\n      }\r\n    })\r\n    return () => unsubscribe()\r\n  }, [router])\r\n\r\n  // Listener para advertencia de inactividad\r\n  useEffect(() => {\r\n    const handleInactivityWarning = () => {\r\n      setShowWarning(true)\r\n      toast({\r\n        title: \"Sesi√≥n expirando\",\r\n        description: \"Tu sesi√≥n se cerrar√° en 1 minuto por inactividad\",\r\n        variant: \"destructive\",\r\n      })\r\n\r\n      let seconds = 60\r\n      const interval = setInterval(() => {\r\n        seconds -= 1\r\n        setCountdownSeconds(seconds)\r\n        if (seconds <= 0) {\r\n          clearInterval(interval)\r\n          setShowWarning(false)\r\n        }\r\n      }, 1000)\r\n\r\n      return () => clearInterval(interval)\r\n    }\r\n\r\n    window.addEventListener(\"adminInactivityWarning\", handleInactivityWarning)\r\n    return () => window.removeEventListener(\"adminInactivityWarning\", handleInactivityWarning)\r\n  }, [toast])\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-screen\">\r\n        <div\r\n          className=\"w-8 h-8 border-4 border-gray-300 border-t-transparent rounded-full animate-spin\"\r\n          style={{ borderTopColor: \"var(--primary)\" }}\r\n        />\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-screen\">\r\n        <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded\">\r\n          <p>{error}</p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (!user || !role) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-screen\">\r\n        <div className=\"text-center\">\r\n          <p className=\"text-gray-500 mb-4\">No autorizado</p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex h-screen flex-col\">\r\n      <AdminHeader />\r\n      <div className=\"flex flex-1 overflow-hidden\">\r\n        <AdminSidebar activeTab={activeTab} onTabChange={setActiveTab} userRole={role} />\r\n        <main className=\"flex-1 overflow-y-auto p-8\" style={{ backgroundColor: \"#f8fafc\" }}>\r\n          \r\n          {activeTab === \"dashboard\" && <Analytics />}\r\n          {activeTab === \"products\" && <ProductsManager />}\r\n          {activeTab === \"categories\" && <CategoriesManager />}\r\n          {activeTab === \"orders\" && <OrdersManager />}\r\n          {activeTab === \"users\" && (\r\n            role === \"super\" ? (\r\n              <UsersManager />\r\n            ) : (\r\n              <div className=\"flex items-center justify-center h-full\">\r\n                <div className=\"text-center text-gray-500\">\r\n                  <p className=\"text-lg\">No tienes permiso para acceder a esta secci√≥n</p>\r\n                </div>\r\n              </div>\r\n            )\r\n          )}\r\n          {activeTab === \"settings\" && <Settings />}\r\n        </main>\r\n      </div>\r\n      {showWarning && (\r\n        <div className=\"fixed bottom-4 right-4 bg-yellow-50 border border-yellow-200 rounded-lg p-4 shadow-lg max-w-sm\">\r\n          <div className=\"flex items-start\">\r\n            <div className=\"flex-1\">\r\n              <h3 className=\"font-semibold text-yellow-800 mb-1\">Sesi√≥n expirando</h3>\r\n              <p className=\"text-sm text-yellow-700 mb-3\">\r\n                Tu sesi√≥n se cerrar√° por inactividad en {countdownSeconds} segundos\r\n              </p>\r\n              <button\r\n                onClick={() => {\r\n                  setShowWarning(false)\r\n                  setCountdownSeconds(0)\r\n                  toast({\r\n                    title: \"Sesi√≥n renovada\",\r\n                    description: \"Tu sesi√≥n ha sido renovada\",\r\n                  })\r\n                }}\r\n                className=\"text-sm font-medium text-yellow-800 hover:text-yellow-900 underline\"\r\n              >\r\n                Mantener sesi√≥n activa\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}